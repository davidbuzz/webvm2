,9:CURRENT,10:RCOUT,11:OPTFLOW,12:PID,13:COMPASS,14:INAV,15:CAMERA,17:MOTBATT,18:IMU_FAST,19:IMU_RAW
    // @User: Standard
    GSCALAR(log_bitmask,    "LOG_BITMASK",          DEFAULT_LOG_BITMASK),

    // @Param: ANGLE_MAX
    // @DisplayName: Angle Max
    // @Description: Maximum lean angle in all flight modes
    // @Units: cdeg
    // @Increment: 10
    // @Range: 1000 8000
    // @User: Advanced
    ASCALAR(angle_max, "ANGLE_MAX",                 DEFAULT_ANGLE_MAX),

    // @Param: FS_EKF_ACTION
    // @DisplayName: EKF Failsafe Action
    // @Description: Controls the action that will be taken when an EKF failsafe is invoked
    // @Values: 0:Disabled, 1:Warn only, 2:Disarm
    // @User: Advanced
    GSCALAR(fs_ekf_action, "FS_EKF_ACTION",    FS_EKF_ACTION_DEFAULT),

    // @Param: FS_EKF_THRESH
    // @DisplayName: EKF failsafe variance threshold
    // @Description: Allows setting the maximum acceptable compass and velocity variance
    // @Values: 0.6:Strict, 0.8:Default, 1.0:Relaxed
    // @User: Advanced
    GSCALAR(fs_ekf_thresh, "FS_EKF_THRESH",    FS_EKF_THRESHOLD_DEFAULT),

    // @Param: FS_CRASH_CHECK
    // @DisplayName: Crash check enable
    // @Description: This enables automatic crash checking. When enabled the motors will disarm if a crash is detected.
    // @Values: 0:Disabled,1:Warn only,2:Disarm
    // @User: Advanced
    GSCALAR(fs_crash_check, "FS_CRASH_CHECK",    FS_CRASH_DISABLED),

    // @Param: JS_GAIN_DEFAULT
    // @DisplayName: Default gain at boot
    // @Description: Default gain at boot, must be in range [JS_GAIN_MIN , JS_GAIN_MAX]. Current gain value is accessible via NAMED_VALUE_FLOAT MAVLink message with name 'PilotGain'.
    // @User: Standard
    // @Range: 0.1 1.0
    GSCALAR(gain_default, "JS_GAIN_DEFAULT", 0.5),

    // @Param: JS_GAIN_MAX
    // @DisplayName: Maximum joystick gain
    // @Description: Maximum joystick gain
    // @User: Standard
    // @Range: 0.2 1.0
    GSCALAR(maxGain, "JS_GAIN_MAX", 1.0),

    // @Param: JS_GAIN_MIN
    // @DisplayName: Minimum joystick gain
    // @Description: Minimum joystick gain
    // @User: Standard
    // @Range: 0.1 0.8
    GSCALAR(minGain, "JS_GAIN_MIN", 0.25),

    // @Param: JS_GAIN_STEPS
    // @DisplayName: Gain steps
    // @Description: Controls the number of steps between minimum and maximum joystick gain when the gain is adjusted using buttons. Set to 1 to always use JS_GAIN_DEFAULT.
    // @User: Standard
    // @Range: 1 10
    GSCALAR(numGainSettings, "JS_GAIN_STEPS", 4),

    // @Param: JS_LIGHTS_STEPS
    // @DisplayName: Lights brightness steps
    // @Description: Number of steps in brightness between minimum and maximum brightness
    // @User: Standard
    // @Range: 1 10
    // @Units: PWM
    GSCALAR(lights_steps, "JS_LIGHTS_STEPS", 8),

    // @Param: JS_THR_GAIN
    // @DisplayName: Throttle gain scalar
    // @Description: Scalar for gain on the throttle channel. Gets scaled with the current JS gain
    // @User: Standard
    // @Range: 0.5 4.0
    GSCALAR(throttle_gain, "JS_THR_GAIN", 1.0f),

    // @Param: FRAME_CONFIG
    // @DisplayName: Frame configuration
    // @Description: Set this parameter according to your vehicle/motor configuration
    // @User: Standard
    // @RebootRequired: True
    // @Values: 0:BlueROV1, 1:Vectored, 2:Vectored_6DOF, 3:Vectored_6DOF_90, 4:SimpleROV-3, 5:SimpleROV-4, 6:SimpleROV-5, 7:Custom
    GSCALAR(frame_configuration, "FRAME_CONFIG", AP_Motors6DOF::SUB_FRAME_VECTORED),

    // @Group: BTN0_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_0,                   "BTN0_", JSButton),

    // @Group: BTN1_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_1,                   "BTN1_", JSButton),

    // @Group: BTN2_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_2,                   "BTN2_", JSButton),

    // @Group: BTN3_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_3,                   "BTN3_", JSButton),

    // @Group: BTN4_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_4,                   "BTN4_", JSButton),

    // @Group: BTN5_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_5,                   "BTN5_", JSButton),

    // @Group: BTN6_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_6,                   "BTN6_", JSButton),

    // @Group: BTN7_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_7,                   "BTN7_", JSButton),

    // @Group: BTN8_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_8,                   "BTN8_", JSButton),

    // @Group: BTN9_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_9,                   "BTN9_", JSButton),

    // @Group: BTN10_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_10,                   "BTN10_", JSButton),

    // @Group: BTN11_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_11,                   "BTN11_", JSButton),

    // @Group: BTN12_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_12,                   "BTN12_", JSButton),

    // @Group: BTN13_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_13,                   "BTN13_", JSButton),

    // @Group: BTN14_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_14,                   "BTN14_", JSButton),

    // @Group: BTN15_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_15,                   "BTN15_", JSButton),

    // @Group: BTN16_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_16,                   "BTN16_", JSButton),

    // @Group: BTN17_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_17,                   "BTN17_", JSButton),

    // @Group: BTN18_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_18,                   "BTN18_", JSButton),

    // @Group: BTN19_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_19,                   "BTN19_", JSButton),

    // @Group: BTN20_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_20,                   "BTN20_", JSButton),

    // @Group: BTN21_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_21,                   "BTN21_", JSButton),

    // @Group: BTN22_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_22,                   "BTN22_", JSButton),

    // @Group: BTN23_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_23,                   "BTN23_", JSButton),

    // @Group: BTN24_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_24,                   "BTN24_", JSButton),

    // @Group: BTN25_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_25,                   "BTN25_", JSButton),

    // @Group: BTN26_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_26,                   "BTN26_", JSButton),

    // @Group: BTN27_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_27,                   "BTN27_", JSButton),

    // @Group: BTN28_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_28,                   "BTN28_", JSButton),

    // @Group: BTN29_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_29,                   "BTN29_", JSButton),

    // @Group: BTN30_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_30,                   "BTN30_", JSButton),

    // @Group: BTN31_
    // @Path: ../libraries/AP_JSButton/AP_JSButton.cpp
    GGROUP(jbtn_31,                   "BTN31_", JSButton),

    // @Param: RC_SPEED
    // @DisplayName: ESC Update Speed
    // @Description: This is the speed in Hertz that your ESCs will receive updates
    // @Units: Hz
    // @Range: 50 490
    // @Increment: 1
    // @User: Advanced
    GSCALAR(rc_speed, "RC_SPEED",              RC_SPEED_DEFAULT),

    // @Param: ACRO_RP_P
    // @DisplayName: Acro Roll and Pitch P gain
    // @Description: Converts pilot roll and pitch into a desired rate of rotation in ACRO and SPORT mode.  Higher values mean faster rate of rotation.
    // @Range: 1 10
    // @User: Standard
    GSCALAR(acro_rp_p,                 "ACRO_RP_P",           ACRO_RP_P),

    // @Param: ACRO_YAW_P
    // @DisplayName: Acro Yaw P gain
    // @Description: Converts pilot yaw input into a desired rate of rotation.  Higher values mean faster rate of rotation.
    // @Range: 1 10
    // @User: Standard
    GSCALAR(acro_yaw_p,                 "ACRO_YAW_P",           ACRO_YAW_P),

    // @Param: ACRO_BAL_ROLL
    // @DisplayName: Acro Balance Roll
    // @Description: rate at which roll angle returns to level in acro mode.  A higher value causes the vehicle to return to level faster.
    // @Range: 0 3
    // @Increment: 0.1
    // @User: Advanced
    GSCALAR(acro_balance_roll,      "ACRO_BAL_ROLL",    ACRO_BALANCE_ROLL),

    // @Param: ACRO_BAL_PITCH
    // @DisplayName: Acro Balance Pitch
    // @Description: rate at which pitch angle returns to level in acro mode.  A higher value causes the vehicle to return to level faster.
    // @Range: 0 3
    // @Increment: 0.1
    // @User: Advanced
    GSCALAR(acro_balance_pitch,     "ACRO_BAL_PITCH",   ACRO_BALANCE_PITCH),

    // @Param: ACRO_TRAINER
    // @DisplayName: Acro Trainer
    // @Description: Type of trainer used in acro mode
    // @Values: 0:Disabled,1:Leveling,2:Leveling and Limited
    // @User: Advanced
    GSCALAR(acro_trainer,   "ACRO_TRAINER",     ACRO_TRAINER_LIMITED),

    // @Param: ACRO_EXPO
    // @DisplayName: Acro Expo
    // @Description: Acro roll/pitch Expo to allow faster rotation when stick at edges
    // @Values: 0:Disabled,0.1:Very Low,0.2:Low,0.3:Medium,0.4:High,0.5:Very High
    // @User: Advanced
    GSCALAR(acro_expo,  "ACRO_EXPO",    ACRO_EXPO_DEFAULT),

    // variables not in the g class which contain EEPROM saved variables

#if AP_CAMERA_ENABLED
    // @Group: CAM
    // @Path: ../libraries/AP_Camera/AP_Camera.cpp
    GOBJECT(camera, "CAM", AP_Camera),
#endif

#if AP_RELAY_ENABLED
    // @Group: RELAY
    // @Path: ../libraries/AP_Relay/AP_Relay.cpp
    GOBJECT(relay,                  "RELAY", AP_Relay),
#endif

    // @Group: COMPASS_
    // @Path: ../libraries/AP_Compass/AP_Compass.cpp
    GOBJECT(compass,        "COMPASS_", Compass),

    // @Group: INS
    // @Path: ../libraries/AP_InertialSensor/AP_InertialSensor.cpp
    GOBJECT(ins,            "INS", AP_InertialSensor),

    // @Group: WPNAV_
    // @Path: ../libraries/AC_WPNav/AC_WPNav.cpp
    GOBJECT(wp_nav, "WPNAV_",       AC_WPNav),

    // @Group: LOIT_
    // @Path: ../libraries/AC_WPNav/AC_Loiter.cpp
    GOBJECT(loiter_nav, "LOIT_", AC_Loiter),

#if CIRCLE_NAV_ENABLED == ENABLED
    // @Group: CIRCLE_
    // @Path: ../libraries/AC_WPNav/AC_Circle.cpp
    GOBJECT(circle_nav, "CIRCLE_",  AC_Circle),
#endif

    // @Group: ATC_
    // @Path: ../libraries/AC_AttitudeControl/AC_AttitudeControl.cpp,../libraries/AC_AttitudeControl/AC_AttitudeControl_Sub.cpp
    GOBJECT(attitude_control, "ATC_", AC_AttitudeControl_Sub),

    // @Group: PSC
    // @Path: ../libraries/AC_AttitudeControl/AC_PosControl.cpp
    GOBJECT(pos_control, "PSC", AC_PosControl),

    // @Group: SR0_
    // @Path: GCS_Mavlink.cpp
    GOBJECTN(_gcs.chan_parameters[0],  gcs0,       "SR0_",     GCS_MAVLINK_Parameters),

#if MAVLINK_COMM_NUM_BUFFERS >= 2
    // @Group: SR1_
    // @Path: GCS_Mavlink.cpp
    GOBJECTN(_gcs.chan_parameters[1],  gcs1,       "SR1_",     GCS_MAVLINK_Parameters),
#endif

#if MAVLINK_COMM_NUM_BUFFERS >= 3
    // @Group: SR2_
    // @Path: GCS_Mavlink.cpp
    GOBJECTN(_gcs.chan_parameters[2],  gcs2,       "SR2_",     GCS_MAVLINK_Parameters),
#endif

#if MAVLINK_COMM_NUM_BUFFERS >= 4
    // @Group: SR3_
    // @Path: GCS_Mavlink.cpp
    GOBJECTN(_gcs.chan_parameters[3],  gcs3,       "SR3_",     GCS_MAVLINK_Parameters),
#endif

#if MAVLINK_COMM_NUM_BUFFERS >= 5
    // @Group: SR4_
    // @Path: GCS_Mavlink.cpp
    GOBJECTN(_gcs.chan_parameters[4],  gcs4,       "SR4_",     GCS_MAVLINK_Parameters),
#endif

#if MAVLINK_COMM_NUM_BUFFERS >= 6
    // @Group: SR5_
    // @Path: GCS_Mavlink.cpp
    GOBJECTN(_gcs.chan_parameters[5],  gcs5,       "SR5_",     GCS_MAVLINK_Parameters),
#endif

#if MAVLINK_COMM_NUM_BUFFERS >= 7
    // @Group: SR6_
    // @Path: GCS_Mavlink.cpp
    GOBJECTN(_gcs.chan_parameters[6],  gcs6,       "SR6_",     GCS_MAVLINK_Parameters),
#endif

    // @Group: AHRS_
    // @Path: ../libraries/AP_AHRS/AP_AHRS.cpp
    GOBJECT(ahrs,                   "AHRS_",    AP_AHRS),

#if HAL_MOUNT_ENABLED
    // @Group: MNT
    // @Path: ../libraries/AP_Mount/AP_Mount.cpp
    GOBJECT(camera_mount,           "MNT",  AP_Mount),
#endif

    // @Group: BATT
    // @Path: ../libraries/AP_BattMonitor/AP_BattMonitor.cpp
    GOBJECT(battery,                "BATT",         AP_BattMonitor),

    // @Group: ARMING_
    // @Path: AP_Arming_Sub.cpp,../libraries/AP_Arming/AP_Arming.cpp
    GOBJECT(arming, "ARMING_", AP_Arming_Sub),

    // @Group: BRD_
    // @Path: ../libraries/AP_BoardConfig/AP_BoardConfig.cpp
    GOBJECT(BoardConfig,            "BRD_",       AP_BoardConfig),

#if HAL_MAX_CAN_PROTOCOL_DRIVERS
    // @Group: CAN_
    // @Path: ../libraries/AP_CANManager/AP_CANManager.cpp
    GOBJECT(can_mgr,        "CAN_",       AP_CANManager),
#endif

#if AP_SIM_ENABLED
    // @Group: SIM_
    // @Path: ../libraries/SITL/SITL.cpp
    GOBJECT(sitl, "SIM_", SITL::SIM),
#endif

    // @Group: BARO
    // @Path: ../libraries/AP_Baro/AP_Baro.cpp
    GOBJECT(barometer, "BARO", AP_Baro),

    // GPS driver
    // @Group: GPS
    // @Path: ../libraries/AP_GPS/AP_GPS.cpp
    GOBJECT(gps, "GPS", AP_GPS),

    // Leak detector
    // @Group: LEAK
    // @Path: ../libraries/AP_LeakDetector/AP_LeakDetector.cpp
    GOBJECT(leak_detector, "LEAK", AP_LeakDetector),

    // @Group: SCHED_
    // @Path: ../libraries/AP_Scheduler/AP_Scheduler.cpp
    GOBJECT(scheduler, "SCHED_", AP_Scheduler),

#if AVOIDANCE_ENABLED == ENABLED
    // @Group: AVOID_
    // @Path: ../libraries/AC_Avoidance/AC_Avoid.cpp
    GOBJECT(avoid,      "AVOID_",   AC_Avoid),
#endif

#if HAL_RALLY_ENABLED
    // @Group: RALLY_
    // @Path: ../libraries/AP_Rally/AP_Rally.cpp
    GOBJECT(rally,      "RALLY_",   AP_Rally),
#endif

    // @Group: MOT_
    // @Path: ../libraries/AP_Motors/AP_Motors6DOF.cpp,../libraries/AP_Motors/AP_MotorsMulticopter.cpp
    GOBJECT(motors, "MOT_",         AP_Motors6DOF),

#if RCMAP_ENABLED == ENABLED
    // @Group: RCMAP_
    // @Path: ../libraries/AP_RCMapper/AP_RCMapper.cpp
    GOBJECT(rcmap, "RCMAP_",        RCMapper),
#endif

#if HAL_NAVEKF2_AVAILABLE
    // @Group: EK2_
    // @Path: ../libraries/AP_NavEKF2/AP_NavEKF2.cpp
    GOBJECTN(ahrs.EKF2, NavEKF2, "EK2_", NavEKF2),
#endif

#if HAL_NAVEKF3_AVAILABLE
    // @Group: EK3_
    // @Path: ../libraries/AP_NavEKF3/AP_NavEKF3.cpp
    GOBJECTN(ahrs.EKF3, NavEKF3, "EK3_", NavEKF3),
#endif

    // @Group: MIS_
    // @Path: ../libraries/AP_Mission/AP_Mission.cpp
    GOBJECT(mission, "MIS_",       AP_Mission),

#if AP_RANGEFINDER_ENABLED
    // @Group: RNGFND
    // @Path: ../libraries/AP_RangeFinder/AP_RangeFinder.cpp
    GOBJECT(rangefinder,   "RNGFND", RangeFinder),

    // @Param: RNGFND_SQ_MIN
    // @DisplayName: Rangefinder signal quality minimum
    // @Description: Minimum signal quality for good rangefinder readings
    // @Range: 0 100
    // @User: Advanced
    GSCALAR(rangefinder_signal_min, "RNGFND_SQ_MIN", RANGEFINDER_SIGNAL_MIN_DEFAULT),

    // @Param: SURFTRAK_DEPTH
    // @DisplayName: SURFTRAK minimum depth
    // @Description: Minimum depth to engage SURFTRAK mode
    // @Units: cm
    // @User: Standard
    GSCALAR(surftrak_depth, "SURFTRAK_DEPTH", SURFTRAK_DEPTH_DEFAULT),
#endif

#if AP_TERRAIN_AVAILABLE
    // @Group: TERRAIN_
    // @Path: ../libraries/AP_Terrain/AP_Terrain.cpp
    GOBJECT(terrain,                "TERRAIN_", AP_Terrain),
#endif

#if AP_OPTICALFLOW_ENABLED
    // @Group: FLOW
    // @Path: ../libraries/AP_OpticalFlow/AP_OpticalFlow.cpp
    GOBJECT(optflow,   "FLOW", AP_OpticalFlow),
#endif

#if AP_RPM_ENABLED
    // @Group: RPM
    // @Path: ../libraries/AP_RPM/AP_RPM.cpp
    GOBJECT(rpm_sensor, "RPM", AP_RPM),
#endif

    // @Group: NTF_
    // @Path: ../libraries/AP_Notify/AP_Notify.cpp
    GOBJECT(notify, "NTF_",  AP_Notify),

    // @Group:
    // @Path: Parameters.cpp
    GOBJECT(g2, "",  ParametersG2),

    // @Group:
    // @Path: ../libraries/AP_Vehicle/AP_Vehicle.cpp
    PARAM_VEHICLE_INFO,

    AP_VAREND
};

/*
  2nd group of parameters
 */
const AP_Param::GroupInfo ParametersG2::var_info[] = {

    // 1 was AP_Stats

#if HAL_PROXIMITY_ENABLED
    // @Group: PRX
    // @Path: ../libraries/AP_Proximity/AP_Proximity.cpp
    AP_SUBGROUPINFO(proximity, "PRX", 2, ParametersG2, AP_Proximity),
#endif

    // 3 was AP_Gripper

    // @Group: SERVO
    // @Path: ../libraries/SRV_Channel/SRV_Channels.cpp
    AP_SUBGROUPINFO(servo_channels, "SERVO", 16, ParametersG2, SRV_Channels),

    // @Group: RC
    // @Path: ../libraries/RC_Channel/RC_Channels_VarInfo.h
    AP_SUBGROUPINFO(rc_channels, "RC", 17, ParametersG2, RC_Channels),

    // 18 was scripting

    // @Param: ORIGIN_LAT
    // @DisplayName: Backup latitude for EKF origin
    // @Description:  Backup EKF origin latitude used when not using a positioning system.
    // @Units: deg
    // @User: Standard
    AP_GROUPINFO("ORIGIN_LAT", 19, ParametersG2, backup_origin_lat, 0),

    // @Param: ORIGIN_LON
    // @DisplayName: Backup longitude for EKF origin
    // @Description:  Backup EKF origin longitude used when not using a positioning system.
    // @Units: deg
    // @User: Standard
    AP_GROUPINFO("ORIGIN_LON", 20, ParametersG2, backup_origin_lon, 0),

    // @Param: ORIGIN_ALT
    // @DisplayName: Backup altitude (MSL) for EKF origin
    // @Description:  Backup EKF origin altitude (MSL) used when not using a positioning system.
    // @Units: m
    // @User: Standard
    AP_GROUPINFO("ORIGIN_ALT", 21, ParametersG2, backup_origin_alt, 0),

    AP_GROUPEND
};

/*
  constructor for g2 object
 */
ParametersG2::ParametersG2()
{
    AP_Param::setup_object_defaults(this, var_info);
}

const AP_Param::ConversionInfo conversion_table[] = {
    { Parameters::k_param_fs_batt_voltage,   0,      AP_PARAM_FLOAT,  "BATT_LOW_VOLT" },
    { Parameters::k_param_fs_batt_mah,       0,      AP_PARAM_FLOAT,  "BATT_LOW_MAH" },
    { Parameters::k_param_failsafe_battery_enabled,       0,      AP_PARAM_INT8,  "BATT_FS_LOW_ACT" },
    { Parameters::k_param_compass_enabled_deprecated,       0,      AP_PARAM_INT8, "COMPASS_ENABLE" },
    { Parameters::k_param_arming,            2,     AP_PARAM_INT16,  "ARMING_CHECK" },
};

void Sub::load_parameters()
{
    AP_Vehicle::load_parameters(g.format_version, Parameters::k_format_version);

    AP_Param::convert_old_parameters(&conversion_table[0], ARRAY_SIZE(conversion_table));

    AP_Param::set_frame_type_flags(AP_PARAM_FRAME_SUB);

    convert_old_parameters();
    AP_Param::set_defaults_from_table(defaults_table, ARRAY_SIZE(defaults_table));
    // We should ignore this parameter since ROVs are neutral buoyancy
    AP_Param::set_by_name("MOT_THST_HOVER", 0.5);

    // PARAMETER_CONVERSION - Added: Mar-2022
#if AP_FENCE_ENABLED
    AP_Param::convert_class(g.k_param_fence_old, &fence, fence.var_info, 0, true);
#endif

    static const AP_Param::G2ObjectConversion g2_conversions[] {
#if AP_AIRSPEED_ENABLED
    // PARAMETER_CONVERSION - Added: JAN-2022
        { &airspeed, airspeed.var_info, 19 },
#endif
#if AP_STATS_ENABLED
    // PARAMETER_CONVERSION - Added: Jan-2024
        { &stats, stats.var_info, 1 },
#endif
#if AP_SCRIPTING_ENABLED
    // PARAMETER_CONVERSION - Added: Jan-2024
        { &scripting, scripting.var_info, 18 },
#endif
#if AP_GRIPPER_ENABLED
    // PARAMETER_CONVERSION - Added: Feb-2024
        { &gripper, gripper.var_info, 3 },
#endif
    };

    AP_Param::convert_g2_objects(&g2, g2_conversions, ARRAY_SIZE(g2_conversions));

    // PARAMETER_CONVERSION - Added: Feb-2024
#if HAL_LOGGING_ENABLED
    AP_Param::convert_class(g.k_param_logger, &logger, logger.var_info, 0, true);
#endif

    static const AP_Param::TopLevelObjectConversion toplevel_conversions[] {
#if AP_SERIALMANAGER_ENABLED
        // PARAMETER_CONVERSION - Added: Feb-2024
        { &serial_manager, serial_manager.var_info, Parameters::k_param_serial_manager_old },
#endif
    };

    AP_Param::convert_toplevel_objects(toplevel_conversions, ARRAY_SIZE(toplevel_conversions));
}

void Sub::convert_old_parameters()
{
    // attitude control filter parameter changes from _FILT to FLTE or FLTD
    const AP_Param::ConversionInfo filt_conversion_info[] = {
        // move ATC_RAT_RLL/PIT_FILT to FLTD, move ATC_RAT_YAW_FILT to FLTE
        { Parameters::k_param_attitude_control, 385, AP_PARAM_FLOAT, "ATC_RAT_RLL_FLTE" },
        { Parameters::k_param_attitude_control, 386, AP_PARAM_FLOAT, "ATC_RAT_PIT_FLTE" },
        { Parameters::k_param_attitude_control, 387, AP_PARAM_FLOAT, "ATC_RAT_YAW_FLTE" },
    };
    AP_Param::convert_old_parameters(&filt_conversion_info[0], ARRAY_SIZE(filt_conversion_info));

    SRV_Channels::upgrade_parameters();
}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             #pragma once

#define AP_PARAM_VEHICLE_NAME sub

#include <AP_Common/AP_Common.h>

#include <AP_Arming/AP_Arming.h>

// Global parameter class.
//
class Parameters {
public:
    // The version of the layout as described by the parameter enum.
    //
    // When changing the parameter enum in an incompatible fashion, this
    // value should be incremented by one.
    //
    // The increment will prevent old parameters from being used incorrectly
    // by newer code.
    //
    static const uint16_t        k_format_version = 1;

    // Parameter identities.
    //
    // The enumeration defined here is used to ensure that every parameter
    // or parameter group has a unique ID number.   This number is used by
    // AP_Param to store and locate parameters in EEPROM.
    //
    // Note that entries without a number are assigned the next number after
    // the entry preceding them.    When adding new entries, ensure that they
    // don't overlap.
    //
    // Try to group related variables together, and assign them a set
    // range in the enumeration.    Place these groups in numerical order
    // at the end of the enumeration.
    //
    // WARNING: Care should be taken when editing this enumeration as the
    //          AP_Param load/save code depends on the values here to identify
    //          variables saved in EEPROM.
    //
    //
    enum {
        // Layout version number, always key zero.
        //
        k_param_format_version = 0,
        k_param_software_type, // unused

        k_param_g2, // 2nd block of parameters

        k_param_sitl, // Simulation

        // Telemetry
        k_param_gcs0 = 10,
        k_param_gcs1,
        k_param_gcs2,
        k_param_gcs3,
        k_param_sysid_this_mav,
        k_param_sysid_my_gcs,

        // Hardware/Software configuration
        k_param_BoardConfig = 20, // Board configuration (Pixhawk/Linux/etc)
        k_param_scheduler, // Scheduler (for debugging/perf_info)
        k_param_logger, // AP_Logger Logging
        k_param_serial_manager_old, // Serial ports, AP_SerialManager
        k_param_notify, // Notify Library, AP_Notify
        k_param_arming = 26, // Arming checks
        k_param_can_mgr,

        // Sensor objects
        k_param_ins = 30, // AP_InertialSensor
        k_param_compass, // Compass
        k_param_barometer, // Barometer/Depth Sensor
        k_param_battery, // AP_BattMonitor
        k_param_leak_detector, // Leak Detector
        k_param_rangefinder, // Rangefinder
        k_param_gps, // GPS
        k_param_optflow, // Optical Flow


        // Navigation libraries
        k_param_ahrs = 50, // AHRS
        k_param_NavEKF, // Extended Kalman Filter Inertial Navigation             // remove
        k_param_NavEKF2, // EKF2
        k_param_attitude_control, // Attitude Control
        k_param_pos_control, // Position Control
        k_param_wp_nav, // Waypoint navigation
        k_param_mission, // Mission library
        k_param_fence_old, // only used for conversion
        k_param_terrain, // Terrain database
        k_param_rally, // Disabled
        k_param_circle_nav, // Disabled
        k_param_avoid, // Relies on proximity and fence
        k_param_NavEKF3,
        k_param_loiter_nav,


        // Other external hardware interfaces
        k_param_motors = 65, // Motors
        k_param_relay, // Relay
        k_param_camera, // Camera
        k_param_camera_mount, // Camera gimbal


        // RC_Channel settings (deprecated)
        k_param_rc_1_old = 75,
        k_param_rc_2_old,
        k_param_rc_3_old,
        k_param_rc_4_old,
        k_param_rc_5_old,
        k_param_rc_6_old,
        k_param_rc_7_old,
        k_param_rc_8_old,
        k_param_rc_9_old,
        k_param_rc_10_old,
        k_param_rc_11_old,
        k_param_rc_12_old,
        k_param_rc_13_old,
        k_param_rc_14_old,

        // Joystick gain parameters
        k_param_gain_default,
        k_param_maxGain,
        k_param_minGain,
        k_param_numGainSettings,
        k_param_cam_tilt_step, // deprecated
        k_param_lights_step, // deprecated

        // Joystick button mapping parameters
        k_param_jbtn_0 = 95,
        k_param_jbtn_1,
        k_param_jbtn_2,
        k_param_jbtn_3,
        k_param_jbtn_4,
        k_param_jbtn_5,
        k_param_jbtn_6,
        k_param_jbtn_7,
        k_param_jbtn_8,
        k_param_jbtn_9,
        k_param_jbtn_10,
        k_param_jbtn_11,
        k_param_jbtn_12,
        k_param_jbtn_13,
        k_param_jbtn_14,
        k_param_jbtn_15,

        // 16 more for MANUAL_CONTROL extensions
        k_param_jbtn_16,
        k_param_jbtn_17,
        k_param_jbtn_18,
        k_param_jbtn_19,
        k_param_jbtn_20,
        k_param_jbtn_21,
        k_param_jbtn_22,
        k_param_jbtn_23,
        k_param_jbtn_24,
        k_param_jbtn_25,
        k_param_jbtn_26,
        k_param_jbtn_27,
        k_param_jbtn_28,
        k_param_jbtn_29,
        k_param_jbtn_30,
        k_param_jbtn_31,

        // PID Controllers
        k_param_p_pos_xy = 126, // deprecated
        k_param_p_alt_hold, // deprecated
        k_param_pi_vel_xy, // deprecated
        k_param_p_vel_z, // deprecated
        k_param_pid_accel_z, // deprecated


        // Failsafes
        k_param_failsafe_gcs = 140,
        k_param_failsafe_leak, // leak failsafe behavior
        k_param_failsafe_pressure, // internal pressure failsafe behavior
        k_param_failsafe_pressure_max, // maximum internal pressure in pascal before failsafe is triggered
        k_param_failsafe_temperature, // internal temperature failsafe behavior
        k_param_failsafe_temperature_max, // maximum internal temperature in degrees C before failsafe is triggered
        k_param_failsafe_terrain, // terrain failsafe behavior
        k_param_fs_ekf_thresh,
        k_param_fs_ekf_action,
        k_param_fs_crash_check,
        k_param_failsafe_battery_enabled, // unused - moved to AP_BattMonitor
        k_param_fs_batt_mah,              // unused - moved to AP_BattMonitor
        k_param_fs_batt_voltage,          // unused - moved to AP_BattMonitor
        k_param_failsafe_pilot_input,
        k_param_failsafe_pilot_input_timeout,
        k_param_failsafe_gcs_timeout,


        // Misc Sub settings
        k_param_log_bitmask = 165,
        k_param_angle_max = 167,
        k_param_rangefinder_gain, // deprecated
        k_param_wp_yaw_behavior = 170,
        k_param_xtrack_angle_limit, // Angle limit for crosstrack correction in Auto modes (degrees)
        k_param_pilot_speed_up,     // renamed from k_param_pilot_velocity_z_max
        k_param_pilot_accel_z,
        k_param_compass_enabled_deprecated,
        k_param_surface_depth,
        k_param_rc_speed, // Main output pwm frequency
        k_param_gcs_pid_mask = 178,
        k_param_throttle_filt,
        k_param_throttle_deadzone, // Used in auto-throttle modes
        k_param_terrain_follow = 182,   // deprecated
        k_param_rc_feel_rp,
        k_param_throttle_gain,
        k_param_cam_tilt_center, // deprecated
        k_param_frame_configuration,

        // Acro Mode parameters
        k_param_acro_yaw_p = 220, // Used in all modes for get_pilot_desired_yaw_rate
        k_param_acro_trainer,
        k_param_acro_expo,
        k_param_acro_rp_p,
        k_param_acro_balance_roll,
        k_param_acro_balance_pitch,

        // RPM Sensor
        k_param_rpm_sensor = 232, // Disabled

        // RC_Mapper Library
        k_param_rcmap, // Disabled

        k_param_gcs4,
        k_param_gcs5,
        k_param_gcs6,

        k_param_cam_slew_limit = 237, // deprecated
        k_param_lights_steps,
        k_param_pilot_speed_dn,
        k_param_rangefinder_signal_min,
        k_param_surftrak_depth,

        k_param_vehicle = 257, // vehicle common block of parameters
    };

    AP_Int16        format_version;

    // Telemetry control
    //
    AP_Int16        sysid_this_mav;
    AP_Int16        sysid_my_gcs;

    AP_Float        throttle_filt;

#if AP_RANGEFINDER_ENABLED
    AP_Int8         rangefinder_signal_min;     // minimum signal quality for good rangefinder readings
    AP_Float        surftrak_depth;             // surftrak will try to keep sub below this depth
#endif

    AP_Int8         failsafe_leak;              // leak detection failsafe behavior
    AP_Int8         failsafe_gcs;               // ground station failsafe behavior
    AP_Int8         failsafe_pressure;
    AP_Int8         failsafe_temperature;
    AP_Int32        failsafe_pressure_max;
    AP_Int8         failsafe_temperature_max;
    AP_Int8         failsafe_terrain;
    AP_Int8         failsafe_pilot_input;       // pilot input failsafe behavior
    AP_Float        failsafe_pilot_input_timeout;
    AP_Float        failsafe_gcs_timeout;       // ground station failsafe timeout (seconds)

    AP_Int8         xtrack_angle_limit;

    AP_Int8         wp_yaw_behavior;            // controls how the autopilot controls yaw during missions
    AP_Int8         rc_feel_rp;                 // controls vehicle response to user input with 0 being extremely soft and 100 begin extremely crisp

    // Waypoints
    //
    AP_Int16        pilot_speed_up;        // maximum vertical ascending velocity the pilot may request
    AP_Int16        pilot_speed_dn;        // maximum vertical descending velocity the pilot may request
    AP_Int16        pilot_accel_z;               // vertical acceleration the pilot may request

    // Throttle
    //
    AP_Int16        throttle_deadzone;

    // Misc
    //
    AP_Int32        log_bitmask;

    AP_Int8         fs_ekf_action;
    AP_Int8         fs_crash_check;
    AP_Float        fs_ekf_thresh;
    AP_Int16        gcs_pid_mask;

    AP_Int16        rc_speed; // speed of fast RC Channels in Hz

    AP_Float        gain_default;
    AP_Float        maxGain;
    AP_Float        minGain;
    AP_Int8         numGainSettings;
    AP_Float        throttle_gain;

    AP_Int16        lights_steps;

    // Joystick button parameters
    JSButton        jbtn_0;
    JSButton        jbtn_1;
    JSButton        jbtn_2;
    JSButton        jbtn_3;
    JSButton        jbtn_4;
    JSButton        jbtn_5;
    JSButton        jbtn_6;
    JSButton        jbtn_7;
    JSButton        jbtn_8;
    JSButton        jbtn_9;
    JSButton        jbtn_10;
    JSButton        jbtn_11;
    JSButton        jbtn_12;
    JSButton        jbtn_13;
    JSButton        jbtn_14;
    JSButton        jbtn_15;
    // 16 - 31 from manual_control extension
    JSButton        jbtn_16;
    JSButton        jbtn_17;
    JSButton        jbtn_18;
    JSButton        jbtn_19;
    JSButton        jbtn_20;
    JSButton        jbtn_21;
    JSButton        jbtn_22;
    JSButton        jbtn_23;
    JSButton        jbtn_24;
    JSButton        jbtn_25;
    JSButton        jbtn_26;
    JSButton        jbtn_27;
    JSButton        jbtn_28;
    JSButton        jbtn_29;
    JSButton        jbtn_30;
    JSButton        jbtn_31;

    // Acro parameters
    AP_Float        acro_rp_p;
    AP_Float        acro_yaw_p;
    AP_Float        acro_balance_roll;
    AP_Float        acro_balance_pitch;
    AP_Int8         acro_trainer;
    AP_Float        acro_expo;

    AP_Float                surface_depth;
    AP_Int8                 frame_configuration;

    // Note: keep initializers here in the same order as they are declared
    // above.
    Parameters()
    {
    }
};

/*
  2nd block of parameters, to avoid going past 256 top level keys
*/
class ParametersG2 {
public:
    ParametersG2(void);

    // var_info for holding Parameter information
    static const struct AP_Param::GroupInfo var_info[];

#if HAL_PROXIMITY_ENABLED
    // proximity (aka object avoidance) library
    AP_Proximity proximity;
#endif

    // RC input channels
    RC_Channels_Sub rc_channels;

    // control over servo output ranges
    SRV_Channels servo_channels;

    AP_Float backup_origin_lat;
    AP_Float backup_origin_lon;
    AP_Float backup_origin_alt;
};

extern const AP_Param::Info        var_info[];

// Sub-specific default parameters
static const struct AP_Param::defaults_table_struct defaults_table[] = {
    { "BRD_SAFETY_DEFLT",    0 },
    { "ARMING_CHECK",        AP_Arming::ARMING_CHECK_RC |
                             AP_Arming::ARMING_CHECK_VOLTAGE |
                             AP_Arming::ARMING_CHECK_BATTERY},
    { "CIRCLE_RATE",         2.0f},
    { "ATC_ACCEL_Y_MAX",     110000.0f},
    { "ATC_RATE_Y_MAX",      180.0f},
    { "RC3_TRIM",            1100},
    { "COMPASS_OFFS_MAX",    1000},
    { "INS_GYR_CAL",         0},
#if HAL_MOUNT_ENABLED
    { "MNT1_TYPE",           1},
    { "MNT1_DEFLT_MODE",     MAV_MOUNT_MODE_RC_TARGETING},
    { "MNT1_RC_RATE",        30},
#endif
    { "RC7_OPTION",          214},   // MOUNT1_YAW
    { "RC8_OPTION",          213},   // MOUNT1_PITCH
    { "MOT_PWM_MIN",         1100},
    { "MOT_PWM_MAX",         1900},
    { "PSC_JERK_Z",          50.0f},
    { "WPNAV_SPEED",         100.0f},
    { "PILOT_SPEED_UP",      100.0f},
    { "PSC_VELXY_P",         6.0f},
    { "EK3_SRC1_VELZ",       0},
#if CONFIG_HAL_BOARD_SUBTYPE == HAL_BOARD_SUBTYPE_LINUX_NAVIGATOR
#if AP_BARO_PROBE_EXT_PARAMETER_ENABLED
    { "BARO_PROBE_EXT",      0},
#endif
    { "BATT_MONITOR",        4},
    { "BATT_CAPACITY",       0},
    { "LEAK1_PIN",           27},
    { "SCHED_LOOP_RATE",     200},
    { "SERVO13_FUNCTION",    59},    // k_rcin9, lights 1
    { "SERVO14_FUNCTION",    60},    // k_rcin10, lights 2
    { "SERVO16_FUNCTION",    7},     // k_mount_tilt
    { "SERVO16_REVERSED",    1},
#else
#if AP_BARO_PROBE_EXT_PARAMETER_ENABLED
    { "BARO_PROBE_EXT",      768},
#endif
    { "SERVO9_FUNCTION",     59},    // k_rcin9, lights 1
    { "SERVO10_FUNCTION",    7},     // k_mount_tilt
#endif
};
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               #include "Sub.h"

#include "RC_Channel.h"

// defining these two macros and including the RC_Channels_VarInfo
// header defines the parameter information common to all vehicle
// types
#define RC_CHANNELS_SUBCLASS RC_Channels_Sub
#define RC_CHANNEL_SUBCLASS RC_Channel_Sub

#include <RC_Channel/RC_Channels_VarInfo.h>

// note that this callback is not presently used on Plane:
int8_t RC_Channels_Sub::flight_mode_channel_number() const
{
    return 1; // sub does not have a flight mode channel
}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              #pragma once

#include <RC_Channel/RC_Channel.h>

class RC_Channel_Sub : public RC_Channel
{

public:

protected:

private:

};

class RC_Channels_Sub : public RC_Channels
{
public:

    RC_Channel_Sub obj_channels[NUM_RC_CHANNELS];
    RC_Channel_Sub *channel(const uint8_t chan) override {
        if (chan >= NUM_RC_CHANNELS) {
            return nullptr;
        }
        return &obj_channels[chan];
    }

    // tell the gimbal code all is good with RC input:
    bool in_rc_failsafe() const override { return false; };

protected:

    // note that these callbacks are not presently used on Plane:
    int8_t flight_mode_channel_number() const override;

};
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      APM:Sub Release Notes:

Sub-4.5.0 beta1 22-February-2024
- Branched from Copter 4.5
- Innumerable system-level improvements; see Copter and Plane 4.2-4.5 release notes
- Added SurfTrak mode for surface tracking (Altitude Hold with rangefinders)

Sub-4.1.2 22-February-2024
 - Add support for additional joystick axis for roll/pitch
 - Allow using Compass Learn with no GPS

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 4.1.1 2-November-2023

Changes from 4.1.0:
 - prevent multiple baro drivers on the same device
 - Revert attitude control to 3.5 implementation, hopefully resolving the roll/pitch drift for good.
 - Fix Python 3.11 compatibility
 - drop MMC5xx3 sample rate to 100Hz
 - Introduce CONTROL_FRAME parameter, allowing users to switch control frame for yaw
 - Fix missing deadzone in yaw input for AUTO, SURFACE, GUIDED, and CIRCLE modes
 - Fix Leak detection on Navigator
 - Fix missing deadzone in yaw input for AUTO, SURFACE, GUIDED, and CIRCLE modes
 - Fix GUIDED MODE bouncing back to origin after velocity command
 - Add digital output (including relay) support for Navigator boards
 - Fix Position Hold "bounce back" issue
 - Improve low gain control in Position Hold and Depth Hold modes
 - Add Pixhawk defaults for lights and camera mount tilt
 - Changed flow_of_control error to a gcs warning
 - Always calibrate barometer if negative depth is detected
 - Improve Depth hold behavior when surface/bottom is reached
 - Fix issue where changing modes caused the ROV to dive
 - Change default PILOT_VELZ_MAX to 1 m/s
 - Set default EK3_SRC1_VELZ to None instead of GPS to fix Depth oscilations
 - Set default parameters for a smoother Position Hold and Depth Hold operation
 - Add support for CPU affinity in Linux boards

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 4.1.1 Beta8 31-Oct-2023

 - Revert default Roll/Pitch P and D terms
 - prevent multiple baro drivers on the same device

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 4.1.1 Beta7 16-July-2023

 - Revert attitude control to 3.5 implementation, hopefully resolving the roll/pitch drift for good.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 4.1.1 Beta6 10-July-2023

 - Fix roll/pitch drift in stabilized modes
 - Fix Python 3.11 compatibility

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 4.1.1 Beta5 10-April-2023

 - drop MMC5xx3 sample rate to 100Hz

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 4.1.1 Beta4 1-December-2022

 - Introduce CONTROL_FRAME parameter, allowing users to switch control frame for yaw
 - Fix missing deadzone in yaw input for AUTO, SURFACE, GUIDED, and CIRCLE modes

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 4.1.1 Beta3 1-December-2022

 - Fix Leak detection on Navigator
 - Fix missing deadzone in yaw input for AUTO, SURFACE, GUIDED, and CIRCLE modes

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 4.1.1 Beta2 24-October-2022

 - Fix GUIDED MODE bouncing back to origin after velocity command

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 4.1.1 Beta1 13-October-2022

 - Add digital output (including relay) support for Navigator boards
 - Fix Position Hold "bounce back" issue
 - Improve low gain control in Position Hold and Depth Hold modes
 - Add Pixhawk defaults for lights and camera mount tilt
 - Changed flow_of_control error to a gcs warning
 - Always calibrate barometer if negative depth is detected
 - Improve Depth hold behavior when surface/bottom is reached
 - Fix issue where changing modes caused the ROV to dive
 - Change default PILOT_VELZ_MAX to 1 m/s
 - Tighten default Pitch stabilization parameters
 - Set default EK3_SRC1_VELZ to None instead of GPS to fix Depth oscilations
 - Set default parameters for a smoother Position Hold and Depth Hold operation
 - Add support for CPU affinity in Linux boards

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 4.1.0 6-June-2022

 - Fix agressive depth hold twitching introduced in beta7

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 4.1.0-beta8 26-May-2022

 - Fix issue with poshold introduced in beta7 (no lateral control)
 - Fix i2c buses masks for Navigator
 - Do not use RC3_MIN/MAX instead of MOT_PWM_MIN/MAX
 - Update submodules for easier builds
 - Fix cygwin build

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 4.1.0-beta7 29-Apr-2022

 - Tweak depth hold at arbitrary attitudes
 - Add autotest for depth hold at arbitrary attitudes

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 4.1.0-beta6 19-Apr-2022

 - Update Navigator I2C masks
 - Fix constraining PWM with SERVON_MAX and MOT_PWM_MAX
 - Tweak default BTN parameters
 - Improve althold with large buoyancy/payloads
 - Fix depth hold jumping down when enabling it
 - Allow holding arbitrary attitudes in depth hold and stabilize modes

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 4.1.0-beta5 31-Mar-2022

 - Set default BRD_RTC_TYPE to 3 (GPS and MAVLink)
 - Set default BARO_PROBE_EXT to 768 (Keller and MS5837)

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 4.1.0-beta4 25-Mar-2022

 - Set default loop rate for Navigator

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 4.1.0-beta3 3-Mar-2022

 - Set default parameters for Navigator for camera tilt and lights
 - Set default streamrates

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 4.1.0-beta2 3-Mar-2022

 - Set default parameters for Navigator
 - AP_Hal_Linux: PCA9685: do not shutdown PWM chip
 - Use AK09915 compass at 200Hz
 - Retry reading MMC5983 Compass ID up to 10 times


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 4.1.0beta 3-Jan-2022
 - Rebased on top of Copter 4.1.3
 - Add leak detection support for Pixhawk 4
 - No longer report battery percentage if capacity is set to 0 mAh
 - fix issue where it was not possible to arm after testing motors
 - Added support for the Blue Robotics Navigator Raspberry Pi hat.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 4.0.0 4-March-2020

 - Over 10000 new commits, catching up with other vehicles 4.0 releases
 - The Real Time Operating System (RTOS) is now ChibiOs instead of NuttX
 - Added a new option for automatic detection of the thrusters directions, making setup easier
 - Heavy frames can now roll/tilt to arbitrary attitudes (even upside down)
 - Depth Hold is now working with arbitrary attitudes
 - Depth Hold and Stabilize modes now hold the attitude at which they were enabled
 - Roll-Pitch toggle mode now used the inputs as rate targets instead of position targets
 - In Roll-Pitch Toggle mode, the Center Mount button now levels the ROV
 - Support depth setpoints via MAVlink in Depth-Hold mode
 - Support attitude setpoints via MAVlink in Depth-Hold and Stabilize modes
 - Support for setting MAVLink message intervals
 - Navigator board support
 - Frame SimpleROV-4 now has Roll factor for thrusters 4 and 5
 - Barometers is now recalibrated if disarmed and reading a depth above water level
 - Added thrusters matrix for Frame SimpleROV-3
 - Many improvements to SITL (Software In The Loop simulator for developers) so its behavior better resembles that of a real ROV

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 3.5.4 5-April-2019

- major depth hold performance improvement: remove overshoot and bounce-back
- bugfix motor test initialization condition

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 3.5.3-beta 29-April-2018 / Sub 3.5.3 8-May-2018

Changes from 3.5.2:

- Add current and voltage monitoring to simulation (SITL)
- Add current limiting
- Add momentary relay and servo button functions
- Add servo toggle button functions
- Apply yaw input scaling via ACRO_YAW_P to manual mode
- Remove some vehicle-specific parameter metadata that does not apply to Sub
- Allow zero gains for attitude control
- Allow system time to be set by SYSTEM_TIME message from GCS
- Clarify and improve error messages for depth sensor problems
- Do not report depth calculated via air pressure with on-board barometer
- Add motor test functionality
- Remove arbitrary scalars from inputs in manual mode - allow full power to motors in manual mode
- Disarm motors if initial failsafe action fails to execute
- Implement camera mount pan
- Reduce default yaw input scaling by 25% (ACRO_YAW_P)
- Suppress repeated printing of "GPS detected as MAV" messages when no mavlink gps is connected
- Add RC_SLEW_RATE parameter for slewing input demands to motors mixer in manual mode

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 3.5.2 31-October-2017

Changes from 3.5.1:

- Bugfix output conflicts between motors and servo channel function assignments
- Bugfix Notify leak flag logic
- Bugfix COMPASS_OFFS_MAX should default to 1000
- Don't emit tether turn status via audible STATUSTEXT messages
- Increase threshold for input hold engaged flag
- Announce input hold engaged/disengaged
- Force correct GND_EXT_BUS parameter at boot for Pixhawk 1 and 2
- Rework camera tilt input and slew limiting. This fixes mount stabilization.
- Clear and disable input hold when disarmed
- Allow adjusting PWM output range for lights channels
- Always neutralize control inputs during pilot input failsafe
- Add joystick button functions for relays 3 and 4
- Clear roll/pitch inputs when switching to manual or acro mode

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 3.5.1 12-September-2017 / Sub 3.5.1beta1 29-August-2017

Changes from 3.5:

- Various parameter metadata and default value corrections
- Add support for PLAY_TUNE and LED_CONTROL mavlink commands
- Send sub-specific telemetry via NAMED_VALUE_FLOAT (tether turns, camera tilt angle etc.)
- Support for Keller LD pressure sensors enabling depth measurement to 200 bar / 2 km
- Relax arming checks, no sensor checks required by default
- Increase pilot input failsafe timeout from 1 second to 3 seconds
- Default INS_GYR_CAL behavior to 'Never' (0)
- Bug fix neutralization of forward input channel during failsafe
- Bug fix notify LED status code does not reflect leak fault resolution
- Set GND_EXT_BUS appropriately at boot for both Pixhawk 1 and Pixhawk 2
- Bug fix sensor health flag with no pressure sensor detected at boot
- Acknowledge MAV_CMD_PREFLIGHT_REBOOT_SHUTDOWN before shutting down

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 3.5 09-May-2017 / Sub 3.5-rc2 04-May-2017

Changes from 3.5-rc1:

- Bugfix for external baro failsafe handling when no baro is
connected at boot

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 3.5-rc1 17-April-2017

Major changes:

- Merge with ardupilot project
- Implement autotest suite (autotest.ardupilot.org)
- Firmware available on firmware.ardupilot.org and through QGC dropdown

- All supported frames are included in one binary. Select your frame with the FRAME_CONFIG parameter
- Improved pilot control in depth hold mode. Now depth hold behaves like STABLIZE when pilot commands
  ascent/descent, rather than setting desired climb rate.
- Implemented arming checks and the AP_Arming libraries
- Added pilot input failsafe requiring MANUAL_CONTROL or RC_CHANNELS_OVERRRIDE messages to be received
  at regular intervals. This addresses issue of joystick being disconnected while GCS connection remains
  unbroken.
- Add failsafe for depth sensor malfunction, vehicle will automatically enter MANUAL mode when
  depth sensor malfunctions.
- Drastically reduced latency between IMU updates and motor output (Thanks Randy and Tridge!)
- RC/Servo Channel library and parameters split
- Allow MS5837 pressure sensor on boards other than pixhawk, use GND_EXT_BUS parameter to select
  I2C bus to look for sensor on. -1 = Disabled; default to 1, which is Pixhawk external I2C bus
- Rework parameters, unused or irrelevant parameters have been removed

Other changes:

- No more ch5 mode selection, modes are configured by assigning modes directly to
  joystick button functions. Forward/lateral inputs are now on channel 5/6 (was 6/7)
- Default FS_LEAK_ENABLE to FS_LEAK_WARN_ONLY (was disabled)
- Added support for BlueRobotics Celsius temperature sensor (TSYS01). Temperature is output on
  SCALED_PRESSURE3 message as a workaround.
- No longer report battery percent remaining, as the measurement algorithm is flawed and does not work
  on partially charged batteries.
- Implement auto circle mode (loiter turns)
- Implement circle mode
- Implement guided mode
- Implement auto surface mode (NAV_CMD_LAND)
- Implement spline waypoints
- Implement crash check failsafe
- Implement ekf failsafe
- Implement battery failsafe
- Implement relay joystick button functions
- Add joystick button functions to control servos
- Add joystick button function to toggle between forward/lateral input and roll/pitch input
- Remove BASE_RESET and BASE_PRESS baro parameters. Barometer reset is now done via mavlink cmd.
- Implement parameter reset to defaults via mavlink cmd.
- Fixed bug with camera tilt smoothing conflicting with RC_OVERRIDE messages
- Fix bug preventing LOG_FILE_DSRMROT parameter from working correctly
- Detect external pressure sensor according to BARO_TYPE == BARO_TYPE_WATER rather than hard-coding baro instance index
- Use default StorageManager layout instead of Copter layout
- Add support for AHRS View
- Remove experimental/deprecated VELHOLD and TRANSECT modes
- Some refactoring of code and files to improve readability
- Disable untested CAMERA object and parameters by default
- Only allow negative altitudes and ALT_FRAME_ABOVE_HOME for mission commands

- Remove lots of dead code left over from ArduCopter:

    - RC receiver
    - Landing
    - Unused/unsupported modes
    - Remove channel 5 mode logic
    - Remove aux switches
    - Throttle zero flag
    - Auto trim
    - Unsupported mavlink messages
    - Compassmot calibration
    - Simple mode
    - Ch6 tuning
    - Esc calibration
    - CLI
    - Motor test
    - Helicopter references
    - HIL_MODE
    - Various unused flags, members and methods

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 3.4.1 04-May-2017

Don't report battery percentage estimate. The estimate is only correct if battery
is fully charged at boot. User should rely on voltage estimate.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 3.4 30-Dec-2016 / Sub 3.4-rc3 14-Dec-2016
First Stable Release

Changes from 3.4-rc2:
1) Bug fix for GCS (ground control station) failsafe, suppress warning message
   until after first contact.

Notes:
ArduSub v3.4 is the first official stable release of ArduSub. After nearly a 
year of steady development, testing, and improvement, ArduSub has become one
of the most capable ROV control systems available.
  
Important Note for ArduSub-3.4: Many unused and inapplicable parameters that 
ArduSub inherited from ArduCopter have been removed. As a consequence, after 
upgrading to V3.4 and later, all of the parameters will be erased, and the 
default parameters will be loaded. You should save your parameters before 
flashing this firmware. After upgrading the firmware, you can load your saved 
parameter file through QGroundControl. When loading your old parameter file 
through QGroundControl, you will see many errors about parameters that have 
been removed, this is okay. After you load your parameter file, you need to 
change the SYSID_SW_MREV parameter to 1 before rebooting in order to prevent 
the default parameters from being reloaded. This procedure will only have to 
be done when upgrading from firmware version 3.4-dev. Subsequent releases will 
keep the same parameter format, so this will only have to be done once.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 3.4-rc2 13-Dec-2016
Changes from 3.4-rc1:
1) Bug fix on external barometer initialization. BRD_TYPE parameter should 
   remain set to 2.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Sub 3.4-rc1 11-Dec-2016
Notes:
- Due to parameter reorganization, all parameters will be overwritten when updating
- Must be used with QGroundControl daily builds or stable version 3.1 (once released)
- Joystick buttons are configured by default
- PX4Firmware sensor drivers have been replaced with in-tree APM drivers. On some 
hardware, the barometer driver will sometimes hang until a reboot. If your pressure 
sensor is not detected after rebooting, set the BRD_TYPE parameter to 100 and reboot 
to fall back to the PX4Firmware driver. Please report back if you experience an issue 
with the pressure sensor and the new driver.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~ArduSub Development Begins Here~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

APM:Copter Release Notes:
------------------------------------------------------------------
Copter 3.3.2 01-Dec-2015 / 3.3.2-rc2 18-Nov-2015
Changes from 3.3.2-rc1
1) Bug fix for desired climb rate initialisation that could lead to drop when entering AltHold, Loiter, PosHold
2) Fix to hard landings when WPNAV_SPEED_DN set high in RTL, Auto (resolved by using non-feedforward alt hold)
3) Reduce Bad AHRS by filtering innovations
4) Allow arming without GPS if using Optical Flow
5) Smoother throttle output in Guided mode's velocity control (z-axis now 400hz) 
------------------------------------------------------------------
Copter 3.3.2-rc1 4-Nov-2015
Changes from 3.3.1
1) Helicopter Improvements:
    a) Fix Arming race condition
    b) Fix servos to move after arming in Stabilize and Acro
    c) Implement Pirouette Compensation
    d) Add Rate I-Leak-Min functionality
    e) Add new Stab Collective and Acro Expo Col functions
    f) Add circular swashplate limits (Cyclic Ring)
    g) Add new H_SV_Man functions
    h) Add Hover Roll Trim function
    i) Add Engine Run Enable Aux Channel function
    j) Add servo boot test function
    h) Add Disarm Delay parameter
------------------------------------------------------------------
Copter 3.3.1 26-Oct-2015 / 3.3.1-rc1 20-Oct-2015
Changes from 3.3
1) Bug fix to prevent potential crash if Follow-Me is used after an aborted takeoff
2) compiler upgraded to 4.9.3 (runs slightly faster than 4.7.2 which was used previously)
------------------------------------------------------------------
Copter 3.3 29-Sep-2015 / 3.3-rc12 22-Sep-2015
Changes from 3.3-rc11
1) EKF recovers from pre-arm "Compass variance" failure if compasses are consistent
------------------------------------------------------------------
Copter 3.3-rc11 10-Sep-2015
Changes from 3.3-rc10
1) PreArm "Need 3D Fix" message replaced with detailed reason from EKF
------------------------------------------------------------------
Copter 3.3-rc10 28-Aug-2015
Changes from 3.3-rc9
1) EKF improvements:
    a) simpler optical flow takeoff check
2) Bug Fixes/Minor enhancements:
    a) fix INS3_USE parameter eeprom location
    b) fix SToRM32 serial protocol driver to work with recent versions
    c) increase motor pwm->thrust conversion (aka MOT_THST_EXPO) to 0.65 (was 0.50)
    d) Firmware version sent to GCS in AUTOPILOT_VERSION message
3) Safety:
    a) pre-arm check of compass variance if arming in Loiter, PosHold, Guided
    b) always check GPS before arming in Loiter (previously could be disabled if ARMING_CHECK=0)
    c) sanity check locations received from GCS for follow-me, do-set-home, do-set-ROI
    d) fix optical flow failsafe (was not always triggering LAND when optical flow failed)
    e) failsafe RTL vs LAND decision based on hardcoded 5m from home check (previously used WPNAV_RADIUS parameter)
------------------------------------------------------------------
Copter 3.3-rc9 19-Aug-2015
Changes from 3.3-rc8
1) EKF improvements:
    a) IMU weighting based on vibration levels (previously used accel clipping)
    b) fix blended acceleration (used for altitude control) in cases where first IMU fails
    c) ensure unhealthy barometer values are never consumed
2) TradHeli: remove acceleration feed forward
3) Safety:
    a) check accel, gyro and baro are healthy when arming (previously was only checked pre-arm)
    b) Guided mode velocity controller timeout (vehicle stops) after 3 seconds with no update from GCS
4) Minor enhancements:
    a) fix for AUAV board's usb-connected detection
    b) add Lidar-Lite-V2 support
    c) MOT_THR_MIN_MAX param added to control prioritisation of throttle vs attitude during dynamic flight
    d) RALLY_INCL_HOME param allows always including home when using rally points
    e) DO_FLIGHT_TERMINATION message from GCS acts as kill switch
5) Bug Fixes:
    a) fix to ensure motors start slowly on 2nd spin-up
    b) fix RTL_CLIMB_MIN feature (vehicle climbed too high above home)
------------------------------------------------------------------
Copter 3.3-rc8 25-Jul-2015
Changes from 3.3-rc7
1) EKF improvements:
    a) de-weight accelerometers that are clipping to improve resistance to high vibration
    b) fix EKF to use primary compass instead of first compass (normally the same)
2) UBlox "HDOP" corrected to actually be hdop (was pdop) which leads to 40% lower value reported
3) TradHeli:
    a) Motors library split into "Multicopter" and "TradHeli" so TradHeli does not see multicopter parameters
    b) Heading target reset during landing to reduce vehicle fighting to rotate while on the ground
4) Minor enhancements:
    a) SToRM32 gimbal can be connected to any serial port
    b) log when baro, compass become unhealthy
    c) ESC_CALIBRATION parameter can be set to "9" to disable esc calibration startup check
    d) Circle rate adjustment with ch6 takes effect immediately
    e) log home and origin
    f) pre-arm check of battery voltage and fence
    g) RTL_CLIMB_MIN parameter forces vehicle to climb at least this many cm when RTL is engaged (default is zero)
5) Bug fixes:
    a) fix THR_MIN being incorrectly scaled as pwm value during low-throttle check
    b) fence distance calculated from home (was incorrectly calculated from ekf-origin)
    c) When flying with joystick and joystick is disconnected, control returns immediately to regular TX
    d) dataflash's ATT yaw fixed to report heading as 0 ~ 360
    e) fix to mission's first command being run multiple times during mission if it was a do-command
    f) ekf-check is enabled only after ekf-origin is set (stops red-yellow flashing led when flying without GPS lock)
    g) fix initialisation of mount's mode
    h) start-up logging so parameters only logged once, mission always written
6) Linux:
    a) bebop support
------------------------------------------------------------------
Copter 3.3-rc7 28-Jun-2015
Changes from 3.3-rc6
1) reduce EKF gyro bias uncertainty that caused attitude estimate errors
2) force 400hz IMU logging on (temporary for release candidate testing)
------------------------------------------------------------------
Copter 3.3-rc6 25-Jun-2015
Changes from 3.3-rc5
1) EKF related changes:
    a) reset altitude even when arming without GPS lock
    b) fix yaw twitch caused by EKF heading estimate reset
    c) fix IMU time scaling bug that caused height estimate to deviate from the baro
2) AutoTune improvements:
    a) improved yaw tuning by increasing yaw step magnitude
    b) added logging of accelerations
    c) improvements to step tests
3) Improved crash check:
    a) allow triggering even if pilot doesn't move throttle to zero
    b) easier triggering by removing baro check and using angle error instead of absolute tilt angle 
4) TradHeli:
    a) swash moves while landed in AltHold mode
    b) improvements to land detector
    c) fixed RSC Runup Time calculation
    d) Rate FF Low-pass Filter changed from 5Hz to 10Hz, more responsive
5) support Linux builds for NAVIO+ and Erle-Brain (http://firmware.diydrones.com/Copter/beta/)
6) Other improvements / Bug Fixes:
    a) sonar pre-arm checks only enforced if using optical flow
    b) fix EKF failsafe bug that would not allow recovery
    c) full rate IMU logging for improved vibration analysis (set LOG_BITMASK to All+FullIMU)
    d) new VIBE dataflash message records vibration levels
    e) default MNT_TYPE to "1" if servo gimbal rc outputs were defined
    f) RC_FEEL defaults to medium
    g) addition of SToRM32 serial support (supports mount angle feedback to GCS)
    h) new tricopter's tail servo parameters (MOT_YAW_SV_MIN, MAX, TRIM, REV)
------------------------------------------------------------------
Copter 3.3-rc5 23-May-2015
Changes from 3.3-rc4
1) Fix AHRS bad gyro health message caused by timing jitter and log IMU health
2) TradHeli:
    a) better default rate PIDs
    b) Collective pitch output now operates even when disarmed 
3) Small changes/fixes:
    a) GCS can use MAV_CMD_MISSION_START to start mission in AUTO even without pilot raising throttle 
    b) GCS can force disarming even in flight by setting param2 to "21196"
    c) rc-override timeout reduced from 2 seconds to 1 (applies when using GCS joysticks to control vehicle)
    d) do-set-speed fix so it takes effect immediately during missions
    e) GCS failsafe disarms vehicle if already landed (previously it could RTL) 
------------------------------------------------------------------
Copter 3.3-rc4 17-May-2015
Changes from 3.3-rc3
1) AutoTune:
    a) save roll, pitch, yaw rate acceleration limits along with gains
    b) more conservative gains 
2) Roll, pitch rate control feed-forward now on by default (set ATC_RATE_FF_ENAB to "0" to disable)
3) Serial ports increased to maximum of 4 (set SERIALX_PROTOCOL to 1)
4) MOT_THR_MIX_MIN param to control minimum throttle vs attitude during landing (higher = more attitude control but bumpier landing) 
5) EKF fixes/improvements
    a) prevent yaw errors during fast spins
    b) bug fix preventing external selection of optical flow mode
6) Parachute:
    a) servo/relay held open for 2sec when deploying (was 1sec)
    b) fix altitude check to be alt-above-home (was alt-above ekf origin which could be slightly different)
7) TradHeli:
    a) parameters moved to stop possibility of corruption if board is switched between tradheli and multicopter firmware.  Heli users may need to re-setup some heli-specific params.
    b) H_COLYAW param can be float 
8) Small Improvements / Bug Fixes:
    a) reduced spline overshoot after very long track followed by very short track
    b) log entire mission to dataflash whenever it's uploaded
    c) altitude reported if vehicle takes off before GPS lock
    d) high speed logging of IMU
    e) STOP flight mode renamed to BRAKE and aux switch option added
------------------------------------------------------------------
Copter 3.3-rc2/rc3 02-May-2015
Changes from 3.3-rc1
1) AutoTune reliability fixes (improved filtering to reduce noise interference)
2) Optical flow improvements:
    a) Range Finder pre-arm check - lift vehicle between 50cm ~ 2m before arming.  Can be disabled by setting ARMING_CHECK to "Skip Params/Sonar"
    b) Vehicle altitude limited to range finder altitude when optical flow is enabled 
3) AltHold & Take-off changes:
    a) feed-forward controller and jerk limiting should result in slightly snappier performance and smoother take-offs
    b) vehicle climbs automatically to PILOT_TKOFF_ALT alt when taking off in Loiter, AltHold, PosHold, Sport (disabled by default, pilot's throttle input overrides takeoff)
    c) PILOT_THR_FILT allows enforcing smoother throttle response in manual flight modes (defaults to 0 = off)
    d) TX with sprung throttle can set PILOT_THR_BHV to "1" so motor feedback when landed starts from mid-stick instead of bottom of stick
    e) GCS can initiate takeoff even in Loiter, AltHold, PosHold and sport by issuing NAV_TAKEOFF mavlink command
4) Stop flight mode - causes vehicle to stop quickly, and does not respond to user input or waypoint movement via MAVLink.  Requires GPS, will be renamed to Brake mode.
5) Aux channel features:
    a) Emergency Stop - stops all motors immediately and disarms in 5 seconds
    b) Motor Interlock - opposite of Emergency Stop, must be on to allow motors to spin motors, must be off to arm
6) Air pressure gain scaling (of roll, pitch, yaw) should mostly remove need to re-tune when flying at very different altitudes
7) landing detector simplified to only check vehicle is not accelerating & motors have hit their lower limit
8) Loiter tuning params to remove "freight train" stops:
       raising WPNAV_LOIT_MAXA makes vehicle start and stop faster
       raising WPNAV_LOIT_MINA makes vehicle stop more quickly when sticks centered 
9) Other items:
    a) faster EKF startup
    b) Camera control messages sent via MAVLink to smart cameras.  Allow control of camera zoom for upcoming IntelEdison/Sony QX1 camera control board
    c) Lost Copter Alarm can be triggered by holding throttle down, roll right, pitch back
10) Bug fixes:
    a) Home position set to latest arm position (it was being set to previous disarm location or first GPS lock position)
    b) bug fix to mission Jump to command zero
------------------------------------------------------------------
Copter 3.3-rc1 11-Apr-2015
Changes from 3.2.1
1) Only support fast CPUs boards (Pixhawk, VRBrain, etc) and drop support for APM1, APM2 (sorry!)
2) AutoTune for yaw
3) Smooth throttle curve which should reduce wobbles during fast climbs and descents
4) ch7/ch8 aux switches expanded to ch9 ~ ch12 (see CH9_OPT ~ CH12_OPT params)
5) PX4Flow support in Loiter mode (still somewhat experimental)
6) Safety features:
    a) EKF on by default replacing DCM/InertialNav which should improve robustness
    b) increased accelerometer range from 8G to 16G to reduce chance of climb due to high vibrations (requires accel calibration)
7) Landing features:
    a) improved landing on slopes
    b) retractable landing gear (see LGR_ parameters)
8) Camera Gimbal features:
    a) SToRM32 gimbal support (using MAVLink)
    b) AlexMos gimbal support (using AlexMos serial interface)
    c) do-mount-control commands supported in missions (allows controlling gimbal angle in missions)
9) Battery related features:
    a) PID scaling for battery voltage (disabled by default, see MOT_THST_BAT_ parameters)
    b) smart battery support
10) Other:
    a) support do-set-home command (allows return-to-me and locked home position once GCS enhancements are completed)
    b) performance improvements for Pixhawk reduce CPU load from 80% to 15%
    c) firmware string name changed from ArduCopter to APM:Copter
------------------------------------------------------------------
ArduCopter 3.2.1 11-Feb-2015 / 3.2.1-rc2 30-Jan-2015
Changes from 3.2.1-rc1
1) Bug Fixes:
    a) prevent infinite loop with linked jump commands
    b) Pixhawk memory corruption fix when connecting via USB
    c) vehicle stops at fence altitude limit in Loiter, AltHold, PosHold
    d) protect against multiple arming messages from GCS causing silent gyro calibration failure    
------------------------------------------------------------------
ArduCopter 3.2.1-rc1 08-Jan-2015
Changes from 3.2
1) Enhancements:
    a) reduced twitch when passing Spline waypoints
    b) Faster disarm after landing in Auto, Land, RTL
    c) Pixhawk LED turns green before arming only after GPS HDOP falls below 2.3 (only in flight modes requiring GPS)
2) Safety Features:
    a) Add desired descent rate check to reduce chance of false-positive on landing check
    b) improved MPU6k health monitoring and re-configuration in case of in-flight failure
    c) Rally point distance check reduced to 300m (reduces chance of RTL to far away forgotten Rally point)
    d) auto-disarm if vehicle is landed for 15seconds even in Auto, Guided, RTL, Circle
    e) fence breach while vehicle is landed causes vehicle to disarm (previously did RTL)
3) Bug Fixes:
    a) Check flight mode even when arming from GCS (previously it was possible to arm in RTL mode if arming was initiated from GCS)
    b) Send vehicle target destination in RTL, Guided (allows GCS to show where vehicle is flying to in these modes)
    c) PosHold wind compensation fix
------------------------------------------------------------------
ArduCopter 3.2 07-Nov2014 / 3.2-rc14 31-Oct-2014
Changes from 3.2-rc13
1) Safety Features:
    a) fail to arm if second gyro calibration fails (can be disabled with ARMING_CHECK)
2) Bug fixes:
    a) DCM-check to require one continuous second of bad heading before triggering LAND
    b) I2C bug that could lead to Pixhawk freezing up if I2C bus is noisy
    c) reset DCM and EKF gyro bias estimates after gyro calibration (DCM heading could drift after takeoff due to sudden change in gyro values)
    d) use primary GPS for LED status (instead of always using first GPS)
------------------------------------------------------------------
ArduCopter 3.2-rc13 23-Oct-2014
Changes from 3.2-rc12
1) DCM check triggers LAND if yaw disagrees with GPS by > 60deg (configure with DCM_CHECK_THRESH param) and in Loiter, PosHold, Auto, etc 
2) Safety features:
    a) landing detector checks baro climbrate between -1.5 ~ +1.5 m/s
    b) sanity check AHRS_RP_P and AHRS_YAW_P are never less than 0.05
    c) check set-mode requests from GCS are for this vehicle
3) Bug fixes:
    a) fix ch6 tuning of wp-speed (was getting stuck at zero)
    b) parachute servo set to off position on startup
    c) Auto Takeoff timing bug fix that could cause severe lean on takeoff
    d) timer fix for "slow start" of motors on Pixhawk (timer was incorrectly based on 100hz APM2 main loop speed)
4) reduced number of relays from 4 to 2 (saves memory and flash required on APM boards)
5) reduced number of range finders from 2 to 1 (saves memory and flash on APM boards)
6) allow logging from startup when LOG_BITMASK set to "All+DisarmedLogging" 
------------------------------------------------------------------
ArduCopter 3.2-rc12 10-Oct-2014
Changes from 3.2-rc11
1) disable sonar on APM1 and TradHeli (APM1 & APM2) to allow code to fit 
2) Add pre-arm and health check that gyro calibration succeeded 
3) Bug fix to EKF reporting invalid position and velocity when switched on in flight with Ch7/Ch8 switch 
------------------------------------------------------------------
ArduCopter 3.2-rc11 06-Oct-2014
Changes from 3.2-rc10
1) reduce lean on take-off in Auto by resetting horizontal position targets 
2) TradHeli landing check ignores overall throttle output
3) reduce AHRS bad messages by delaying 20sec after init to allow EKF to settle (Pixhawk only)
4) Bug fixes:
    a) fix THR_MIN scaling issue that could cause landing-detector to fail to detect landing when ch3 min~max > 1000 pwm
    b) fix Mediatek GPS configuration so update rate is set correctly to 5hz
    c) fix to Condition-Yaw mission command to support relative angles
    d) EKF bug fixes when recovering from GPS glitches (affects only Pixhawks using EKF)
------------------------------------------------------------------
ArduCopter 3.2-rc10 24-Sep-2014
Changes from 3.2-rc9
1) two-stage land-detector to reduce motor run-up when landing in Loiter, PosHold, RTL, Auto
2) Allow passthrough from input to output of channels 9 ~ 14 (thanks Emile!)
3) Add 4hz filter to vertical velocity error during AltHold
4) Safety Feature:
    a) increase Alt Disparity pre-arm check threshold to 2m (was 1m)
    b) reset battery failsafe after disarming/arming (thanks AndKe!)
    c) EKF only apply centrifugal corrections when GPS has at least 6 satellites (Pixhawk with EKF enabled only)
5) Bug fixes:
    a) to default compass devid to zero when no compass connected
    b) reduce motor run-up while landing in RTL
------------------------------------------------------------------
ArduCopter 3.2-rc9 11-Sep-2014
Changes from 3.2-rc8
1) FRAM bug fix that could stop Mission or Parameter changes from being saved (Pixhawk, VRBrain only)
------------------------------------------------------------------
ArduCopter 3.2-rc8 11-Sep-2014
Changes from 3.2-rc7
1) EKF reduced ripple to resolve copter motor pulsing
2) Default Param changes:
    a) AltHold Rate P reduced from 6 to 5
    b) AltHold Accel P reduced from 0.75 to 0.5, I from 1.5 to 1.0
    c) EKF check threshold increased from 0.6 to 0.8 to reduce false positives
3) sensor health flags sent to GCS only after initialisation to remove false alerts 
4) suppress bad terrain data alerts
5) Bug Fix:
    a)PX4 dataflash RAM usage reduced to 8k so it works again  
------------------------------------------------------------------
ArduCopter 3.2-rc7 04-Sep-2014
Changes from 3.2-rc6
1) Safety Items:
    a) Landing check made more strict (climb rate requirement reduced to 30cm/s, overall throttle < 25%, rotation < 20deg/sec)
    b) pre-arm check that accels are consistent (Pixhawk only, must be within 1m/sec/sec of each other)
    c) pre-arm check that gyros are consistent (Pixhawk only, must be within 20deg/sec of each other)
    d) report health of all accels and gyros (not just primary) to ground station 
------------------------------------------------------------------
ArduCopter 3.2-rc6 31-Aug-2014
Changes from 3.2-rc5
1) Spline twitch when passing through a waypoint largely resolved
2) THR_DZ param added to allow user configuration of throttle deadzone during AltHold, Loiter, PosHold
3) Landing check made more strict (climb rate must be -40~40cm/s for 1 full second)
4) LAND_REPOSITION param default set to 1
5) TradHeli with flybar passes through pilot inputs directly to swash when in ACRO mode
6) Safety Items:
    a) EKF check disabled when using inertial nav (caused too many false positives)
    b) pre-arm check of internal vs external compass direction (must be within 45deg of each other)
7) Bug Fixes:
    a) resolve NaN in angle targets when vehicle hits gimbal lock in ACRO mode
    b) resolve GPS driver buffer overflow that could lead to missed GPS messages on Pixhawk/PX4 boards
    c) resolve false "compass not calibrated" warnings on Pixhawk/PX4 caused by missing device id initialisation 
------------------------------------------------------------------
ArduCopter 3.2-rc5 15-Aug-2014
Changes from 3.2-rc4
1) Pixhawk's max num waypoints increased to 718
2) Smoother take-off in AltHold, Loiter, PosHold (including removing initial 20cm jump when taking off)
3) ACRO mode roll, pitch, yaw EXPO added for faster rotation when sticks are at extremes (see ACRO_EXPO parameter)
4) ch7/ch8 relay option replaces ch6 option (ch6 is reserved for tuning not switching things on/off)
5) Safety Items:
    a) Baro glitch check relaxed to 5m distance, 15m/s/s max acceleration
    b) EKF/INav check relaxed to 80cm/s/s acceleration correct (default remains as 0.6 but this now means 80cm/s/s)
    c) When GPS or Baro glitch clears, the inertial nav velocities are *not* reset reducing chance of sudden vehicle lean
    d) Baro altitude calculation checked for divide-by-zero and infinity
6) Bug Fixes:
    a) AltHold jump bug fixed (altitude target reset when landed)
    b) Rally point bug fix so it does not climb excessively before flying to rally point
    c) body-frame rate controller z-axis bug fix (fast rotation in z-axis would cause wobble in roll, pitch) 
------------------------------------------------------------------
ArduCopter 3.2-rc4 01-Aug-2014
Changes from 3.2-rc3
1) Pre-takeoff throttle feedback in AltHold, Loiter, PosHold
2) Terrain altitude retrieval from ground station (informational purposes only so far, Pixhawk only) 
3) Safety Items:
    a) "EKF check" will switch to LAND mode if EKF's compass or velocity variance over 0.6 (configurable with EKFCHECK_THRESH param)
       When EKF is not used inertial nav's accelerometer corrections are used as a substitute
    b) Barometer glitch protection added.  BAROGLTCH_DIST and BAROGLTCH_ACCEL parameters control sensitivity similar to GPSGLITCH protection
       When glitching occurs barometer values are temporarily ignored
    c) Throttle/radio and battery failsafes now disarm vehicle when landed regardless of pilot's throttle position
    d) auto-disarm extended to Drift, Sport and OF_Loiter flight modes
    e) APM2 buzzer notification added for arming failure
    f) APM2 arming buzz made longer (now matches Pixhawk)
    g) do-set-servo commands cannot interfere with motor output
4) Bug Fixes:
    a) Drift slow yaw response fixed
    b) AC3.2-rc3 failsafe bug resolved.  In -rc3 the throttle failsafe could be triggered even when disabled or motors armed (although vehicle would not takeoff) 
------------------------------------------------------------------
ArduCopter 3.2-rc3 16-Jul-2014
Changes from 3.2-rc2
1) Hybrid renamed to PosHold
2) Sonar (analog, i2c) and PulsedLight Range Finders enabled on Pixhawk (Allyson, Tridge)
3) Landing changes:
    a) disable pilot repositioning while landing in RTL, Auto (set LAND_REPOSITION to 1 to re-enable) (JonathanC)
    b) delay 4 seconds before landing due to failsafe (JonathanC)
4) Secondary compass calibration enabled, pre-arm check that offsets match current devices (Randy, Tridge, MichaelO)
5) Control improvements:
    a) use bias adjusted gyro rates - helps in cases of severe gyro drift (Jonathan)
    b) bug-fixes when feed-forward turned off (Leonard)
6) TradHeli improvements (RobL):
    a) bug fix to use full collective range in stabilize and acro flight modes
    b) filter added to main rotor input (ch8) to ensure momentary blip doesn't affect main rotor speed
7) Safety items:
    a) increased default circular Fence radius to 300m to reduce chance of breach when GPS lock first acquired
    b) radio failsafe timeout for late frames reduced to 0.5sec for normal receivers or 2.0sec when flying with joystick (Craig)
    c) accelerometer pre-arm check for all active accelerometers (previously only checked the primary accelerometer)
8) Other features:
    a) ch7/ch8 option to retract mount (svefro)
    b) Do-Set-ROI supported in Guided, RTL mode
    c) Condition-Yaw accepted in Guided, RTL modes (MoussSS)
    d) CAMERA dataflash message includes relative and absolute altitude (Craig)
9) Red Balloon Popper support (Randy, Leonard):
    a) Velocity controller added to Guided mode
    b) NAV_GUIDED mission command added
10) Bug fixes:
    a) bug fix to flip on take-off in stabilize mode when landing flag cleared slowly (JonathanC)
    b) allow disarming in AutoTune (JonathanC)
    c) bug fix to unpredictable behaviour when two spline points placed directly ontop of each other
------------------------------------------------------------------
ArduCopter 3.2-rc2 27-May-2014
Changes from 3.2-rc1
1) Hybrid mode initialisation bug fix
2) Throttle pulsing bug fix on Pixhawk
3) Parachute enabled on Pixhawk
4) Rally Points enabled on Pixhawk
------------------------------------------------------------------
ArduCopter 3.2-rc1 9-May-2014
Changes from 3.1.4
1) Hybrid mode - position hold mode but with direct response to pilot input during repositioning (JulienD, SandroT)
2) Spline waypoints (created by David Dewey, modified and integrated by Leonard, Randy)
3) Drift mode uses "throttle assist" for altitude control (Jason)
4) Extended Kalman Filter for potentially more reliable attitude and position control (Pixhawk only) (Paul Riseborough).  Set AHRS_EKF_USE to 1 to enable or use Ch7/8 switch to enable/disable in flight. 
5) Manual flight smoothness:
    a) Smoother roll, pitch response using RC_FEEL_RP parameter (100 = crisp, 0 = extremely soft)
    b) Adjustable max rotation rate (ATC_RATE_RP_MAX, ATC_RATE_Y_MAX) and acceleration (ATC_ACCEL_RP_MAX, ATC_ACCEL_Y_MAX)
6) Autopilot smoothness:
    a) Vertical acceleration in AltHold, Loiter, Hybrid modes can be configured with PILOT_ACCEL_Z parameter (higher = faster acceleration)
    b) Maximum roll and pitch angle acceleration in Loiter mode can be configured with WPNAV_LOIT_JERK (higher = more responsive but potentially jerky)
    c) Yaw speed can be adjusted with ATC_SLEW_YAW parameter (higher = faster)
    d) smoother takeoff with configurable acceleration using WPNAV_ACCEL_Z parameter
    e) Twitches removed during guided mode or when entering Loiter or RTL from high speeds  
7) Mission improvements:
    a) mission will be resumed from last active command when pilot switches out and then back into Auto mode (prev behaviour can be restored by setting MIS_RESTART param to 1)
    b) DO_SET_ROI persistent across waypoints.  All-zero DO_SET_ROI command restores default yaw behaviour
    c) do-jump fixed
    d) conditional_distance fixed
    e) conditional_delay fixed
    f) do-change-speed command takes effect immediately during mission
    g) vehicle faces directly at next waypoint (previously it could be about 10deg off)
    h) loiter turns fix to ensure it will circle around lat/lon point specified in mission command (previously it could be off by CIRCLE_RADIUS)
8) Safety improvements:
    a) After a fence breach, if the pilot re-takes control he/she will be given a minimum of 10 seconds and 20m to recover before the autopilot will invoke RTL or LAND
    b) Parachute support including automatic deployment during mechanical failures
9) Other enhancements:
    a) V-tail quad support
    b) Dual GPS support (secondary GPS output is simply logged, not actually used yet)
    c) Electro Permanent Magnet (aka Gripper) support
    d) Servo pass through for channels 6 ~ 8 (set RC6_FUNCTION to 1)
    e) Remove 80m limit on RTL's return altitude but never let it be above fence's max altitude
10) Other bug fixes:
    a) Bug fix for LAND sometimes getting stuck at 10m
    b) During missions, vehicle will maintain altitude even if WPNAV_SPEED is set above the vehicle's capabilities
    c) when autopilot controls throttle (i.e. Loiter, Auto, etc) vehicle will reach speeds specified in PILOT_VELZ_MAX and WPNAV_SPEED_UP, WPNAV_SPEED_DN parameters
11) CLI removed from APM1/2 to save flash space, critical functions moved to MAVLink:
    a) Individual motor tests (see MP's Initial Setup > Optional Hardware > Motor Test)
    b) compassmot (see MP's Initial Setup > Optional Hardware > Compass/Motor Calib)
    c) parameter reset to factory defaults (see MP's Config/Tuning > Full Parameter List > Reset to Default)
------------------------------------------------------------------
ArduCopter 3.1.5 27-May-2014 / 3.1.5-rc2 20-May-2014
Changes from 3.1.5-rc1
1) Bug Fix to broken loiter (pixhawk only)
2) Workaround to read from FRAM in 128byte chunks to resolve a few users boot issues (Pixhawk only)
------------------------------------------------------------------
ArduCopter 3.1.5-rc1 14-May-2014
Changes from 3.1.4
1) Bug Fix to ignore roll and pitch inputs to loiter controller when in radio failsafe
2) Bug Fix to allow compassmot to work on Pixhawk
------------------------------------------------------------------
ArduCopter 3.1.4 8-May-2014 / 3.1.4-rc1 2-May-2014
Changes from 3.1.3
1) Bug Fix for Pixhawk/PX4 NuttX I2C memory corruption when errors are found on I2C bus
------------------------------------------------------------------
ArduCopter 3.1.3 7-Apr-2014
Changes from 3.1.2
1) Stability patch fix which could cause motors to go to min at full throttle and with large roll/pitch inputs
------------------------------------------------------------------
ArduCopter 3.1.2 13-Feb-2014 / ArduCopter 3.1.2-rc2 12-Feb-2014
Changes from 3.1.2-rc1
1) GPS Glitch detection disabled when connected via USB
2) RC_FEEL_RP param added for adjusting responsiveness to pilot roll/pitch input in Stabilize, Drift, AltHold modes
------------------------------------------------------------------
ArduCopter 3.1.2-rc1 30-Jan-2014
Changes from 3.1.1
1) Pixhawk baro bug fix to SPI communication which could cause large altitude estimate jumps at high temperatures
------------------------------------------------------------------
ArduCopter 3.1.1 26-Jan-2014 / ArduCopter 3.1.1-rc2 21-Jan-2014
Changes from 3.1.1-rc1
1) Pixhawk improvements (available for APM2 when AC3.2 is released):
    a) Faster arming
    b) AHRS_TRIM fix - reduces movement in loiter when yawing
    c) AUX Out 5 & 6 turned into general purpose I/O pins
    d) Three more relays added (relays are pins that can be set to 0V or 5V)
    e) do-set-servo fix to allow servos to be controlled from ground station
    f) Motorsync CLI test
    g) PX4 parameters moved from SD card to eeprom
    h) additional pre-arm checks for baro & inertial nav altitude and lean angle
------------------------------------------------------------------
ArduCopter 3.1.1-rc1 14-Jan-2014
Changes from 3.1
1) Pixhawk improvements:
    a) Telemetry port 2 enabled (for MinimOSD)
    b) SD card reliability improvements
    c) parameters moved to FRAM
    d) faster parameter loading via USB
    e) Futaba SBUS receiver support
2) Bug fixes:
    a) Loiter initialisation fix (Loiter would act like AltHold until flight mode switch changed position)
    b) ROI commands were not returning Lat, Lon, Alt to mission planner when mission was loaded from APM
3) TradHeli only fixes:
    a) Drift now uses same (reduced) collective range as stabilize mode
    b) AutoTune disabled (for tradheli only)
    c) Landing collective (smaller than normal collective) used whenever copter is not moving
------------------------------------------------------------------
ArduCopter 3.1 14-Dec-2013
Changes from 3.1-rc8
1) Pixhawk improvements:
    a) switch to use MPU6k as main accel/gyro
    b) auto loading of IO-board firmware on startup
2) RTL fixes:
    a) initialise waypoint leash length (first RTL stop would be more aggressive than 2nd)
    b) reduce projected stopping distance for higher speed stops
------------------------------------------------------------------
ArduCopter 3.1-rc8 9-Dec-2013
Changes from 3.1-rc7
1) add Y6 motor mapping with all top props CW, bottom pros CCW (set FRAME = 10)
2) Safety Changes:
    a) ignore yaw input during radio failsafe (previously the copter could return home spinning if yaw was full over at time of failsafe)
    b) Reduce GPSGLITCH_RADIUS to 2m (was 5m) to catch glitches faster
3) Bug fixes:
    a) Optical flow SPI bus rates
    b) TradHeli main rotor ramp up speed fix
------------------------------------------------------------------
ArduCopter 3.1-rc7 22-Nov-2013
Changes from 3.1-rc6
1) MOT_SPIN_ARMED default to 70
2) Smoother inertial nav response to missed GPS messages
3) Safety related changes
    a) radio and battery failsafe disarm copter if landed in Loiter or AltHold (previously they would RTL)
    b) Pre-Arm check failure warning output to ground station every 30 seconds until they pass
    c) INS and inertial nav errors logged to dataflash's PM message
    d) pre-arm check for ACRO_BAL_ROLL, ACRO_BAL_PITCH
------------------------------------------------------------------
ArduCopter 3.1-rc6 16-Nov-2013
Improvements over 3.1-rc5
1) Heli improvements:
    a) support for direct drive tails (uses TAIL_TYPE and TAIL_SPEED parameters)
    b) smooth main rotor ramp-up for those without external governor (RSC_RAMP_TIME)
    c) internal estimate of rotor speed configurable with RSC_RUNUP_TIME parameter to ensure rotor at top speed before starting missions
    d) LAND_COL_MIN collective position used when landed (reduces chance copter will push too hard into the ground when landing or before starting missions)
    e) reduced collective while in stabilize mode (STAB_COL_MIN, STAB_COL_MAX) for more precise throttle control
    f) external gyro parameter range changed from 1000~2000 to 0~1000 (more consistent with other parameters)
    g) dynamic flight detector switches on/off leaky-i term depending on copter speed
2) SingleCopter airframe support (contribution from Bill King)
3) Drift mode replaces TOY
4) MPU6k SPI bus speed decreased to 500khz after 4 errors
5) Safety related changes:
    a) crash detector cuts motors if copter upside down for more than 2 seconds
    b) INS (accel and gyro) health check in pre-arm checks
    c) ARMING_CHECK allows turning on/off individual checks for baro, GPS, compass, parameters, board voltage, radio
    d) detect Ublox GPS running at less than 5hz and resend configuration
    e) GPSGlitch acceptable radius reduced to 5m (stricter detection of glitches)
    f) range check roll, pitch input to ensure crazy radio values don't get through to stabilize controller
    g) GPS failsafe options to trigger AltHold instead of LAND or to trigger LAND even if in flight mode that does not require GPS
    h) Battery failsafe option to trigger RTL instead of LAND
    i) MOT_SPIN_ARMED set to zero by default
6) Bug fixes:
    a) missing throttle controller initialisation would mean Stabilize mode's throttle could be non-tilt-compensated
    b) inertial nav baro and gps delay compensation fix (contribution from Neurocopter)
    c) GPS failsafe was invoking LAND mode which still used GPS for horizontal control
------------------------------------------------------------------
ArduCopter 3.1-rc5 22-Oct-2013
Improvements over 3.1-rc4
1) Pixhawk USB reliability improvements
2) AutoTune changes:
    a) enabled by default
    b) status output to GCS
    c) use 2 pos switch only
3) ch7/ch8 LAND
4) Tricopter stability patch improvements [thanks to texlan]
5) safety improvements:
    a) slower speed up of motors after arming
    b) pre-arm check that copter is moving less than 50cm/s if arming in Loiter or fence enabled
------------------------------------------------------------------
ArduCopter 3.1-rc4 13-Oct-2013
Improvements over 3.1-rc3
1) Performance improvements to resolve APM alt hold issues for Octacopters:
     a) SPI bus speed increased from 500khz to 8Mhz
     b) Telemetry buffer increased to 512bytes
     c) broke up medium and slow loops into individual scheduled tasks and increased priority of alt hold tasks
2) Bug fix for Pixhawk USB connection
3) GPS Glitch improvements:
       a) added GPS glitch check to arming check
       b) parameters for vehicle max acceleration (GPSGLITCH_ACCEL) and always-ok radius (GPSGLICH_RADIUS)
------------------------------------------------------------------
ArduCopter 3.1-rc3 09-Oct-2013
Improvements over 3.1-rc2
1) GPS Glitch protection - gps positions are compared with the previous gps position.  Position accepted if within 10m or copter could have reached the position with max accel of 10m/s/s.
2) Bug fix for pixhawk SPI bus contention that could lead to corrupted accelerometer values on pixhawk resolved
3) Auto Tuning (compile time option only add "#define AUTOTUNE ENABLED" to APM_Config.h and set CH7_Opt or CH8_Opt parameter to 17)
4) CPU Performance improvement when reading from MPU6k for APM
5) SUPER_SIMPLE parameter changed to a bit map to allow some flight modes to use super simpler while others use regular simple (MP release to allow easier selection will go out with AC3.1 official release)
6) Safety changes:
    a) safety button must be pushed before arming on pixhawk
    b) RGB LED (aka toshiba led) changed so that disarmed flashes, armed is either blue (if no gps lock) or green (if gps lock)
    c) sensor health bitmask sent to groundstations
------------------------------------------------------------------
ArduCopter 3.1-rc2 18-Sep-2013
Improvements over 3.1-rc1
1) bug fix for MOT_SPIN_ARMED to allow it to be higher than 127
2) PX4/pixhawk auto-detect internal/external compass so COMPASS_ORIENT should be set to ORIENTATION_NONE if using GPS+compass module
------------------------------------------------------------------
ArduCopter 3.1-rc1 9-Sep-2013
Improvements over 3.0.1
1) Support for Pixhawks board
2) Arm, Disarm, Land and Takeoff in Loiter and AltHold
3) Improved Acro
    a) ACRO_RP_P, ACRO_YAW_P parameters added to control speed of rotation
    b) ACRO_BAL_ROLL, ACRO_BAL_PITCH controls speed at which copter returns to level
    c) ACRO_TRAINER can be set to 0:disable trainer, 1:auto leveling when sticks released, 2:auto leveling and lean angle limited to ANGLE_MAX
    d) Ch7 & Ch8 switch to set ACRO_TRAINER options in-flight
4) SPORT mode - equivalent of earth frame Acro with support for simple mode
5) Sonar ground tracking improvements and bug fixes that reduce reaction to bad sonar data
6) Safety improvements
    a) motors always spin when armed (speed can be controlled with MOT_SPIN_ARMED, set to 0 to disable)
    b) vehicle's maximum lean angle can be reduced (or increased) with the ANGLE_MAX parameter
    c) arming check that GPS hdop is > 2.0 (disable by setting GPS_HDOP parameter to 900)
    d) slow take-off in AUTO, LOITER, ALTHOLD to reduce chance of motor/esc burn-out on large copters
7) Bug fixes:
    a) Optical flow sensor initialisation fix
    b) altitude control fix for Loiter_turns mission command (i.e. mission version of CIRCLE mode)
    c) DO_SET_ROI fix (do not use "ROI")
8) Distribute Loiter & Navigation calcs over 4 cycles to reduce impact on a single 100hz loop
9) RCMAP_ parameters allow remapping input channels 1 ~ 4
------------------------------------------------------------------
ArduCopter 3.0.1-rc2 / 3.0.1 11-Jul-2013
Improvements over 3.0.1-rc1
1) Rate Roll, Pitch and Yaw I fix when we hit motor limits
2) pre-arm check changes:
    a) double flash arming light when pre-arm checks fail
    b) relax mag field checks to 35% min, 165% max of expected field
3) loiter and auto changes:
      a) reduced Loiter speed to 5 m/s
      b) reduced WP_ACCEL to 1 m/s/s (was 2.5 m/s/s)
      c) rounding error fix in loiter controller
      d) bug fix to stopping point calculation for RTL and loiter during missions
4) Stability Patch fix which was freezing Rate Taw I term and allowing uncommanded Yaw
------------------------------------------------------------------
ArduCopter 3.0.1-rc1 26-Jun-2013
Improvements over 3.0.0
1) bug fix to Fence checking position after GPS lock was lost
2) bug fix to LAND so that it does not attempt to maintain horizontal position without GPS lock
------------------------------------------------------------------
ArduCopter 3.0.0 / 3.0.0-rc6 16-Jun-2013
Improvements over 3.0.0-rc5
1) bug fix to Circle mode's start position (was moving to last loiter target)
2) WP_ACCEL parameter added to allow user to adjust acceleration during missions
3) loiter acceleration set to half of LOIT_SPEED parameter value (was hard-coded)
4) reduce AltHold P to 1.0 (was 2.0)
------------------------------------------------------------------
ArduCopter 3.0.0-rc5 04-Jun-2013
Improvements over 3.0.0-rc4
1) bug fix to LAND flight mode in which it could try to fly to mission's next waypoint location
2) bug fix to Circle mode to allow counter-clockwise rotation
3) bug fix to heading change in Loiter, RTL, Missions when pilot's throttle is zero
4) bug fix for mission sticking at take-off command when pilot's throttle is zero
5) bug fix for parameters not saving when new value is same as default value
6) reduce pre-arm board min voltage check to 4.3V (was 4.5V)
7) remove throttle controller's ability to limit lean angle in loiter, rtl, auto
------------------------------------------------------------------
ArduCopter 3.0.0-rc4 02-Jun-2013
Improvements over 3.0.0-rc3
1) loiter improvements:
     i) repositioning enhanced with feed forward
     ii) use tan to convert desired accel to lean angle
2) stability patch improvements for high powered copters or those with roll-pitch rate gains set too high
3) auto mode vertical speed fix (it was not reaching the desired speeds)
4) alt hold smoothed by filtering feed forward input
5) circle mode fix to initial position and smoother initialisation
6) RTL returns to initial yaw heading before descending
7) safe features:
    i) check for gps lock when entering failsafe
    ii) pre-arm check for mag field length
    iii) pre-arm check for board voltage between 4.5v ~ 5.8V
    iv) beep twice during arming
    v) GPS failsafe enabled by default (will LAND if loses GPS in Loiter, AUTO, Guided modes)
    vi) bug fix for alt-hold mode spinning motors before pilot has raised throttle
8) bug fixes:
    i) fixed position mode so it responding to pilot input
    ii) baro cli test
    iii) moved cli motor test to test sub menu and minor change to throttle output
    iv) guided mode yaw control fix
------------------------------------------------------------------
ArduCopter 3.0.0-rc3 22-May-2013
Improvements over 3.0.0-rc2
1) bug fix for dataflash erasing unnecessarily
2) smoother transition to waypoints, loiter:
    intermediate point's speed initialised from copter's current speed
3) Ch8 auxiliary function switch (same features as Ch7)
4) safety checks:
    Warning to GCS of reason for pre-arm check failure
    ARMING_CHECK parameter added to allow disabling pre-arm checks
    Added compass health and offset check to pre-arm check
    compassmot procedure displays interference as percentage of total mag field
5) WPNAV dataflash message combined into NTUN message
6) allow TriCopters to use ESC calibration
------------------------------------------------------------------
ArduCopter 3.0.0-rc2 13-May-2013
Improvements over 3.0.0-rc1:
1) smoother transition to waypoints, loiter:
    reduced loiter max acceleration to smooth waypoints
    bug fix to uninitialised roll/pitch when entering RTL, AUTO, LOITER
2) fast waypoints - copter does not stop at waypoints unless delay is specified
3) WPNAV_LOIT_SPEED added to allow faster/slower loiter repositioning
4) removed speed limits on auto missions
5) enhance LAND mission command takes lat/lon coordinates
6) bug fix for RTL not pointing home sometimes
7) centrifugal correction disabled when copter is disarmed to stop HUD moving
8) centrifugal correction disabled when sat count less than 6 (AHRS_GPS_MINSATS)
9) compass calibration reliability improvements when run from mission planner
10) bug fix to allow compassmot to be run from mission planner terminal screen
11) add support for H-quad frame
12) add COMPASS_ORIENT parameter to support external compass in any orientation
------------------------------------------------------------------
ArduCopter 3.0.0-rc1 01-May-2013
Improvements over 2.9.1b:
1) Inertial navigation for X & Y axis (Randy/Leonard/Jonathan)
2) 3D waypoint navigation library (Leonard/Randy)
    WPNAV_SPEED, WPNAV_SPEED_UP, WPNAV_SPEED_DN control target speeds during missions and RTL
    WP_YAW_BEHAVIOR to allow disabling yaw during missions and RTL
3) PX4 support (some features still not available) (Tridge/Pat/PX4Dev Team)
4) Safety improvements:
    Tin-can shaped fence (set FENCE_ENABLED to 1 and copter will RTL if alt > 150m or horizontal distance from home > 300m) (Randy/Tridge/Leonard)
    GCS failsafe (set FS_GCS_ENABLED to 1 and if you are using a tablet to fly your copter it will RTL and return control to the radio 3 seconds after losing telemetry) (Randy)
    pre-arm checks to ensure accelerometer and radio calibration has been performed before arming (Randy)
5) motor interference compensation for compass (Jonathan/Randy)
6) Circle mode improvements:
    set CIRCLE_RADIUS to zero to do panorama shots in circle mode (copter does not move in a circle but instead slowly rotates)
    CIRCLE_RATE parameter allows controlling direction and speed of rotation in CIRCLE mode and LOITER_TURNS (can also be adjusted in flight from CH6 knob)
7) SONAR_GAIN parameter add to allow reducing the response to objects sensed by sonar (Randy)
8) support for trapezoidal quads (aka V shaped or FPV quads) (Leonard/Craig)
9) performance improvements to dataflash logging (Tridge)
10) bug-fix to analog read which could cause bad sonar reads when using voltage or current monitor (Tridge)
11) bug-fix to motors going to minimum when throttle is low while switching into Loiter, AUTO, RTL, ALT_HOLD (Jason/Randy)
12) bug-fix for auto disarm sometimes disarming shortly after arming (Jason/SirAlex)
------------------------------------------------------------------
ArduCopter 2.9.1b 30-Feb-2013
Improvements over 2.9.1:
1) reduce INS_MPU6K_FILTER to 20hz
2) reduce InertialNav Z-axis time constant to 5 (was 7)
3) increased max InertialNav accel correction to 3 m/s (was 1m/s)
4) bug fix for alt_hold being passed as int16_t to get_throttle_althold_with_slew
5) bug fix for throttle after acro flip (was being kept at min throttle if pilot switched out of ACRO mode while inverted)
6) reduce yaw_rate P default to 0.20 (was 0.25)
------------------------------------------------------------------
ArduCopter 2.9.1 & 2.9.1-rc2 01-Feb-2013
Improvements over 2.9.1-rc1:
1) small corretion to use of THR_MID to scale lower end of manual throttle between THR_MIN and 500 instead of 0 and 500
2) bug fix for longitude scaling being incorrectly calculated using Next Waypoint instead of home which could lead to scaling being 1
3) ESC calibration change to set update rate to ESCs to 50hz to allow simonk ESC to be calibrated
------------------------------------------------------------------
ArduCopter 2.9.1-rc1 31-Jan-2013
Improvements over 2.9:
1) THR_MID parameter added to allow users to adjust the manual throttle so that vehicle hovers at about mid stick
2) bug fix for autotrim - ro/*
   This program is free software: you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation, either version 3 of the License, or
   (at your option) any later version.

   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.

   You should have received a copy of the GNU General Public License
   along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
#include "Sub.h"

#define FORCE_VERSION_H_INCLUDE
#include "version.h"
#undef FORCE_VERSION_H_INCLUDE

const AP_HAL::HAL& hal = AP_HAL::get_HAL();

/*
  constructor for main Sub class
 */
Sub::Sub()
    :
          control_mode(Mode::Number::MANUAL),
          motors(MAIN_LOOP_RATE),
          auto_mode(Auto_WP),
          guided_mode(Guided_WP),
          auto_yaw_mode(AUTO_YAW_LOOK_AT_NEXT_WP),
          inertial_nav(ahrs),
          ahrs_view(ahrs, ROTATION_NONE),
          attitude_control(ahrs_view, aparm, motors),
          pos_control(ahrs_view, inertial_nav, motors, attitude_control),
          wp_nav(inertial_nav, ahrs_view, pos_control, attitude_control),
          loiter_nav(inertial_nav, ahrs_view, pos_control, attitude_control),
          circle_nav(inertial_nav, ahrs_view, pos_control),
          param_loader(var_info),
          flightmode(&mode_manual)
{
#if CONFIG_HAL_BOARD != HAL_BOARD_SITL
    failsafe.pilot_input = true;
#endif
    if (_singleton != nullptr) {
        AP_HAL::panic("Can only be one Sub");
    }
    _singleton = this;
}

Sub *Sub::_singleton = nullptr;

Sub sub;
AP_Vehicle& vehicle = sub;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 MM,  
      == >=
      5      default" <                    	       	                       <                    	       	                      0<                    	       	                      @   0      A   0      P   0      R   0      S   0              0         
     ?4      plastic <                    	       	                       <                    	       	                      0<                    	       	                      @   0      A   0      P   0      R   0      S   0              0         
     ?2      metal <                    	       	                       <                    	       	                      0<                    	       	                      @   0      A   0      P   0      R   0      S   0              0         
     ?7      color_a01" <                    	       	                       <                    	       	                      0<                    	       	                      @   0      A   0      P   0      R   0      S   0              0         
     ?8      transparent <                    	       	                       <                    	       	                      0<                    	       	                      @   0      A   0      P   0      R   0      S   0              0         
     ?2      metal <                    	       	                       <                    	       	                      0<                    	       	                      @   0      A   0      P   0      R   0      S   0              0         
     ?<      material.006"1" <                    	       	                       <                    	       	                      0<                    	       	                      @   0      A   0      P   0      R   0      S   0              0         
     ?;      darkplastic"1" <                    	       	                       <                    	       	                      0<                    	       	                      @   0      A   0      P   0      R   0      S   0              0         
     ? 
     ? @gI  "blah"  AZI  AX  \lF<9w0F<,G:w0c`=,G:iF<. c`=zlK9c`='F<'ic`=.lc`=3; F<d;;ic`=s;c`=;iF<s;F<;||
<o;F<H;4
<C9;F<,;<OF<;`r
<<4F<?
<A
<,<F<G"<F<k3<>
<)F<F<Q><]
<Y<F
<]e<_\
<d:F<A<
<ci<}
<~(F<l	9
<[F<+z
<AJF<kI
<.F<8hF<mVD
<F<08e
<C'F<
<3F<
<R7@#;vw`#;_):`
<d:#;!<Z?
<~J#;:$@
<[{#;B
<Cs
<.k~#;x
<__#;'W
<C'%#;3$
<3#;R7@
<o;?#;P;
<C9;@#;l;J
<<B#;<{
<,<Cs#;W,<k~
<)F<__
<Y<x#;F<W#;qUY<%
<]e<$#;W!e<#;ci<1E9V+1E9C1<+1E9<p1E9m1E9=<1E9A<\1E9<#1E9`?;1E9|;-&1E9,G:,1E9Qf1E9E1E91E91E9`1E91E9F<	><F<13<;8F<ut;YF<K:;F<N:F<MK,;2F</F<>9F<;XrF<llF<r;F<F<_&
<F<0F<v!<F<F<(~2F<6QF<{i9\:1E92q+<+1E9*?<"1E97<1E9,G:Z1E95V1E9U)1E9K?1E9Oy1E9`~1E91E97#;W!e<8e#;qUY<*S1E9r3;z#;<1E9h<VD#;F<w1E9<I#;W,<}#;P;#;l;d1E9M;4#;!<Z||#;vw1E9T];_\#;_):`r#;:$A#;>#;]#;'F#;3/c`=.c`=,G:c`=d;;c`=9/c`=s;g)>F<9]>F<,G:]>c`=,G:j>F<./>c`=zlK9j>c`=.DO>F<'DO>c`='g)>c`=3;/>F<d;;j>c`=s;DO>c`=;j>F<s;DO>F<;W>
<o;S>F<H;S>
<C9;>F<,;>F<;s>
<<:>F<?
<>
<,<e>F<G"<2t>F<k3<A>
<)F<m>F<Q><>
<Y<>
<]e<t>
<d:DO>F<A<DO>
<ci<K>
<~>F<l	9P>
<[U>F<+>
<>F<k>
<.=>F<8hm>F<m}>
<Kv>F<0>
<C'm>F<>
<3DO>F<DO>
<R7R>#;vw6>#;_):6>
<d:
K>#;!<Z=>
<~7>#;:$N>
<[>#;>
<>
<.h>#;->
<t>#;'>
<C'>#;3	>
<3DO>#;R7R>
<o;=>#;P;
K>
<C9;N>#;l;7>
<<>#;<>
<,<>#;W,<h>
<)F<t>
<Y<->#;F<>#;qUY<>
<]e<	>#;W!e<DO>#;ci<>1E9~>1E9C1<>1E9<>1E9m!>1E9=<DO>1E9A<w,>1E9<>1E9`?;,+>1E9|;>1E9,G:X>1E9Qf>1E9>1E9F>1E9(b>1E9`>1E9DO>1E95>F<	><E.>F<13<>F<ut;zl>F<K:;>F<N:M>F<MK,;J>F</>F<>9K>F<;{>F<l>F<r;_>F<'i>F<_&
<"3>F<8>F<v!<F&>F<3>F<(~>F<6r>F<{i9w>1E92q+<7>1E9*?<>1E97<>1E9,G:Y>1E95~W>1E9U@>1E9K>1E9>1E9`U/>1E9z>1E97>#;W!e<>#;qUY<>1E9r3;>#;<W>1E9h<}>#;F<>1E9<>#;W,<K>#;P;P>#;l;pD>1E9M;S>#;!<ZW>#;vw~>1E9T];t>#;_):s>#;:$>#;A>#;>#;'>#;3>c`=.+>c`=,G:n>c`=d;;Cu>c`=9>c`=s;c`=|:F<F<s:c`=_|:F<;c`=\;F<\:c`=ZHc`=K< c`=F<_|f9F<\f9c`=\K< F<~bF<KXfi
<X\t2
<#F<y F<o
<F<q
<rYF<FF<7:1
<b.)F<1?D
<=P
<p
<-F<\wT
<\3Q:F<c;
<r>;F<V;
<\>;F<@;
<{8;F<o82<
</<F<>(<
<7<F<5/<<
<v <F<1?G<
<Y$<F<\ :L<
<\p
<2;#;q!#;c;
<;#;(a;
<];#;@;
<@)\<#;H82<
<~q)<#;<<#;(<
</<<
<$yH<#;G<
<b2>L<#;\\t2
<J4#;fi
<(a,#;]o
<U#;@
<Hk#;:1
<D
< 1#;QiD#;$=P
<i9P#;bwT#;\:1E9P"1E91E97X;1E9$(1E9-1E9\1E9g1E9`8)1E91E9W;1E9iSz<1E9*;1E9*k;1E9Ae<1E9N*H"<1E9
J$<1E9\)F<WvDF<}F<ms~tF<CF<lIaF<c`7!F<x"F<?<F<N:F<9 o;F<[&WF<JT:F<47@;F<paK<;F<>;F<YL<F<y|<F<f!<F<Ox;*1E9t"1E91E9:1E9]11E9/}^q;1E9|g;1E9;1E9|F<1E9kA<1E9T$!<1E9Ri9P#;YQiD#;vU#;{:1E97Tc1E91E98k#; 1#;,#;\@x1E9gJ4#;2;#;;#;Xq!#;m	1E9-)\<#;r;#;~q)<#;<<#;yH<#;:c`=c`=\=c`=
|:c`=6K< c`=c`=~>|:F<>F<~>s:c`=u>:F<">;c`=>;F<>:c`=">ZHc`=>K< c`=">F<u>f9F<>f9c`=>K< F<">~bF<>fi
<A>\t2
<2>#F<>y F<9`>o
<=>F<A>
<an>YF<>F<>:1
<p>b.)F<>D
<Q>=P
</>p
<S>-F<>wT
<>3Q:F<M>c;
<1>r>;F<>;
<>>;F<4e>@;
<Y5>8;F<>82<
<e>/<F<>(<
<k>7<F<>/<<
<<J> <F<>G<
<{>$<F<> :L<
<>p
<N>2;#;n>q!#;N>c;
<o>;#;>;
<5>;#;d>@;
<l>)\<#;3>82<
<2<>~q)<#;
1><<#;P>(<
<6>/<<
<W>yH<#;>G<
<r>2>L<#;>\t2
<n>J4#;o>fi
<>,#;5>o
<d>U#;l>
<3>k#;2<>:1
<
1>D
<P> 1#;6>QiD#;W>=P
<>i9P#;r>wT#;>:1E9>"1E9>1E9>X;1E9>>(1E9>-1E9>1E9>g1E9s>8)1E9>1E9H>W;1E9I>z<1E9.>;1E9i>k;1E9><1E9d>H"<1E9>$<1E9>)F<|>DF<>F<E>~tF<>F<gC>IaF<p>7!F<:w>"F<><F<>:F<#> o;F<x|>&WF<>JT:F<>7@;F<B>K<;F<=>>;F<z><F<>|<F<>f!<F<>;*1E9I>"1E9S>1E9u>:1E9v>1E9>}^q;1E9>g;1E9&6>;1E9X>F<1E9L>A<1E9>$!<1E9<>i9P#;{>QiD#;<J>U#;Y5>:1E9>c1E9K\>1E97>k#;e> 1#;k>,#;>@x1E9>J4#;1>;#;A>2;#;2>q!#;S>m	1E9>)\<#;an>;#;=>~q)<#;p><<#;Q>yH<#;/>:c`=>c`=x>c`=">|:c`=>K< c`=>`A6     ?              ?              ?             A,  x                                 	 
   	         
  	  
 	                                                                        ! "  ! "    " # $ ! # $ " ! $ % & # % # & $ # ' % ( ' & % ' & ) ( * ) ' ( ) ' + * , + + ) * + + , - + - , . - / 0 1 / 2 / 3 2 3 / 1 3 4 2 5 4 5 2 3 5 6 4 7 6 7 4 5 7 8 9 6 8 6 7 8 6 : ; 9 : ; : < ; : 9 8 : < = ; < . = > . < > = < . ? = . 1 0 @ 1 @ A B @ 0 A @ 0 B C D B A C B A D E F D C E D C F G H F E G F E I J K I J I H J H G J H I K L I L M N L L K M L  L N  / O 0 / J P K J J Q P J 4 R 2 4 G Q J G K P S K M S T M M T N M K S M K U G E U U Q G U V E C V V U E V W C A W W V C W X A 0 X X W A X R Y 2 R 9 Z [ 9 6 \ 4 6 = ] ^ = ; ^ Z ; ? _ ] ? ? ] = ? = ^ ; = 2 Y / 2 ; Z 9 ; 6 [ \ 6 9 [ 6 9 4 \ R 4 O X 0 O Y O / Y `  a `  ` 	  	 `  	  `             b  b  c b c  d c d   d e f g e f e h f f h i f i h j i i j k i k j l k k l m k m l n m m n o m o n a o o a p o p a  p p    p p    p p  - p -   - -  q - - q + - + q r + + r ) + ) r d ) ) d  ) )   ) )  ' ) '   ' '  & ' &   & &  $ & $   $ $  " $ "   " "    " s W X s W s V W V s U V U s Q U Q s P Q P s S P S s T S T s t T t s u t ^ v Z ^ v ^ ] v v ] _ v v _ w v v w x v v x y v v y z v v z { v v { | v v | } v N T t N ~ u  ~               }        v  z  { z  z     |   z y   z    y x  y   y  x w  x   x ? w _ ? ?  w ?  | {   } |    v   v }                   s    s        u s  N t ~ N ~ t u ~ , ? . , ( %  ( *   *  * (      # !  #                              ~    ~    ~    N ~                          !   ! !   ! % #  % #   # (   (  %   *  , * ,  ? , ,   , ` L  ` a H I a @ B h @ l D F l 5 3 f 5 g 1 e g m 8 k m 7 5 i 7 o : m o m : 8 m o p < o o < : o p - > p p > < p 8 7 k 8 - . > - 1 @ e 1 7 i k 7 i 5 f i 3 1 g 3 f 3 g f e @ h e h B j h j D l j B D j B n H a n n F H n l F n l a I ` a  L   ` I L `  q     c  r  d r   b    b       c d   b c    r    d   q   q  r q       
   
    
                                                                                                