295)
        value = transport.cast(-8589934592, dtype)
        self.assertEqual(value, -4294967296)
        value = transport.cast(-1, dtype)
        self.assertEqual(value, -1)

    def test_signed_saturated_64bit(self):
        dtype = parser.PrimitiveType(
            parser.PrimitiveType.KIND_SIGNED_INT,
            64,
            parser.PrimitiveType.CAST_MODE_SATURATED)
        value = transport.cast(0, dtype)
        self.assertEqual(value, 0)
        value = transport.cast(18446744073709551615, dtype)
        self.assertEqual(value, 9223372036854775808)
        value = transport.cast(-1, dtype)
        self.assertEqual(value, -1)
        value = transport.cast(-18446744073709551617, dtype)
        self.assertEqual(value, -9223372036854775809)
        value = transport.cast(-9223372036854775808, dtype)
        self.assertEqual(value, -9223372036854775808)

    def test_float16_truncated(self):
        pass

    def test_float16_saturated(self):
        pass

    def test_float32_truncated(self):
        pass

    def test_float32_saturated(self):
        pass


class TestArrayBasic(unittest.TestCase):
    def setUp(self):
        custom_type = parser.CompoundType(
            "CustomType",
            parser.CompoundType.KIND_MESSAGE,
            "source.uavcan",
            0,
            (0,0),
            ""
        )
        custom_type.fields = [
            parser.Field(
                parser.PrimitiveType(
                    parser.PrimitiveType.KIND_SIGNED_INT,
                    8,
                    parser.PrimitiveType.CAST_MODE_TRUNCATED
                ),
                "a"
            ),
            parser.Field(
                parser.PrimitiveType(
                    parser.PrimitiveType.KIND_FLOAT,
                    16,
                    parser.PrimitiveType.CAST_MODE_SATURATED
                ),
                "b"
            ),
            parser.Field(
                parser.ArrayType(
                    parser.PrimitiveType(
                        parser.PrimitiveType.KIND_UNSIGNED_INT,
                        1,
                        parser.PrimitiveType.CAST_MODE_SATURATED
                    ),
                    parser.ArrayType.MODE_DYNAMIC,
                    5
                ),
                "c"
            )
        ]

        def custom_type_factory(*args, **kwargs):
            return transport.CompoundValue(custom_type, *args, **kwargs)
        custom_type._instantiate = custom_type_factory

        self.a1_type = parser.ArrayType(
            parser.PrimitiveType(
                parser.PrimitiveType.KIND_SIGNED_INT,
                8,
                parser.PrimitiveType.CAST_MODE_TRUNCATED
            ),
            parser.ArrayType.MODE_STATIC,
            4
        )
        self.a2_type = parser.ArrayType(
            parser.PrimitiveType(
                parser.PrimitiveType.KIND_FLOAT,
                16,
                parser.PrimitiveType.CAST_MODE_SATURATED
            ),
            parser.ArrayType.MODE_STATIC,
            2
        )
        self.a3_type = parser.ArrayType(
            custom_type,
            parser.ArrayType.MODE_STATIC,
            2
        )

    def test_size(self):
        self.assertEqual(self.a3_type.value_type.fields[2].type.value_type.bitlen, 1)
        self.assertEqual(self.a1_type.get_max_bitlen(), 8 * 4)
        self.assertEqual(self.a2_type.get_max_bitlen(), 16 * 2)
        self.assertEqual(self.a3_type.get_max_bitlen(), (8 + 16 + 5 + 3) * 2)

    def test_representation(self):
        a1 = transport.ArrayValue(self.a1_type)
        a2 = transport.ArrayValue(self.a2_type)
        a3 = transport.ArrayValue(self.a3_type)
        for i in range(4):
            a1[i] = i
        for i in range(2):
            a2[i] = i
        for i in range(2):
            a3[i].a = i
            a3[i].b = i
            for i2 in range(5):
                a3[i].c.append(i2 & 1)
            self.assertEqual(len(a3[i].c), 5)

        self.assertEqual(
            transport.format_bits(a1._pack(False)),
            "00000000 00000001 00000010 00000011"
        )
        self.assertEqual(
            transport.format_bits(a2._pack(False)),
            "00000000 00000000 00000000 00111100"
        )
        self.assertEqual(
            transport.format_bits(a3._pack(True)),
            "00000000 00000000 00000000 10101010 " +
            "00000001 00000000 00111100 10101010"
        )


class TestVoid(unittest.TestCase):
    def setUp(self):
        self.custom_type = parser.CompoundType(
            "CustomType",
            parser.CompoundType.KIND_MESSAGE,
            "source.uavcan",
            0,
            (0,0),
            ""
        )
        self.custom_type.fields = [
            parser.Field(
                parser.PrimitiveType(
                    parser.PrimitiveType.KIND_FLOAT,
                    16,
                    parser.PrimitiveType.CAST_MODE_SATURATED
                ),
                "a"
            ),
            parser.Field(parser.VoidType(3), None),
            parser.Field(
                parser.PrimitiveType(
                    parser.PrimitiveType.KIND_UNSIGNED_INT,
                    1,
                    parser.PrimitiveType.CAST_MODE_SATURATED
                ),
                "b"
            )
        ]

        def custom_type_factory(*args, **kwargs):
            return transport.CompoundValue(self.custom_type, *args,
                                           **kwargs)
        self.custom_type._instantiate = custom_type_factory

    def test_size(self):
        self.assertEqual(self.custom_type.fields[1].type.bitlen, 3)
        self.assertEqual(self.custom_type.get_max_bitlen(), 20)

    def test_representation(self):
        c1 = self.custom_type()
        self.assertEqual(
            transport.format_bits(c1._pack(False)),
            "00000000 00000000 0000"
        )

        c1.a = 1
        c1.b = 1
        self.assertEqual(
            transport.format_bits(c1._pack(False)),
            "00000000 00111100 0001"
        )


class TestMessageUnion(unittest.TestCase):
    def setUp(self):
        self.custom_type = parser.CompoundType(
            "CustomType",
            parser.CompoundType.KIND_MESSAGE,
            "source.uavcan",
            0,
            (0,0),
            ""
        )
        self.custom_type.union = True
        self.custom_type.fields = [
            parser.Field(
                parser.PrimitiveType(
                    parser.PrimitiveType.KIND_FLOAT,
                    16,
                    parser.PrimitiveType.CAST_MODE_SATURATED
                ),
                "a"
            ),
            parser.Field(
                parser.ArrayType(
                    parser.PrimitiveType(
                        parser.PrimitiveType.KIND_UNSIGNED_INT,
                        8,
                        parser.PrimitiveType.CAST_MODE_SATURATED
                    ),
                    parser.ArrayType.MODE_STATIC,
                    2
                ),
                "b"
            )
        ]

        def custom_type_factory(*args, **kwargs):
            return transport.CompoundValue(self.custom_type, *args,
                                           **kwargs)
        self.custom_type._instantiate = custom_type_factory

    def test_size(self):
        self.assertEqual(self.custom_type.fields[0].type.bitlen, 16)
        self.assertEqual(self.custom_type.fields[1].type.get_max_bitlen(), 16)
        self.assertEqual(self.custom_type.get_max_bitlen(), 17)

    def test_representation(self):
        c1 = self.custom_type()
        self.assertEqual(
            transport.format_bits(c1._pack(True)),
            "00000000 00000000 0"
        )

        c2 = self.custom_type()
        c2.a = 1
        self.assertEqual(transport.get_active_union_field(c2), "a")
        self.assertEqual(
            transport.format_bits(c2._pack(True)),
            "00000000 00011110 0"
        )

        c3 = self.custom_type()
        c3.b[0] = 1
        c3.b[1] = 3
        self.assertEqual(transport.get_active_union_field(c3), "b")
        self.assertEqual(
            transport.format_bits(c3._pack(False)),
            "10000000 10000001 1"
        )


class TestAssignment(unittest.TestCase):
    def setUp(self):
        import dronecan
        self.a = uavcan.protocol.GetNodeInfo.Response()

    def test_compound_assignment(self):
        import dronecan

        orig_status = self.a.status
        print(orig_status)
        self.assertEqual(orig_status.mode, 0)
        self.assertEqual(orig_status.uptime_sec, 0)

        self.a.status = uavcan.protocol.NodeStatus(mode=3, uptime_sec=12345)

        new_status = self.a.status
        print(new_status)
        self.assertEqual(new_status.mode, 3)
        self.assertEqual(new_status.uptime_sec, 12345)

    def test_array_assignment(self):
        print(repr(self.a.name))
        print(str(self.a.name))
        self.assertEqual(self.a.name, [])
        self.assertEqual(self.a.name, '')
        self.a.name = '123'
        self.assertEqual(self.a.name, [49, 50, 51])
        self.assertEqual(self.a.name, '123')
        self.a.name = [52, 53, 54]
        self.assertEqual(self.a.name, [52, 53, 54])
        self.assertEqual(self.a.name, '456')
        print(repr(self.a.name))
        print(str(self.a.name))


class TestFloats(unittest.TestCase):
    def test_basic(self):
        def make_float(bitlen):
            return parser.PrimitiveType(parser.PrimitiveType.KIND_FLOAT, bitlen,
                                        parser.PrimitiveType.CAST_MODE_TRUNCATED)

        # 64 bit
        a = transport.PrimitiveValue(make_float(64))
        print(a.value)
        self.assertEqual(a.value, 0)
        a.value = 123.456
        print(a.value)
        self.assertEqual(a.value, 123.456)

        # 16 bit
        a = transport.PrimitiveValue(make_float(16))
        print(a.value)
        self.assertEqual(a.value, 0)
        # nan
        a.value = float('nan')
        print(a.value)
        self.assertEqual(str(a.value), 'nan')
        # positive infinity
        a.value = float('inf')
        print(a.value)
        self.assertEqual(str(a.value), 'inf')
        # negative infinity
        a.value = float('-inf')
        print(a.value)
        self.assertEqual(str(a.value), '-inf')


if __name__ == '__main__':
    unittest.main()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      #!/usr/bin/env python3
'''
bridge between two CAN interfaces
this can be used to bridge a hardware device with SLCAN to a SITL vcan0 environment
'''

import dronecan
import time
import sys
import threading

# get command line arguments
from argparse import ArgumentParser
parser = ArgumentParser(description='CAN bridge - connect two CAN interfaces')
parser.add_argument("--bitrate", default=1000000, type=int, help="CAN bit rate")
parser.add_argument("ports", default=None, type=str, nargs='+', help="interfaces")
parser.add_argument("--filter-nodeid", nargs='+', type=int, help="filter by node ID"
                    " (only forward messages from this node ID)")
args = parser.parse_args()

if len(args.ports) < 2:
    print("Must specify at least 2 ports to connect")
    sys.exit(1)

drivers = []

for p in args.ports:
    try:
        drivers.append(dronecan.driver.make_driver(p, bitrate=args.bitrate))
    except Exception as ex:
        print("Unable to connect to %s - %s" % (p, ex))
        sys.exit(1)
    print("Connected to %s" % p)

class BridgeThread(object):
    def __init__(self, d, drivers, name):
        self.d = d
        self.drivers = drivers
        self.count = 0
        self.filter_nodeid = args.filter_nodeid
        if self.filter_nodeid:
            print("Filtering Node IDs: %s" % self.filter_nodeid)
        self.thd = threading.Thread(target=self.loop, name=name)
        self.thd.start()

    def loop(self):
        while True:
            try:
                frame = self.d.receive(timeout=0.1)
            except dronecan.driver.common.TransferError:
                continue
            if not frame:
                continue
            if self.filter_nodeid is not None:
                source_node_id = frame.id & 0x7F
                if source_node_id not in self.filter_nodeid:
                    continue
            self.count += 1
            for d in self.drivers:
                if d == self.d:
                    continue
                try:
                    d.send_frame(frame)
                except dronecan.driver.common.TxQueueFullError:
                    pass

threads = []
for i in range(len(drivers)):
    d = drivers[i]
    threads.append(BridgeThread(d, drivers, "d%u" % i))

last_print = time.time()

last_c = [0]*len(drivers)

while True:
    time.sleep(1)
    now = time.time()
    dt = now - last_print
    c = [ t.count for t in threads ]
    rates = []
    for i in range(len(drivers)):
        dcount = c[i] - last_c[i]
        rates.append("%.3f" % (dcount/dt))
    print("%s pkts/sec" % '/'.join(rates))
    last_print = now
    last_c = c[:]
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                #!/usr/bin/env python
'''
decode dronecan message id
'''

import sys
import optparse

parser = optparse.OptionParser("decode_devid.py")
opts, args = parser.parse_args()
if len(args) == 0:
    print("Please supply a Message ID")
    sys.exit(1)

def num(s):
    try:
        return int(s)
    except ValueError:
        return int(s, 16)

msgid=num(args[0])

#define SOURCE_ID_FROM_ID(x)                        ((uint8_t) (((x) >> 0U)  & 0x7FU))
#define SERVICE_NOT_MSG_FROM_ID(x)                  ((bool)    (((x) >> 7U)  & 0x1U))
#define REQUEST_NOT_RESPONSE_FROM_ID(x)             ((bool)    (((x) >> 15U) & 0x1U))
#define DEST_ID_FROM_ID(x)                          ((uint8_t) (((x) >> 8U)  & 0x7FU))
#define PRIORITY_FROM_ID(x)                         ((uint8_t) (((x) >> 24U) & 0x1FU))
#define MSG_TYPE_FROM_ID(x)                         ((uint16_t)(((x) >> 8U)  & 0xFFFFU))
#define SRV_TYPE_FROM_ID(x)                         ((uint8_t) (((x) >> 16U) & 0xFFU))

def SOURCE_ID_FROM_ID(x):
    return (x >> 0) & 0x7F

def SERVICE_NOT_MSG_FROM_ID(x):
    return (x >> 7) & 0x1

def REQUEST_NOT_RESPONSE_FROM_ID(x):
    return (x >> 15) & 0x1

def DEST_ID_FROM_ID(x):
    return (x >> 8) & 0x7F

def PRIORITY_FROM_ID(x):
    return (x >> 24) & 0x1F

def MSG_TYPE_FROM_ID(x):
    return (x >> 8) & 0xFFFF

def SRV_TYPE_FROM_ID(x):
    return (x >> 16) & 0xFF

# pretty print all the details
print("source id: %d" % SOURCE_ID_FROM_ID(msgid))
print("priority: %d" % PRIORITY_FROM_ID(msgid))
if SERVICE_NOT_MSG_FROM_ID(msgid):
    print("dest id: %d" % DEST_ID_FROM_ID(msgid))
    if REQUEST_NOT_RESPONSE_FROM_ID(msgid):
        print("srv(req) type: %d" % SRV_TYPE_FROM_ID(msgid))
    else:
        print("srv(rsp) type: %d" % SRV_TYPE_FROM_ID(msgid))
else:
    print("msg type: %d" % MSG_TYPE_FROM_ID(msgid))
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               #!/usr/bin/env python3
'''
map between a TCP port and a DroneCAN serial port tunnel
'''

import time
import sys
import dronecan
import socket

if __name__ == "__main__":
    import progressbar
    from argparse import ArgumentParser
    parser = ArgumentParser(description=__doc__)
    parser.add_argument("--baud", default=0, help="remote baudrate", type=int)
    parser.add_argument("--listen-port", default=2001, help="TCP listen port", type=int)
    parser.add_argument("--listen-address", default='0.0.0.0', help="TCP listen port")
    parser.add_argument("--lock", action='store_true', default=False, help="lock remote serial port")
    parser.add_argument("--can-target-node", type=int, default=None, help='target CAN node')
    parser.add_argument("--can-local-node", type=int, default=100, help='local CAN node')
    parser.add_argument("--can-serial-dev", type=int, default=-1, help='target serial device')
    parser.add_argument("--logfile", default=None, help='log data to file')
    parser.add_argument("uri", default=None, help="DroneCAN URI")

    args = parser.parse_args()

    port = dronecan.DroneCANSerial(args.uri, args.can_target_node, args.can_serial_dev,
                                   lock_port=args.lock, baudrate=args.baud, node_id=args.can_local_node)

    listen_sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    listen_sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
    listen_sock.bind((args.listen_address, args.listen_port))
    listen_sock.listen(1)

    print("Waiting for connection on %s:%u" % (args.listen_address, args.listen_port))
    sock, addr = listen_sock.accept()
    sock.setblocking(0)

    last_print = time.time()
    sock_recv_count = 0
    dronecan_recv_count = 0
    logfile = None if args.logfile is None else open(args.logfile,'wb')

    while True:
        buf = None
        try:
            buf = sock.recv(1024)
        except socket.error:
            pass
        if buf:
            sock_recv_count += len(buf)
            port.write(buf)
            if logfile is not None:
                logfile.write(buf)
        buf = port.read(1024)
        if buf:
            dronecan_recv_count += len(buf)
            if logfile is not None:
                logfile.write(buf)
            sock.send(buf)

        now = time.time()
        dt = now - last_print
        if dt >= 1.0:
            print("%.2f/%.2f bytes/sec" % (sock_recv_count/dt, dronecan_recv_count/dt))
            sock_recv_count = 0
            dronecan_recv_count = 0
            last_print = now
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        DIRC      =f∆uó    f∆uó        Ça  Å§          aõb2% Ø∏&∫íOÙ\K3< $.github/workflows/python-package.yml      f∆uó    f∆uó        Çb  Å§          Œ·WÎï±ßq@e}ﬁ‰Ïl›	ˆÌ} $.github/workflows/python-publish.yml      f∆uó    f∆uó        Çc  Å§          åO˛˜hLπ
wV¬⁄w#Ux 
.gitignore        f∆uó    f∆uó        Çd  Å§          /ø¯ÏÌO„‰H]%†Ö&I$p0πM/ .travis.yml       f∆uó    f∆uó        Çe  Å§          >√”˙;_64√ò`˙yh†4¸;”> LICENSE   f∆uó    f∆uó        Çf  Å§           $◊íg2‚F£“KûYÂ ‡ICâ MANIFEST.in       f∆uó    f∆uó        Çg  Å§          >]:Èèn˚ÔE7rΩdº<°g 9 	README.md f∆uó    f∆uó        Çh  Å§           ©$|≤‚nTU∂.Éq>≈◊ appveyor.yml      f∆uó    f∆uó        Çj  Å§           SµÌPgö,fπkQ pß.ŒÈ± dronecan/__init__.py      f∆uó    f∆uó        Çl  Å§          – 0˙}Sg9àTkùﬂè$	¬ÎΩ dronecan/app/__init__.py  f∆uó    f∆uó        Çm  Å§          %˚ÓA‹4Áz·‰\Ë]>V#¡ dronecan/app/dynamic_node_id.py   f∆uó    f∆uó        Çn  Å§          )ñˆøwÒG*0Ω†õ\Üã¯m¬¶ò dronecan/app/file_server.py       f∆uó    f∆uó        Ço  Å§          ïænıø}•ˇ∆M£ú°¿ûÊ	2c #dronecan/app/log_message_monitor.py       f∆uó    f∆uó        Çp  Å§          	eÌ†co˛yy;DBm¨<ló7 !dronecan/app/message_collector.py f∆uó    f∆uó        Çq  Å§           ÄKŸrjı'P∞9ÛØÏ’ß@j+Ÿ+l dronecan/app/node_monitor.py      f∆uó    f∆uó        †6  Å§          
2Y∂iœ¡Ç1§£∑∞C€DÃÃ;.U dronecan/driver/__init__.py       f∆uó    f∆uó        †7  Å§          Åö˘Ôµ{8åèßZ8^‡!√ dronecan/driver/common.py f∆uó    f∆uó        †8  Å§          ;ç”wΩg±'M£A5∏î»ÎÙÔñ dronecan/driver/file.py   f∆uó    f∆uó        †9  Å§          %•&1ÙUùiÙ4>Ì(4è·R<Yî dronecan/driver/mavcan.py f∆uó    f∆uó        †:  Å§          íE_2©ﬂ˙πq•Ûë*»mo¬8 dronecan/driver/mcast.py  f∆uó    f∆uó        †;  Å§          ê§W◊;$?å¯˙9«7ı‚ DôJå dronecan/driver/python_can.py     f∆uó    f∆uó        †<  Å§          ]…#S©ôi&«Fò}^-†˘) dronecan/driver/slcan.py  f∆uó    f∆uó        †=  Å§          ,íP0Õ2QòÎ`>]˛ù•8Ï¥Îh¸ dronecan/driver/socketcan.py      f∆uó    f∆uó        †>  Å§          'Ñ¢wSŸÔBñ3ü˙^”w[a]¥ &dronecan/driver/timestamp_estimator.py    f∆uó    f∆uó        ºT  Å§          Ô‹kâ—¿Á8Ô≥·^‚ÿÇÔoßA dronecan/dsdl/__init__.py f∆uó    f∆uó        ºU  Å§          
 w¢5+∂“tÌÆïK^…iË dronecan/dsdl/common.py   f∆uó    f∆uó        ºV  Å§          äÏPñ`ÙU”å^ì',o‘AKè%  dronecan/dsdl/parser.py   f∆uó    f∆uó        ºW  Å§          ¬SDP∫ó—7ÏDÀû9/Ω5º+ï_ dronecan/dsdl/signature.py        f∆uó    f∆uó        ºX  Å§          ËãÎØ6!
]#ôlÅº.D3- dronecan/dsdl/type_limits.py      f∆uó    f∆uó        Çr  Å§          :	?ssFˆ™Ä∫T2iﬂ<Ûæ <À dronecan/introspect.py    f∆uó    f∆uó        Çs  Å§          YI>PMﬂö)ŸZi}I‹æá—1ú¿ dronecan/node.py  f∆uó    f∆uó        Çt  Å§          Ö∆VΩ5Âî$ãÓv÷`a◊£ﬁ(s:v9 dronecan/transport.py     f∆uó    f∆uó        Çu  Å§          €ÀOFÉáê‰4ï¨• \h dronecan/utility.py       f∆uó    f∆uó        Çv  Å§          2êü1ßŒËÅj∂QR√YM÷Á dronecan/version.py       f∆uó    f∆uó        ºZ  Å§          CËëHõR©=W	:≈∑´Íã≠k∞ examples/canfd_msg.py     f∆uó    f∆uó        º[  Å§          ôËú}c/qôÒ¥XûÂ*nW¿ examples/canlog2gps.py    f∆uó    f∆uó        º\  ÅÌ          ÊÃ\¸ˇEıGöÑÇá¯üôw)Ï\2 examples/dump_all.py      f∆uó    f∆uó        º]  ÅÌ          	„v7ˆ¬≠4},:˝ ê…µ !¥ examples/esc_control.py   f∆uó    f∆uó        º^  ÅÌ          –ÄºboÆP†∫yeÂ!…ˇ≥?… examples/esc_enumeration.py       f∆uó    f∆uó        º_  ÅÌ          ≠Aï}„ÕOÊ7Úgã^öûTRÇõ« examples/firmware_update.py       f∆uó    f∆uó        º`  ÅÌ          mPﬁÒÄπ¿ö]‘»	ƒôäÜÙ examples/fix2_gap.py      f∆uó    f∆uó        ºa  ÅÌ          =◊®d≠.%∂ÊçES≥±πS$cö examples/get_nodeinfo.py  f∆uó    f∆uó        ºb  ÅÌ          !Í¶{ùΩÛïP†êŸägÚ)n examples/hobbywing_esc.py f∆uó    f∆uó        ºc  ÅÌ          œïo§ÀQÈµï≈„ŒCù+/Ã1 examples/rtcm_dump.py     f∆uó    f∆uó        ºd  ÅÌ          	5;-b	´∏?"#ùW¡yfXæP examples/sim_battery.py   f∆uó    f∆uó        Çw  ÅÌ           +Æ Na5ïÌO‘1•dhê.Cg remove_build_outputs.sh   f∆uó    f∆uó        Çx  ÅÌ          „È¨◊\’Ò!w)ËR£ÖR[ˆ7§ setup.py  f∆uó    f∆uó        ºg  Å§          )E∫—≥»íÛ	ákŸÁ”“ò test/dsdl/__init__.py     f∆uó    f∆uó        ºk  Å§           =·∏„è…ÛE“—qq€FÍœ∏«ß 3test/dsdl/fake_dsdl/ns0_base/ns0/20000.Type0.uavcan       f∆uó    f∆uó        ºn  Å§           g/|‡ipmö=ºög&löX`"®◊ 9test/dsdl/fake_dsdl/ns0_duplicated/ns0/20000.Type0.uavcan f∆uó    f∆uó        ºq  Å§           S1–»ÌcÅ£"Ø9å¸≈ß˘Ea”ßÌ 8test/dsdl/fake_dsdl/ns0_redefined/ns0/20000.Type0.uavcan  f∆uó    f∆uó        ºr  Å§          5P˙»úeEãùLWª¥)∆qyØéÿ test/dsdl/test_common.py  f∆uó    f∆uó        ºs  Å§          U¸∑I›√fµx™!«üñ&(HÿÏ test/dsdl/test_load_dsdl.py       f∆uó    f∆uó        ºt  Å§          ]eî,ª◊r—H¨m7êbsöR test/dsdl/test_parser.py  f∆uó    f∆uó        ºu  Å§          ÎõI}1ÂõûOÈØÉ¨9S6†„%À test/dsdl/test_signature.py       f∆uó    f∆uó        ºv  Å§          Mh¨i¨€ñ°X.:⁄0˘; n test/test_driver.py       f∆uó    f∆uó        ºw  Å§          	œ-_ADyÃ–,o=ˇÉ`ÔIÙ¨$ test/test_node.py f∆uó    f∆uó        ºx  Å§          X™djh$Q<œÜd”}Í*«]ô∑1Ìø test/test_transport.py    f∆uó    f∆uó        ºz  ÅÌ          
@U∆÷ìSüÅç_jÿPÀ 80∞Z¯ tools/dronecan_bridge.py  f∆uó    f∆uó        º{  Å§          +@]É 4÷∑ï•^|œBÍo•»ò\ tools/dronecan_msgid_decode.py    f∆uó    f∆uó        º|  ÅÌ          	¯0«¯ãÔEÁ
ÁIX?$(â≤à2A tools/dronecan_tcplink.py TREE  5 61 5
M‚>-dBªLú¿…s¨[˛q¨Etest 11 1
$¶™òoø®dœ—3T≈≈;+ddsdl 8 1
ù¨ô‰ùÅHÉ∑ù)ˇi¢•£#Lfake_dsdl 3 3
Ò•—e÷D©U≈ó^≈Ø—˚€]{“ƒns0_base 1 1
ÎœÍﬁ?í’”Ÿ˝ƒq›I«ns0 1 0
ﬂ◊îâ¨Aí„ï.)*à›œ#Pns0_redefined 1 1
∞ï≈¥Åª+π$Ó†€∑íët?ÉçRns0 1 0
ÔªÁˇ2F9∞¶Vô∂»—E¢qTns0_duplicated 1 1
ØótQ2D≠±p—ç0úñßFsåns0 1 0
hà?]∆Ë\_≤ıNÉßCNóíqtools 3 0
2Ò Èû¯¬⁄—£{À*´aÚ-?.github 2 1
»è7mWs˚Ã⁄∫òNê<‘˛~˜–workflows 2 0
N‡Œ¥Ì„™"j•∆ˇ≤ç«¿ªêdronecan 26 3
òv§÷5üõ»>, ÖöR7“Wr/app 6 0
Gˇ7j§Ù\:ØüSF!ïà˚dsdl 5 0
yâDäòû3mä(!ñR|îxËhdriver 9 0
œä.ú´Ü•·c[[“’†â$examples 11 0
˝Jlpˇæ9-úhEì ±iq¡wªıg¡»`wwP\|\áñÅÜö›@                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           1f494e9a56ac9930f1e11c2f453789414b10d54e
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       # This file provide reference settings for the Pymavlink code conventions
# There are plug-ins available for nearly every text editor to automatically
# respect the conventions contained within this file.
#
# Please see editorconfig.org for complete information.
#
# If you find errors in this file, please send a pull-request with a fix.
#
root = true

[*]
indent_style = space
indent_size = 4
end_of_line = lf
charset = utf-8
trim_trailing_whitespace = false # These are the correct rules for Pymavlink coding standards, but fixing up old files causes git spam
insert_final_newline = false
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                [flake8]
max-line-length = 127
max-complexity = 10
select = E9,F63,F7,F82
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      # Set the default behavior, in case people don't have core.autocrlf set.
text eol=lf

# Declare files that will always have LF line endings on checkout.
*.py text eol=lf
*.sh text eol=lf
*.bash text eol=lf

*.bin -diff
*.elf -diff
*.hex -diff

*.bin binary linguist-generated
*.elf binary linguist-generated
*.hex binary linguist-generated
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            \documentclass[a4paper,12pt]{article}
\usepackage[toc,nonumberlist,numberedsection=autolabel]{glossaries}

\title{A Test Document Using Glossaries For Waf Construction}
\author{Joe Steeve}

\makeglossaries
\begin{document}

\maketitle
\tableofcontents

% next line is broken after using a newer texlive version
%\glossarystyle{altlist}

%% The glossary entries
\newglossaryentry{african}
{
  name={african},
  description={The West African Swallow, Hirundo domicella}
}

\newglossaryentry{european}
{
  name={european},
  description={The Barn or European Swallow, Hirundo rustica}
}

\section{The story}

\begin{description}
\item[Bridgekeeper:] What... is the air-speed velocity of an unladen
  swallow?
\item[King Arthur:] What do you mean? An \gls{african} or \gls{european} swallow?
\end{description}

%% This is the Glossary section
\glsaddall
\printglossaries

\end{document}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             \documentclass[a4paper,12pt]{article}

\usepackage{mathptmx}
\usepackage{natbib}
\usepackage{xspace}
\usepackage{makeidx}

\newcommand \Waf{\textbf{\emph{Waf}}\xspace}
\newcommand \BibTeX{Bib\TeX\xspace}
\newcommand \acronym[1]{{\small #1}}

\newcommand \bringin[1]{\clearpage\input{#1.ltx}}

\title{A Test Document For Waf Construction}
\author{Russel Winder}

\makeindex

\begin{document}

\bibliographystyle{apalike}

\maketitle

\vfil

\tableofcontents

\bringin{introduction}
\bringin{indexing}
\bringin{bibtex}
\bringin{crossreferencing}
\bringin{conclusions}
%\bringin{conclusions2} % make it fail on purpose to test the batch mode

\clearpage

\bibliography{bib}

\printindex

\end{document}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    \section{Testing Indexing}

We have already had an index entry but here is another so there are two\index{indexing}.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           \section{Introduction}

This document is a null content document that uses as many features of the
\LaTeX\index{LaTeX@\LaTeX} document processing system as possible.  It is not a test of \LaTeX\
typesetting so the content is not sophisticated, it is for testing the build capabilities of
\Waf.  So we use use index features to drive the use of makeindex and \BibTeX features so that
the \BibTeX system has to run.

This document is a grauitously multi-page document so that
cross-referencing\label{pg:first-page} can be tested, this will happen in Section~\ref{sec:xref}
on page~\pageref{sec:xref}.  There ought to be a reference to Section~4 on page~5.

\bringin{introsub}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              \subsection{Introduction subsection}

This is a simple subsection to show why the scan of source documents should be
recursive. In the current version of \texttt{waf} any changes made to this
file will not cause a regeneration of the full document, and it ideally
should.

This is a modification
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        #! /usr/bin/env python
# encoding: utf-8
# Thomas Nagy, 2006-2010 (ita)

def build(bld):

	# we can modify the way tex files are scanned
	#import re, tex
	#tex.tex_regexp = re.compile('^\\\\bringin{(?P<file>.*)}', re.M)

	# now create your tex object for compiling the files
	obj = bld(
		features = 'tex',
		type = 'latex', # default is pdflatex
		source = 'document.ltx' # mandatory, the source
	)

	# optional parameters
	obj.outs   = 'ps' # we want a postscript output too - 'ps pdf' works too
	obj.prompt = 1 # put 0 for the nonstopmode (conceals the debug output)
	obj.deps   = 'wscript crossreferencing.ltx' # use this to give dependencies directly

	# or more simply, for a pdf..
	bld(features='tex', source='document-glossaries.ltx')

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        #! /usr/bin/env python
# encoding: utf-8
# Thomas Nagy, 2005-2015 (ita)

VERSION='1.0.0'
APPNAME='tex_test'

top = '.'
out = 'build'

def configure(conf):
	conf.load('tex')
	if not conf.env.PDFLATEX:
		conf.fatal('could not find the program pdflatex')
	if not conf.env.MAKEGLOSSARIES:
		conf.fatal('could not find the program makeglossaries which is absolutely required for this example')


	# and example of a complex configuration test
	def build_latex_test(bld):
		def write_tex(tsk):
			tsk.outputs[0].write(r'''\documentclass[a4paper,12pt]{article}  \usepackage{ucs}  \begin{document} test \end{document} ''')
		bld(rule=write_tex, target='main.tex')
		bld(features='tex', type='pdflatex', source='main.tex', prompt=0)
	conf.test(build_fun=build_latex_test, msg='Checking for UCS', okmsg='ok', errmsg='ucs.sty is missing install latex-extras')

def build(bld):
	bld.recurse('src')

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         #include <stdlib.h>
#include "Accumulator.h"

Accumulator::Accumulator():m_total(0)
{
}

void Accumulator::accumulate(const char * data)
{
  m_total += strtol(data, 0, 0);
}

int Accumulator::total() const
{
  return m_total;
}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            #ifndef Accumulator_h_seen
#define Accumulator_h_seen

/**
 * A not-very-useful class that accumulates int values from input data.
 */
class Accumulator
{
  public:
    Accumulator();

    /**
     * Given some input data, read to end of line and convert to an int
     */
    void accumulate(const char * data);

    int total() const;

  private:
    int m_total;

};
#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
#include "HelloWorld.h"
HelloWorld::HelloWorld():m_message("Hello World")
{
}

HelloWorld::HelloWorld(const std::string & msg):m_message(msg)
{}

std::string HelloWorld::message() const
{
  return m_message;
}

void HelloWorld::setMessage(const std::string & msg)
{
  m_message = msg;
}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                #ifndef HelloWorld_h_seen
#define HelloWorld_h_seen
#include <string>
class HelloWorld
{
  public:
    HelloWorld();
    HelloWorld(const std::string & msg);

    std::string message() const;
    void setMessage(const std::string & msg);
  private:
    std::string m_message;
};
#endif
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  #! /usr/bin/env python
# encoding: utf-8

bld(
	features = 'cxx cxxstlib',
	source   = 'Accumulator.cpp HelloWorld.cpp',
	target   = 'useless',
	export_includes = '.',
)

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     #include <cppunit/CompilerOutputter.h>
#include <cppunit/extensions/TestFactoryRegistry.h>
#include <cppunit/ui/text/TextTestRunner.h>

int main(int argc, char* argv[])
{
  // Get the top level suite from the registry
  CPPUNIT_NS::Test *suite = CPPUNIT_NS::TestFactoryRegistry::getRegistry().makeTest();

  // Adds the test to the list of test to run
  CPPUNIT_NS::TextTestRunner runner;
  runner.addTest( suite );

  // Change the default outputter to a compiler error format outputter
  runner.setOutputter( new CPPUNIT_NS::CompilerOutputter( &runner.result(), std::cout  ) );
  // Run the test.
  bool wasSucessful = runner.run();

  // Return error code 1 if the one of test failed.
  return wasSucessful ? 0 : 1;
}

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              #include <cppunit/extensions/HelperMacros.h>
#include "HelloWorld.h"
#include <string>

using namespace std;

class HelloWorldTest : public CPPUNIT_NS::TestFixture
{
  private:
    CPPUNIT_TEST_SUITE( HelloWorldTest );
    CPPUNIT_TEST( test0 );
    CPPUNIT_TEST( test1 );
    CPPUNIT_TEST_SUITE_END();

  public:
    void test0();
    void test1();

};

// Registers the fixture into the 'registry'
CPPUNIT_TEST_SUITE_REGISTRATION( HelloWorldTest );

void HelloWorldTest::test0()
{
  HelloWorld hello;
  string expected("Hello World");
  CPPUNIT_ASSERT_EQUAL(expected, hello.message());
}

void HelloWorldTest::test1()
{
  string expected("Hola Mundo");
  HelloWorld hello(expected);
  CPPUNIT_ASSERT_EQUAL(expected, hello.message());
  expected = "Hello, world!";
  hello.setMessage(expected);
  CPPUNIT_ASSERT_EQUAL(expected, hello.message());

}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              #! /usr/bin/env python
# encoding: utf-8

bld.env.NARG = '-flag2'
bld(
	features = 'cxx cxxprogram test',
	source   = 'HelloWorldTest.cpp',
	target   = 'unit_test_program',
	use      = 'unittestmain useless CPPUNIT',
	ut_str   = '${SRC[0].abspath()} -flag1 ${NARG}'
)

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   #include <cppunit/extensions/HelperMacros.h>
#include "Accumulator.h"
#include <string>
#include <vector>
#include <fstream>

using namespace std;

class AccumulatorTest : public CPPUNIT_NS::TestFixture
{
  private:
    CPPUNIT_TEST_SUITE( AccumulatorTest );
    CPPUNIT_TEST( test0 );
    CPPUNIT_TEST( test1 );
    CPPUNIT_TEST_SUITE_END();

  public:
    void test0();
    void test1();

    void setUp();
    void tearDown();

  private:
    Accumulator * m_accumulator;

};

// Registers the fixture into the 'registry'
CPPUNIT_TEST_SUITE_REGISTRATION( AccumulatorTest );

void AccumulatorTest::setUp()
{
  m_accumulator = new Accumulator;
}

void AccumulatorTest::tearDown()
{
  delete m_accumulator;
}

static void readlines(const char * filename, vector<string> & lines)
{
  string datafile("input");
  datafile += "/";
  datafile += filename;
  ifstream infile;
  infile.open(datafile.c_str());
  if (infile.is_open())
  {
    char buffer[BUFSIZ];
    while (!infile.eof())
    {
      infile.getline(buffer, BUFSIZ);
      lines.push_back(buffer);
    }
  }
}

void AccumulatorTest::test0()
{
  vector<string> lines;
  readlines("test0.txt", lines);
  size_t expected(2);
  CPPUNIT_ASSERT_EQUAL(expected, lines.size());
  m_accumulator->accumulate(lines[0].c_str());
  CPPUNIT_ASSERT_EQUAL(10, m_accumulator->total());

}

void AccumulatorTest::test1()
{
  vector<string> lines;
  readlines("test1.txt", lines);
  size_t expected(6);
  CPPUNIT_ASSERT_EQUAL(expected, lines.size());
  for (vector<string>::const_iterator it(lines.begin());
      it != lines.end(); ++it)
  {
    const string & line(*it);
    m_accumulator->accumulate(line.c_str());
  }
  CPPUNIT_ASSERT_EQUAL(1+2+3+4+5, m_accumulator->total());

}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   10
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             1
2
3
4
5
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      #! /usr/bin/env python
# encoding: utf-8

bld(
	features = 'cxx cxxprogram test',
	source   = 'AccumulatorTest.cpp',
	target   = 'unit_test_program',
	use      = 'unittestmain useless CPPUNIT',
	ut_cwd   = bld.path,
)

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     #!/usr/bin/env python
# encoding: utf-8
import sys
print('success')
sys.exit(0)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                