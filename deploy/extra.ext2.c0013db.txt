= v.z

    def rotate_by_id(self, rot_id):
        '''rotate a vector using a rotation enum ID'''
        global rotations
        if rot_id >= len(rotations):
            return None
        return rotations[rot_id].r * self

    def rotate_by_inverse_id(self, rot_id):
        '''rotate a vector using a inverse rotation enum ID'''
        global rotations
        if rot_id >= len(rotations):
            return None
        return rotations[rot_id].rt * self


class Matrix3(object):
    '''a 3x3 matrix, intended as a rotation matrix'''
    def __init__(self, a=None, b=None, c=None):
        if a is not None and b is not None and c is not None:
            self.a = a.copy()
            self.b = b.copy()
            self.c = c.copy()
        else:
            self.identity()

    def __repr__(self):
        return 'Matrix3((%.2f, %.2f, %.2f), (%.2f, %.2f, %.2f), (%.2f, %.2f, %.2f))' % (
            self.a.x, self.a.y, self.a.z,
            self.b.x, self.b.y, self.b.z,
            self.c.x, self.c.y, self.c.z)

    def identity(self):
        self.a = Vector3(1,0,0)
        self.b = Vector3(0,1,0)
        self.c = Vector3(0,0,1)

    def transposed(self):
        return Matrix3(Vector3(self.a.x, self.b.x, self.c.x),
                       Vector3(self.a.y, self.b.y, self.c.y),
                       Vector3(self.a.z, self.b.z, self.c.z))


    def from_euler(self, roll, pitch, yaw):
        '''fill the matrix from Euler angles in radians'''
        cp = cos(pitch)
        sp = sin(pitch)
        sr = sin(roll)
        cr = cos(roll)
        sy = sin(yaw)
        cy = cos(yaw)

        self.a.x = cp * cy
        self.a.y = (sr * sp * cy) - (cr * sy)
        self.a.z = (cr * sp * cy) + (sr * sy)
        self.b.x = cp * sy
        self.b.y = (sr * sp * sy) + (cr * cy)
        self.b.z = (cr * sp * sy) - (sr * cy)
        self.c.x = -sp
        self.c.y = sr * cp
        self.c.z = cr * cp


    def to_euler(self):
        '''find Euler angles (321 convention) for the matrix'''
        if self.c.x >= 1.0:
            pitch = pi
        elif self.c.x <= -1.0:
            pitch = -pi
        else:
            pitch = -asin(self.c.x)
        roll = atan2(self.c.y, self.c.z)
        yaw  = atan2(self.b.x, self.a.x)
        return (roll, pitch, yaw)


    def to_euler312(self):
        '''find Euler angles (312 convention) for the matrix.
        See http://www.atacolorado.com/eulersequences.doc
        '''
        T21 = self.a.y
        T22 = self.b.y
        T23 = self.c.y
        T13 = self.c.x
        T33 = self.c.z
        yaw = atan2(-T21, T22)
        roll = asin(T23)
        pitch = atan2(-T13, T33)
        return (roll, pitch, yaw)

    def from_euler312(self, roll, pitch, yaw):
        '''fill the matrix from Euler angles in radians in 312 convention'''
        c3 = cos(pitch)
        s3 = sin(pitch)
        s2 = sin(roll)
        c2 = cos(roll)
        s1 = sin(yaw)
        c1 = cos(yaw)

        self.a.x = c1 * c3 - s1 * s2 * s3
        self.b.y = c1 * c2
        self.c.z = c3 * c2
        self.a.y = -c2*s1
        self.a.z = s3*c1 + c3*s2*s1
        self.b.x = c3*s1 + s3*s2*c1
        self.b.z = s1*s3 - s2*c1*c3
        self.c.x = -s3*c2
        self.c.y = s2

    def determinant(self):
        '''return determinant'''
        ret =  self.a.x * (self.b.y * self.c.z - self.b.z * self.c.y)
        ret += self.a.y * (self.b.z * self.c.x - self.b.x * self.c.z)
        ret += self.a.z * (self.b.x * self.c.y - self.b.y * self.c.x)
        return ret

    def invert(self):
        '''invert 3x3 matrix, returning new matrix'''
        d = self.determinant()
        inv = Matrix3()
        inv.a.x = (self.b.y * self.c.z - self.c.y * self.b.z) / d
        inv.a.y = (self.a.z * self.c.y - self.a.y * self.c.z) / d
        inv.a.z = (self.a.y * self.b.z - self.a.z * self.b.y) / d
        inv.b.x = (self.b.z * self.c.x - self.b.x * self.c.z) / d
        inv.b.y = (self.a.x * self.c.z - self.a.z * self.c.x) / d
        inv.b.z = (self.b.x * self.a.z - self.a.x * self.b.z) / d
        inv.c.x = (self.b.x * self.c.y - self.c.x * self.b.y) / d
        inv.c.y = (self.c.x * self.a.y - self.a.x * self.c.y) / d
        inv.c.z = (self.a.x * self.b.y - self.b.x * self.a.y) / d
        return inv

    def __add__(self, m):
        return Matrix3(self.a + m.a, self.b + m.b, self.c + m.c)

    __radd__ = __add__

    def __sub__(self, m):
        return Matrix3(self.a - m.a, self.b - m.b, self.c - m.c)

    def __rsub__(self, m):
        return Matrix3(m.a - self.a, m.b - self.b, m.c - self.c)

    def __eq__(self, m):
        return self.a == m.a and self.b == m.b and self.c == m.c

    def __ne__(self, m):
        return not self == m
        
    def __mul__(self, other):
        if isinstance(other, Vector3):
            v = other
            return Vector3(self.a.x * v.x + self.a.y * v.y + self.a.z * v.z,
                           self.b.x * v.x + self.b.y * v.y + self.b.z * v.z,
                           self.c.x * v.x + self.c.y * v.y + self.c.z * v.z)
        elif isinstance(other, Matrix3):
            m = other
            return Matrix3(Vector3(self.a.x * m.a.x + self.a.y * m.b.x + self.a.z * m.c.x,
                                   self.a.x * m.a.y + self.a.y * m.b.y + self.a.z * m.c.y,
                                   self.a.x * m.a.z + self.a.y * m.b.z + self.a.z * m.c.z),
                           Vector3(self.b.x * m.a.x + self.b.y * m.b.x + self.b.z * m.c.x,
                                   self.b.x * m.a.y + self.b.y * m.b.y + self.b.z * m.c.y,
                                   self.b.x * m.a.z + self.b.y * m.b.z + self.b.z * m.c.z),
                           Vector3(self.c.x * m.a.x + self.c.y * m.b.x + self.c.z * m.c.x,
                                   self.c.x * m.a.y + self.c.y * m.b.y + self.c.z * m.c.y,
                                   self.c.x * m.a.z + self.c.y * m.b.z + self.c.z * m.c.z))
        v = other
        return Matrix3(self.a * v, self.b * v, self.c * v)

    def __div__(self, v):
        return Matrix3(self.a / v, self.b / v, self.c / v)

    def __truediv__(self, v):
        return Matrix3(self.a / v, self.b / v, self.c / v)

    def __neg__(self):
        return Matrix3(-self.a, -self.b, -self.c)

    def __copy__(self):
        return Matrix3(self.a, self.b, self.c)

    copy = __copy__

    def rotate(self, g):
        '''rotate the matrix by a given amount on 3 axes,
        where g is a vector of delta angles. Used
        with DCM updates in mavextra.py'''
        temp_matrix = Matrix3()
        a = self.a
        b = self.b
        c = self.c
        temp_matrix.a.x = a.y * g.z - a.z * g.y
        temp_matrix.a.y = a.z * g.x - a.x * g.z
        temp_matrix.a.z = a.x * g.y - a.y * g.x
        temp_matrix.b.x = b.y * g.z - b.z * g.y
        temp_matrix.b.y = b.z * g.x - b.x * g.z
        temp_matrix.b.z = b.x * g.y - b.y * g.x
        temp_matrix.c.x = c.y * g.z - c.z * g.y
        temp_matrix.c.y = c.z * g.x - c.x * g.z
        temp_matrix.c.z = c.x * g.y - c.y * g.x
        self.a += temp_matrix.a
        self.b += temp_matrix.b
        self.c += temp_matrix.c

    def rotate_yaw(self, yrad):
        '''rotate the matrix by a given amount in-place on yaw axis'''
        m2 = Matrix3()
        m2.from_euler(0,0,yrad)
        m2 = self * m2
        self.a = m2.a
        self.b = m2.b
        self.c = m2.c

    def rotate_pitch(self, prad):
        '''rotate the matrix by a given amount in-place on pitch axis'''
        m2 = Matrix3()
        m2.from_euler(0,prad,0)
        m2 = self * m2
        self.a = m2.a
        self.b = m2.b
        self.c = m2.c

    def rotate_roll(self, rrad):
        '''rotate the matrix by a given amount in-place on roll axis'''
        m2 = Matrix3()
        m2.from_euler(rrad,0,0)
        m2 = self * m2
        self.a = m2.a
        self.b = m2.b
        self.c = m2.c

    def rotate_321(self, ryad, prad, yrad):
        '''rotate the matrix by a given amount in-place on 3 axes with 321 ordering'''
        m2 = Matrix3()
        m2.from_euler(ryad,prad,yrad)
        m2 = self * m2
        self.a = m2.a
        self.b = m2.b
        self.c = m2.c

    def rotate_312(self, ryad, prad, yrad):
        '''rotate the matrix by a given amount in-place on 3 axes with 312 ordering'''
        m2 = Matrix3()
        m2.from_euler312(ryad,prad,yrad)
        m2 = self * m2
        self.a = m2.a
        self.b = m2.b
        self.c = m2.c

    def normalize(self):
        '''re-normalise a rotation matrix'''
        error = self.a * self.b
        t0 = self.a - (self.b * (0.5 * error))
        t1 = self.b - (self.a * (0.5 * error))
        t2 = t0 % t1
        self.a = t0 * (1.0 / t0.length())
        self.b = t1 * (1.0 / t1.length())
        self.c = t2 * (1.0 / t2.length())

    def trace(self):
        '''the trace of the matrix'''
        return self.a.x + self.b.y + self.c.z

    def from_axis_angle(self, axis, angle):
        '''create a rotation matrix from axis and angle'''
        ux = axis.x
        uy = axis.y
        uz = axis.z
        ct = cos(angle)
        st = sin(angle)
        self.a.x = ct + (1-ct) * ux**2
        self.a.y = ux*uy*(1-ct) - uz*st
        self.a.z = ux*uz*(1-ct) + uy*st
        self.b.x = uy*ux*(1-ct) + uz*st
        self.b.y = ct + (1-ct) * uy**2
        self.b.z = uy*uz*(1-ct) - ux*st
        self.c.x = uz*ux*(1-ct) - uy*st
        self.c.y = uz*uy*(1-ct) + ux*st
        self.c.z = ct + (1-ct) * uz**2


    def from_two_vectors(self, vec1, vec2):
        '''get a rotation matrix from two vectors.
           This returns a rotation matrix which when applied to vec1
           will produce a vector pointing in the same direction as vec2'''
        angle = vec1.angle(vec2)
        cross = vec1 % vec2
        if cross.length() == 0:
            # the two vectors are colinear
            return self.from_euler(0,0,angle)
        cross.normalize()
        return self.from_axis_angle(cross, angle)

    def close(self, m, tol=1e-7):
        return self.a.close(m.a, tol) and self.b.close(m.b, tol) and self.c.close(m.c, tol)

class Plane(object):
    '''a plane in 3 space, defined by a point and a vector normal'''
    def __init__(self, point=None, normal=None):
        if point is None:
            point = Vector3(0,0,0)
        if normal is None:
            normal = Vector3(0, 0, 1)
        self.point = point
        self.normal = normal

class Line(object):
    '''a line in 3 space, defined by a point and a vector'''
    def __init__(self, point=None, vector=None):
        if point is None:
            point = Vector3(0,0,0)
        if vector is None:
            vector = Vector3(0, 0, 1)
        self.point = point
        self.vector = vector

    def plane_intersection(self, plane, forward_only=False):
        '''return point where line intersects with a plane'''
        l_dot_n = self.vector * plane.normal
        if l_dot_n == 0.0:
            # line is parallel to the plane
            return None
        d = ((plane.point - self.point) * plane.normal) / l_dot_n
        if forward_only and d < 0:
            return None
        return (self.vector * d) + self.point

class Rotation(object):
    def __init__(self, name, roll, pitch, yaw):
        self.name = name
        self.roll = roll
        self.pitch = pitch
        self.yaw = yaw
        self.r = Matrix3()
        self.r.from_euler(radians(self.roll), radians(self.pitch), radians(self.yaw))
        self.rt = self.r.transposed()

# the rotations used in APM
rotations = [
    Rotation("ROTATION_NONE",                      0,   0,   0),
    Rotation("ROTATION_YAW_45",                    0,   0,  45),
    Rotation("ROTATION_YAW_90",                    0,   0,  90),
    Rotation("ROTATION_YAW_135",                   0,   0, 135),
    Rotation("ROTATION_YAW_180",                   0,   0, 180),
    Rotation("ROTATION_YAW_225",                   0,   0, 225),
    Rotation("ROTATION_YAW_270",                   0,   0, 270),
    Rotation("ROTATION_YAW_315",                   0,   0, 315),
    Rotation("ROTATION_ROLL_180",                180,   0,   0),
    Rotation("ROTATION_ROLL_180_YAW_45",         180,   0,  45),
    Rotation("ROTATION_ROLL_180_YAW_90",         180,   0,  90),
    Rotation("ROTATION_ROLL_180_YAW_135",        180,   0, 135),
    Rotation("ROTATION_PITCH_180",                 0, 180,   0),
    Rotation("ROTATION_ROLL_180_YAW_225",        180,   0, 225),
    Rotation("ROTATION_ROLL_180_YAW_270",        180,   0, 270),
    Rotation("ROTATION_ROLL_180_YAW_315",        180,   0, 315),
    Rotation("ROTATION_ROLL_90",                  90,   0,   0),
    Rotation("ROTATION_ROLL_90_YAW_45",           90,   0,  45),
    Rotation("ROTATION_ROLL_90_YAW_90",           90,   0,  90),
    Rotation("ROTATION_ROLL_90_YAW_135",          90,   0, 135),
    Rotation("ROTATION_ROLL_270",                270,   0,   0),
    Rotation("ROTATION_ROLL_270_YAW_45",         270,   0,  45),
    Rotation("ROTATION_ROLL_270_YAW_90",         270,   0,  90),
    Rotation("ROTATION_ROLL_270_YAW_135",        270,   0, 135),
    Rotation("ROTATION_PITCH_90",                  0,  90,   0),
    Rotation("ROTATION_PITCH_270",                 0, 270,   0),
    Rotation("ROTATION_PITCH_180_YAW_90",          0, 180,  90),
    Rotation("ROTATION_PITCH_180_YAW_270",         0, 180, 270),
    Rotation("ROTATION_ROLL_90_PITCH_90",         90,  90,   0),
    Rotation("ROTATION_ROLL_180_PITCH_90",       180,  90,   0),
    Rotation("ROTATION_ROLL_270_PITCH_90",       270,  90,   0),
    Rotation("ROTATION_ROLL_90_PITCH_180",        90, 180,   0),
    Rotation("ROTATION_ROLL_270_PITCH_180",      270, 180,   0),
    Rotation("ROTATION_ROLL_90_PITCH_270",        90, 270,   0),
    Rotation("ROTATION_ROLL_180_PITCH_270",      180, 270,   0),
    Rotation("ROTATION_ROLL_270_PITCH_270",      270, 270,   0),
    Rotation("ROTATION_ROLL_90_PITCH_180_YAW_90", 90, 180,  90),
    Rotation("ROTATION_ROLL_90_YAW_270",          90,   0, 270),
    Rotation("ROTATION_ROLL_90_PITCH_68_YAW_293", 90,  68, 270),
    Rotation("ROTATION_PITCH_315",                 0, 315,   0),
    Rotation("ROTATION_ROLL_90_PITCH_315",        90, 315,   0),
    Rotation("ROTATION_PITCH_7",                   0,   7,   0),
    ]

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    from __future__ import absolute_import, print_function
from setuptools.command.build_py import build_py
from io import open
# Work around mbcs bug in distutils.
# http://bugs.python.org/issue10945
import codecs
try:
    codecs.lookup('mbcs')
except LookupError:
    ascii = codecs.lookup('ascii')
    func = lambda name, enc=ascii: {True: enc}.get(name=='mbcs')
    codecs.register(func)

from setuptools import setup
import glob, os, shutil, fnmatch, sys

sys.path.insert(0, os.path.dirname(__file__))
from __init__ import __version__

def generate_content():
    # generate the file content...
    from generator import mavgen, mavparse

    # path to message_definitions directory
    if os.getenv("MDEF",None) is not None:
        mdef_paths = [os.getenv("MDEF")]

    else:
        mdef_paths = [os.path.join('..', 'message_definitions'),
                      os.path.join('mavlink', 'message_definitions'),
                      os.path.join('..', 'mavlink', 'message_definitions'),
                      os.path.join('message_definitions'),
        ]

    for path in mdef_paths:
        mdef_path = os.path.join(os.path.dirname(os.path.realpath(__file__)), path)
        if os.path.exists(mdef_path):
            print("Using message definitions from %s" % mdef_path)
            break

    dialects_path = os.path.join(os.path.dirname(os.path.realpath(__file__)), 'dialects')

    v10_dialects = glob.glob(os.path.join(mdef_path, 'v1.0', '*.xml'))

    # for now v2.0 uses same XML files as v1.0
    v20_dialects = glob.glob(os.path.join(mdef_path, 'v1.0', '*.xml'))

    should_generate = not "NOGEN" in os.environ
    if should_generate:
        if len(v10_dialects) == 0:
            print("No XML message definitions found")
            sys.exit(1)

        for xml in v10_dialects:
            shutil.copy(xml, os.path.join(dialects_path, 'v10'))
        for xml in v20_dialects:
            shutil.copy(xml, os.path.join(dialects_path, 'v20'))

        for xml in v10_dialects:
            dialect = os.path.basename(xml)[:-4]
            wildcard = os.getenv("MAVLINK_DIALECT",'*')
            if not fnmatch.fnmatch(dialect, wildcard):
                continue
            print("Building %s for protocol 1.0" % xml)
            if not mavgen.mavgen_python_dialect(dialect, mavparse.PROTOCOL_1_0, with_type_annotations=True):
                print("Building failed %s for protocol 1.0" % xml)
                sys.exit(1)
            if not mavgen.mavgen_python_dialect(dialect, mavparse.PROTOCOL_1_0, with_type_annotations=False):
                print("Building failed %s (Python2) for protocol 1.0" % xml)
                sys.exit(1)

        for xml in v20_dialects:
            dialect = os.path.basename(xml)[:-4]
            wildcard = os.getenv("MAVLINK_DIALECT",'*')
            if not fnmatch.fnmatch(dialect, wildcard):
                continue
            print("Building %s for protocol 2.0" % xml)
            if not mavgen.mavgen_python_dialect(dialect, mavparse.PROTOCOL_2_0, with_type_annotations=True):
                print("Building failed %s for protocol 2.0" % xml)
                sys.exit(1)
            if not mavgen.mavgen_python_dialect(dialect, mavparse.PROTOCOL_2_0, with_type_annotations=False):
                print("Building failed %s (Python2) for protocol 2.0" % xml)
                sys.exit(1)


class custom_build_py(build_py):
    def run(self):
        generate_content()

        # distutils uses old-style classes, so no super()
        build_py.run(self)

with open("README.md", "r", encoding = "utf-8") as fh:
    long_description = fh.read()

setup (name = 'pymavlink',
       version = __version__,
       description = 'Python MAVLink code',
       long_description = long_description,
       long_description_content_type = "text/markdown",
       url = 'https://github.com/ArduPilot/pymavlink/',
       classifiers=['Development Status :: 5 - Production/Stable',
                    'Environment :: Console',
                    'Intended Audience :: Science/Research',
                    'License :: OSI Approved :: GNU Lesser General Public License v3 (LGPLv3)',
                    'Operating System :: OS Independent',
                    'Programming Language :: Python :: 2.7',
                    'Programming Language :: Python :: 3.6',
                    'Programming Language :: Python :: 3.7',
                    'Programming Language :: Python :: 3.8',
                    'Programming Language :: Python :: 3.9',
                    'Topic :: Scientific/Engineering',
                    ],
       license='LGPLv3',
       package_dir = { 'pymavlink' : '.' },
       package_data = { 'pymavlink.dialects.v10' : ['*.xml'],
                        'pymavlink.dialects.v20' : ['*.xml'],
                        'pymavlink.generator'    : [ '*.xsd',
                                                     'java/lib/*.*',
                                                     'java/lib/Messages/*.*',
                                                     'C/include_v1.0/*.h',
                                                     'C/include_v1.0/*.hpp',
                                                     'C/include_v2.0/*.h',
                                                     'C/include_v2.0/*.hpp',
                                                     'CPP11/include_v2.0/*.hpp',
                                                     'CS/*.*',
                                                     'swift/*.swift',],
                        'pymavlink'              : ['message_definitions/v*/*.xml']
                        },
       packages = ['pymavlink',
                   'pymavlink.generator',
                   'pymavlink.dialects',
                   'pymavlink.dialects.v10',
                   'pymavlink.dialects.v10.python2',
                   'pymavlink.dialects.v20',
                   'pymavlink.dialects.v20.python2'],
       scripts = [ 'tools/magfit_delta.py', 'tools/mavextract.py',
                   'tools/mavgraph.py', 'tools/mavparmdiff.py',
                   'tools/mavtogpx.py', 'tools/magfit_gps.py',
                   'tools/mavflightmodes.py', 'tools/mavlogdump.py',
                   'tools/mavparms.py', 'tools/magfit_motors.py',
                   'tools/mavflighttime.py', 'tools/mavloss.py',
                   'tools/mavplayback.py', 'tools/magfit.py',
                   'tools/mavgpslock.py',
                   'tools/mavmission.py',
                   'tools/mavsigloss.py',
                   'tools/mavsearch.py',
                   'tools/mavtomfile.py',
                   'tools/mavgen.py',
                   'tools/mavkml.py',
                   'tools/mavfft.py',
                   'tools/mavfft_isb.py',
                   'tools/mavsummarize.py',
                   'tools/MPU6KSearch.py',
                   'tools/mavlink_bitmask_decoder.py',
                   'tools/magfit_WMM.py',
       ],
       install_requires=[
            'future',
            'lxml',
       ],
       cmdclass={'build_py': custom_build_py},
       )
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     #!/bin/bash

# NextGen node/javascript top-level bindings test/s  - there are a few stages of test here..

# 1. ensure we've got the dependencies pre-built, such as js bindings, C bindings, and minimal compiled c targets.
# 2. run the static pre-canned JS create/pack tests in the 'mavlink.tests.js' files (ie assembling packets for sending)
# 3. capture all the packets that the C bindings test suite make, and try to parse them all with JS. ( incoming packet parsing)
# 4. make and run the complete autogenerated 'mocha' test suite/s that does byte-level verification of JS against the C bindings.

# We use '.tests.js' autogenerated javascript to build/pack one of each packet with test data for nominally sending

# utilise the C bindings and test suite to generate a bunch of mavlink data that we can run through the node/javascript parser
# we do this by executing ./generator/C/test/posix/testmav2.0_ardupilotmega to 
# run mavlink_test_all() from generator/C/include_v2.0/ardupilotmega/testsuite.h

# this script can be called manually by a human, or it can be triggered by a 'npm test' from the generator/javascript/ folder, so we handle either.

set -e
#set -x
RED='\033[1;31m'
GRN='\033[1;31m'
NC='\033[0m' # No Color

# 0 means low; 1 means some; 2 means high verbosity
VERBOSITY='0'
OUT0="/dev/stdout"
OUT1="/dev/null"
OUT2="/dev/null"

if [ "$VERBOSITY" = "1" ]; then
OUT1="/dev/stdout"
fi
if [ "$VERBOSITY" = "2" ]; then
OUT1="/dev/stdout"
OUT2="/dev/stdout"
fi


test -z "$MDEF" && MDEF="../message_definitions"


    # build js bindings we want to test
    printf "${RED}Generating JS-NextGen bindings to test...${NC}\n\n"
    sleep 1
    cd generator
    ./gen_js.sh > $OUT2
    cd ..


    # build C bindings to test the testsuite.js 'recieve' tester against.
    #    we quieten them as we really aren't testing THEM here.
    printf "${RED}Generating C bindings to test JS-NextGen against...${NC}\n\n"
    sleep 1
    ./tools/mavgen.py --lang C $MDEF/v1.0/ardupilotmega.xml -o generator/C/include_v1.0 --wire-protocol=1.0 > $OUT2
    ./tools/mavgen.py --lang C $MDEF/v1.0/ardupilotmega.xml -o generator/C/include_v2.0 --wire-protocol=2.0 > $OUT2


    #   we quieten them as we really aren't testing THEM here.
    printf "${RED}Compiling C bindings to test JS-NextGen against...${NC}\n\n"
    sleep 1
    pushd generator/C/test/posix  > $OUT2
    make clean testmav1.0_ardupilotmega testmav2.0_ardupilotmega testmav1.0_common testmav2.0_common > $OUT2
    popd  > $OUT2

     # need to install the bindings first to test them?
    printf "${RED}Installing just-generated npm package...${NC}\n\n"
    cd generator/javascript
    npm install 2>/dev/null > /dev/null
    cd ../..

   printf "${RED}JS-NextGen PRETEST setup done.${NC}\n\n"




# run the automatically generated tool for build/pack, ie create and pack one of everything, no byte-level checking of the packed results tho, comes later.
printf "${RED}Running non-NPM JS-NextGen create/pack tests ...${NC}\n\n"
sleep 1
node generator/javascript/implementations/mavlink_ardupilotmega_v2.0/mavlink.tests.js > $OUT1
node generator/javascript/implementations/mavlink_ardupilotmega_v1.0/mavlink.tests.js > $OUT1
node generator/javascript/implementations/mavlink_common_v2.0/mavlink.tests.js > $OUT1
node generator/javascript/implementations/mavlink_common_v1.0/mavlink.tests.js > $OUT1


# piping the wire-ready hex-output from the C bindings into the node bindings per-packet and receive each of them.
printf "${RED}Streaming C test data into JS-NextGen for pushBuffer/parseBuffer tests${NC}\n\n"
sleep 1
pushd generator/C/test/posix  > $OUT2
make testmav1.0_common testmav2.0_common testmav1.0_ardupilotmega testmav2.0_ardupilotmega
./testmav1.0_ardupilotmega | grep '^fe' | node ../../../../examples/testparser.js ardupilotmega 1.0 $VERBOSITY
./testmav2.0_ardupilotmega | grep '^fd' | node ../../../../examples/testparser.js ardupilotmega 2.0 $VERBOSITY 
./testmav1.0_common | grep '^fe' | node ../../../../examples/testparser.js common 1.0 $VERBOSITY
./testmav2.0_common | grep '^fd' | node ../../../../examples/testparser.js common 2.0 $VERBOSITY
popd  > $OUT2


# we also have a big collection ~990 of mocha tests based on C output like the above but more thorough, this includes byte-level 
# checking of the packed results etc.
# u can/should also run the ~990 or more mocha tests we just made:  
#( this uses generator/javascript/package.json -> runs make_tests.py -> outputs made_tests.js -> which are then executed by 'mocha test' )
echo "tip: if not bring auto-run as a auto-test, u can run the next-stage of tests with mocha here:"
echo "cd generator/javascript"
echo "npm test"
echo "cd -"


printf "\n${RED}JS-NextGen Testing done.${NC}\n\n"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    #!/bin/bash
set -e
set -x

test -z "$MDEF" && MDEF="../message_definitions"

echo "Test Generate ALL in mavlink v1"
mavgen.py --lang='C'          --output=/tmp/mavgen_test mavlink/message_definitions/v1.0/common.xml --wire-protocol=1.0 --strict-units
mavgen.py --lang='CS'         --output=/tmp/mavgen_test mavlink/message_definitions/v1.0/common.xml --wire-protocol=1.0 --strict-units
mavgen.py --lang='JavaScript' --output=/tmp/mavgen_test mavlink/message_definitions/v1.0/common.xml --wire-protocol=1.0 --strict-units
mavgen.py --lang='Python2'    --output=/tmp/mavgen_test mavlink/message_definitions/v1.0/common.xml --wire-protocol=1.0 --strict-units
mavgen.py --lang='Python3'     --output=/tmp/mavgen_test mavlink/message_definitions/v1.0/common.xml --wire-protocol=1.0 --strict-units
mavgen.py --lang='WLua'       --output=/tmp/mavgen_test mavlink/message_definitions/v1.0/common.xml --wire-protocol=1.0 --strict-units
mavgen.py --lang='ObjC'       --output=/tmp/mavgen_test mavlink/message_definitions/v1.0/common.xml --wire-protocol=1.0 --strict-units
mavgen.py --lang='Swift'      --output=/tmp/mavgen_test mavlink/message_definitions/v1.0/common.xml --wire-protocol=1.0 --strict-units
mavgen.py --lang='Java'       --output=/tmp/mavgen_test mavlink/message_definitions/v1.0/common.xml --wire-protocol=1.0 --strict-units
mavgen.py --lang='Lua'       --output=/tmp/mavgen_test mavlink/message_definitions/v1.0/common.xml --wire-protocol=1.0 --strict-units


echo "Test Generate ALL in mavlink v2"
mavgen.py --lang='C'          --output=/tmp/mavgen_test mavlink/message_definitions/v1.0/common.xml --wire-protocol=2.0 --strict-units
mavgen.py --lang='CS'         --output=/tmp/mavgen_test mavlink/message_definitions/v1.0/common.xml --wire-protocol=2.0 --strict-units
mavgen.py --lang='JavaScript' --output=/tmp/mavgen_test mavlink/message_definitions/v1.0/common.xml --wire-protocol=2.0 --strict-units
mavgen.py --lang='TypeScript' --output=/tmp/mavgen_test mavlink/message_definitions/v1.0/common.xml --wire-protocol=2.0 --strict-units
mavgen.py --lang='Python2'    --output=/tmp/mavgen_test mavlink/message_definitions/v1.0/common.xml --wire-protocol=2.0 --strict-units
mavgen.py --lang='Python3'     --output=/tmp/mavgen_test mavlink/message_definitions/v1.0/common.xml --wire-protocol=2.0 --strict-units
mavgen.py --lang='WLua'       --output=/tmp/mavgen_test mavlink/message_definitions/v1.0/common.xml --wire-protocol=2.0 --strict-units
mavgen.py --lang='ObjC'       --output=/tmp/mavgen_test mavlink/message_definitions/v1.0/common.xml --wire-protocol=2.0 --strict-units
mavgen.py --lang='Swift'      --output=/tmp/mavgen_test mavlink/message_definitions/v1.0/common.xml --wire-protocol=2.0 --strict-units
mavgen.py --lang='Java'       --output=/tmp/mavgen_test mavlink/message_definitions/v1.0/common.xml --wire-protocol=2.0 --strict-units
mavgen.py --lang='C++11'      --output=/tmp/mavgen_test mavlink/message_definitions/v1.0/common.xml --wire-protocol=2.0 --strict-units # C++11 generator only supports 2.0
mavgen.py --lang='Lua'       --output=/tmp/mavgen_test mavlink/message_definitions/v1.0/common.xml --wire-protocol=2.0 --strict-units
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     #!/bin/bash

# This requires the python future library
# On MS windows, cygwin usually does not provide that.
# The workaround is then to issue on a cygwin prompt:
#   easy_install-2.7 pip
#   pip install future

set -e
set -x

test -z "$MDEF" && MDEF="../message_definitions"

# MAVLINK_DIALECT=ardupilotmega python setup.py clean build install --user

tools/mavgen.py --lang C $MDEF/v1.0/all.xml -o generator/C/include_v1.0 --wire-protocol=1.0
tools/mavgen.py --lang C $MDEF/v1.0/all.xml -o generator/C/include_v2.0 --wire-protocol=2.0
tools/mavgen.py --lang C++11 $MDEF/v1.0/all.xml -o generator/CPP11/include_v2.0 --wire-protocol=2.0

pushd generator/C/test/posix
make clean testmav1.0_ardupilotmega testmav2.0_ardupilotmega

# these test tools emit the test packet as hexadecimal and human-readable, other tools consume it as a cross-reference, we ignore the hex here.
./testmav1.0_ardupilotmega | egrep -v '(^fe|^fd)'
./testmav2.0_ardupilotmega | egrep -v '(^fe|^fd)'
popd

pushd generator/CPP11/test/posix
make clean all
popd
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <?xml version="1.0"?>
<mavlink>
  <messages>
    <message id="0" name="TEST">
      <description>A message with 64 fields should not raise an exception.</description>
      <field type="int8_t" name="M1"/>
      <field type="int8_t" name="M2"/>
      <field type="int8_t" name="M3"/>
      <field type="int8_t" name="M4"/>
      <field type="int8_t" name="M5"/>
      <field type="int8_t" name="M6"/>
      <field type="int8_t" name="M7"/>
      <field type="int8_t" name="M8"/>
      <field type="int8_t" name="M9"/>
      <field type="int8_t" name="M10"/>
      <field type="int8_t" name="M11"/>
      <field type="int8_t" name="M12"/>
      <field type="int8_t" name="M13"/>
      <field type="int8_t" name="M14"/>
      <field type="int8_t" name="M15"/>
      <field type="int8_t" name="M16"/>
      <field type="int8_t" name="M17"/>
      <field type="int8_t" name="M18"/>
      <field type="int8_t" name="M19"/>
      <field type="int8_t" name="M20"/>
      <field type="int8_t" name="M21"/>
      <field type="int8_t" name="M22"/>
      <field type="int8_t" name="M23"/>
      <field type="int8_t" name="M24"/>
      <field type="int8_t" name="M25"/>
      <field type="int8_t" name="M26"/>
      <field type="int8_t" name="M27"/>
      <field type="int8_t" name="M28"/>
      <field type="int8_t" name="M29"/>
      <field type="int8_t" name="M30"/>
      <field type="int8_t" name="M31"/>
      <field type="int8_t" name="M32"/>
      <field type="int8_t" name="M33"/>
      <field type="int8_t" name="M34"/>
      <field type="int8_t" name="M35"/>
      <field type="int8_t" name="M36"/>
      <field type="int8_t" name="M37"/>
      <field type="int8_t" name="M38"/>
      <field type="int8_t" name="M39"/>
      <field type="int8_t" name="M40"/>
      <field type="int8_t" name="M41"/>
      <field type="int8_t" name="M42"/>
      <field type="int8_t" name="M43"/>
      <field type="int8_t" name="M44"/>
      <field type="int8_t" name="M45"/>
      <field type="int8_t" name="M46"/>
      <field type="int8_t" name="M47"/>
      <field type="int8_t" name="M48"/>
      <field type="int8_t" name="M49"/>
      <field type="int8_t" name="M50"/>
      <field type="int8_t" name="M51"/>
      <field type="int8_t" name="M52"/>
      <field type="int8_t" name="M53"/>
      <field type="int8_t" name="M54"/>
      <field type="int8_t" name="M55"/>
      <field type="int8_t" name="M56"/>
      <field type="int8_t" name="M57"/>
      <field type="int8_t" name="M58"/>
      <field type="int8_t" name="M59"/>
      <field type="int8_t" name="M60"/>
      <field type="int8_t" name="M61"/>
      <field type="int8_t" name="M62"/>
      <field type="int8_t" name="M63"/>
      <field type="int8_t" name="M64"/>
    </message>
  </messages>
</mavlink>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <?xml version="1.0"?>
<mavlink>
  <messages>
    <message id="0" name="TEST">
      <description>A message with 65 fields or more should raise an exception.</description>
      <field type="int8_t" name="M1"/>
      <field type="int8_t" name="M2"/>
      <field type="int8_t" name="M3"/>
      <field type="int8_t" name="M4"/>
      <field type="int8_t" name="M5"/>
      <field type="int8_t" name="M6"/>
      <field type="int8_t" name="M7"/>
      <field type="int8_t" name="M8"/>
      <field type="int8_t" name="M9"/>
      <field type="int8_t" name="M10"/>
      <field type="int8_t" name="M11"/>
      <field type="int8_t" name="M12"/>
      <field type="int8_t" name="M13"/>
      <field type="int8_t" name="M14"/>
      <field type="int8_t" name="M15"/>
      <field type="int8_t" name="M16"/>
      <field type="int8_t" name="M17"/>
      <field type="int8_t" name="M18"/>
      <field type="int8_t" name="M19"/>
      <field type="int8_t" name="M20"/>
      <field type="int8_t" name="M21"/>
      <field type="int8_t" name="M22"/>
      <field type="int8_t" name="M23"/>
      <field type="int8_t" name="M24"/>
      <field type="int8_t" name="M25"/>
      <field type="int8_t" name="M26"/>
      <field type="int8_t" name="M27"/>
      <field type="int8_t" name="M28"/>
      <field type="int8_t" name="M29"/>
      <field type="int8_t" name="M30"/>
      <field type="int8_t" name="M31"/>
      <field type="int8_t" name="M32"/>
      <field type="int8_t" name="M33"/>
      <field type="int8_t" name="M34"/>
      <field type="int8_t" name="M35"/>
      <field type="int8_t" name="M36"/>
      <field type="int8_t" name="M37"/>
      <field type="int8_t" name="M38"/>
      <field type="int8_t" name="M39"/>
      <field type="int8_t" name="M40"/>
      <field type="int8_t" name="M41"/>
      <field type="int8_t" name="M42"/>
      <field type="int8_t" name="M43"/>
      <field type="int8_t" name="M44"/>
      <field type="int8_t" name="M45"/>
      <field type="int8_t" name="M46"/>
      <field type="int8_t" name="M47"/>
      <field type="int8_t" name="M48"/>
      <field type="int8_t" name="M49"/>
      <field type="int8_t" name="M50"/>
      <field type="int8_t" name="M51"/>
      <field type="int8_t" name="M52"/>
      <field type="int8_t" name="M53"/>
      <field type="int8_t" name="M54"/>
      <field type="int8_t" name="M55"/>
      <field type="int8_t" name="M56"/>
      <field type="int8_t" name="M57"/>
      <field type="int8_t" name="M58"/>
      <field type="int8_t" name="M59"/>
      <field type="int8_t" name="M60"/>
      <field type="int8_t" name="M61"/>
      <field type="int8_t" name="M62"/>
      <field type="int8_t" name="M63"/>
      <field type="int8_t" name="M64"/>
      <field type="int8_t" name="M65"/>
    </message>
  </messages>
</mavlink>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              import os

os.environ["MAVLINK20"] = "1"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       QGC WPL 110
0	0	0	5001	8.000000	0.000000	0.000000	0.000000	40.071766	-105.230202	0.000000	0
1	0	0	5001	8.000000	0.000000	0.000000	0.000000	40.071014	-105.230247	0.000000	0
2	0	0	5001	8.000000	0.000000	0.000000	0.000000	40.071014	-105.228821	0.000000	0
3	0	0	5001	8.000000	0.000000	0.000000	0.000000	40.071609	-105.228867	0.000000	0
4	0	0	5001	8.000000	0.000000	0.000000	0.000000	40.071602	-105.228172	0.000000	0
5	0	0	5001	8.000000	0.000000	0.000000	0.000000	40.070858	-105.227982	0.000000	0
6	0	0	5001	8.000000	0.000000	0.000000	0.000000	40.070789	-105.226219	0.000000	0
7	0	0	5001	8.000000	0.000000	0.000000	0.000000	40.072453	-105.226379	0.000000	0
8	0	0	5004	20.000000	0.000000	0.000000	0.000000	40.071609	-105.228172	0.000000	0
9	0	0	5004	20.000000	0.000000	0.000000	0.000000	40.071625	-105.227982	0.000000	0
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  -35.363720	149.163651
-35.358795	149.164734
-35.359211	149.160767
-35.368622	149.162750
-35.368279	149.166870
-35.358795	149.164734
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <?xml version="1.0"?>
<mavlink>
  <include>root.xml</include>
  <messages>
    <message id="2222" name="CHILDMSG">
      <description>This is a child message field</description>
      <field type="uint32_t" name="CHILDFIELD">child Field</field>
    </message>
  </messages>
</mavlink>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <?xml version="1.0"?>
<mavlink>
  <include>child.xml</include>
  <messages>
    <message id="3333" name="GRANDCHILD1MSG">
      <description>This is a grandchild1 message field</description>
      <field type="uint32_t" name="GRANDCHILD1FIELD">grandchild1 Field</field>
    </message>
  </messages>
</mavlink>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <?xml version="1.0"?>
<mavlink>
  <include>child.xml</include>
  <messages>
    <message id="4444" name="GRANDCHILD2MSG">
      <description>This is a grandchild2 message field</description>
      <field type="uint32_t" name="GRANDCHILD2MSG">grandchild2 Field</field>
    </message>
  </messages>
</mavlink>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <?xml version="1.0"?>
<mavlink>
  <include>grandchild1.xml</include>
  <include>grandchild2.xml</include>
  <messages>
    <message id="5555" name="INBREDMSG">
      <description>This is a inbred message field</description>
      <field type="uint32_t" name="INBREDFIELD">Inbred Field</field>
    </message>
  </messages>
</mavlink>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   <?xml version="1.0"?>
<mavlink>
  <messages>
    <message id="7777" name="MIXIN">
      <description>This is a MIXIN message field</description>
      <field type="uint32_t" name="MIXINFIELD">Mixin Field</field>
    </message>
  </messages>
</mavlink>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <?xml version="1.0"?>
<mavlink>
  <!-- extends child.xml by mixing in mixin.xml.  A Mixiner is one who mixes in... -->
  <include>child.xml</include>
  <include>mixin.xml</include>
  <messages>
    <message id="6666" name="MIXINER">
      <description>This is a MIXINER message field</description>
      <field type="uint32_t" name="MIXINERFIELD">Mixiner Field</field>
    </message>
  </messages>
</mavlink>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <?xml version="1.0"?>
<mavlink>
  <messages>
    <message id="1111" name="ROOTMSG">
      <description>This is a root message field</description>
      <field type="uint32_t" name="ROOTFIELD">Root Field</field>
    </message>
  </messages>
</mavlink>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     QGC WPL 110
0	0	0	5100	8.000000	0.000000	0.000000	0.000000	40.071766	-105.230202	0.000000	0
1	0	0	5100	8.000000	0.000000	0.000000	0.000000	40.071014	-105.230247	0.000000	0
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    RALLY 40.071553	-105.229401	0.000000	40.000000	0.000000	0
RALLY 40.072265	-105.231136	0.000000	40.000000	0.000000	0
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            # serializer version: 1
# name: test_wlua[common.xml-command_long_over_tcp.pcapng]
  dict({
    'returncode': 0,
    'stderr': '',
    'stdout': '''
      Frame 1: 101 bytes on wire (808 bits), 101 bytes captured (808 bits) on 
      Null/Loopback
      Internet Protocol Version 4, Src: 127.0.0.1, Dst: 127.0.0.1
      Transmission Control Protocol, Src Port: 62025, Dst Port: 5760, Seq: 1, 
      MAVLink Protocol (45)
          Header
              Magic value / version: MAVLink 2.0 (0xfd)
              Payload length: 33
              Incompatibility flag: 0x00 (0)
              Compatibility flag: 0x00 (0)
              Packet sequence: 246
              System id: 250
              Component id: MAV_COMP_ID_SYSTEM_CONTROL (250)
              Message id: COMMAND_LONG (76)
          Payload: COMMAND_LONG (76)
              target_system (uint8_t): 1
              target_component (uint8_t): 1
              command (MAV_CMD): MAV_CMD_DO_SET_MODE (176)
              confirmation (uint8_t): 1
              param1: Mode (MAV_MODE): Unknown (1)
              param2: Custom Mode (float): 5
              param3: Custom Submode (float): 0
              param4 (float): 0
              param5 (float): 0
              param6 (float): 0
              param7 (float): 0
          Message CRC: 0xdb93
      
      Frame 2: 138 bytes on wire (1104 bits), 138 bytes captured (1104 bits) o
      Null/Loopback
      Internet Protocol Version 4, Src: 127.0.0.1, Dst: 127.0.0.1
      Transmission Control Protocol, Src Port: 5760, Dst Port: 62025, Seq: 1, 
      MAVLink Protocol (82)
          Header
              Magic value / version: MAVLink 2.0 (0xfd)
              Payload length: 10
              Incompatibility flag: 0x00 (0)
              Compatibility flag: 0x00 (0)
              Packet sequence: 218
              System id: 1
              Component id: MAV_COMP_ID_AUTOPILOT1 (1)
              Message id: COMMAND_ACK (77)
          Payload: COMMAND_ACK (77)
              command (MAV_CMD): MAV_CMD_DO_SET_MODE (176)
              result (MAV_RESULT): MAV_RESULT_FAILED (4)
          Message CRC: 0x7692
      MAVLink Protocol (82)
          Header
              Magic value / version: MAVLink 2.0 (0xfd)
              Payload length: 48
              Incompatibility flag: 0x00 (0)
              Compatibility flag: 0x00 (0)
              Packet sequence: 219
              System id: 1
              Component id: MAV_COMP_ID_AUTOPILOT1 (1)
              Message id: STATUSTEXT (253)
          Payload: STATUSTEXT (253)
              severity (MAV_SEVERITY): MAV_SEVERITY_WARNING (4)
              text (char): Mode change to LOITER failed: requires position
          Message CRC: 0x647a
      
      Frame 3: 101 bytes on wire (808 bits), 101 bytes captured (808 bits) on 
      Null/Loopback
      Internet Protocol Version 4, Src: 127.0.0.1, Dst: 127.0.0.1
      Transmission Control Protocol, Src Port: 62025, Dst Port: 5760, Seq: 706
      MAVLink Protocol (45)
          Header
              Magic value / version: MAVLink 2.0 (0xfd)
              Payload length: 33
              Incompatibility flag: 0x00 (0)
              Compatibility flag: 0x00 (0)
              Packet sequence: 11
              System id: 250
              Component id: MAV_COMP_ID_SYSTEM_CONTROL (250)
              Message id: COMMAND_LONG (76)
          Payload: COMMAND_LONG (76)
              target_system (uint8_t): 1
              target_component (uint8_t): 1
              command (MAV_CMD): MAV_CMD_COMPONENT_ARM_DISARM (400)
              confirmation (uint8_t): 1
              param1: Arm (float): 0
              param2: Force (float): 0
              param3 (float): 0
              param4 (float): 0
              param5 (float): 0
              param6 (float): 0
              param7 (float): 0
          Message CRC: 0xf9df
      
      Frame 4: 144 bytes on wire (1152 bits), 144 bytes captured (1152 bits) o
      Null/Loopback
      Internet Protocol Version 4, Src: 127.0.0.1, Dst: 127.0.0.1
      Transmission Control Protocol, Src Port: 5760, Dst Port: 62025, Seq: 126
      MAVLink Protocol (88)
          Header
              Magic value / version: MAVLink 2.0 (0xfd)
              Payload length: 10
              Incompatibility flag: 0x00 (0)
              Compatibility flag: 0x00 (0)
              Packet sequence: 71
              System id: 1
              Component id: MAV_COMP_ID_AUTOPILOT1 (1)
              Message id: COMMAND_ACK (77)
          Payload: COMMAND_ACK (77)
              command (MAV_CMD): MAV_CMD_COMPONENT_ARM_DISARM (400)
              result (MAV_RESULT): MAV_RESULT_ACCEPTED (0)
          Message CRC: 0x1878
      MAVLink Protocol (88)
          Header
              Magic value / version: MAVLink 2.0 (0xfd)
              Payload length: 17
              Incompatibility flag: 0x00 (0)
              Compatibility flag: 0x00 (0)
              Packet sequence: 72
              System id: 1
              Component id: MAV_COMP_ID_AUTOPILOT1 (1)
              Message id: STATUSTEXT (253)
          Payload: STATUSTEXT (253)
              severity (MAV_SEVERITY): MAV_SEVERITY_INFO (6)
              text (char): Disarming motors
          Message CRC: 0x570a
      MAVLink Protocol (88)
          Header
              Magic value / version: MAVLink 2.0 (0xfd)
              Payload length: 25
              Incompatibility flag: 0x00 (0)
              Compatibility flag: 0x00 (0)
              Packet sequence: 73
              System id: 1
              Component id: MAV_COMP_ID_AUTOPILOT1 (1)
              Message id: PARAM_VALUE (22)
          Payload: PARAM_VALUE (22)
              param_id (char): MOT_THST_HOVER
              param_value (float): 0.39
              param_type (MAV_PARAM_TYPE): MAV_PARAM_TYPE_REAL32 (9)
              param_count (uint16_t): 1305
              param_index (uint16_t): 65535
          Message CRC: 0xf478
      
  
    ''',
  })
# ---
# name: test_wlua[common.xml-common.pcapng]
  dict({
    'returncode': 0,
    'stderr': '',
    'stdout': '''
      Frame 1: 101 bytes on wire (808 bits), 101 bytes captured (808 bits) on 
      Null/Loopback
      Internet Protocol Version 4, Src: 127.0.0.1, Dst: 127.0.0.1
      Transmission Control Protocol, Src Port: 62025, Dst Port: 5760, Seq: 1, 
      MAVLink Protocol (45)
          Header
              Magic value / version: MAVLink 2.0 (0xfd)
              Payload length: 33
              Incompatibility flag: 0x00 (0)
              Compatibility flag: 0x00 (0)
              Packet sequence: 246
              System id: 250
              Component id: MAV_COMP_ID_SYSTEM_CONTROL (250)
              Message id: COMMAND_LONG (76)
          Payload: COMMAND_LONG (76)
              target_system (uint8_t): 1
              target_component (uint8_t): 1
              command (MAV_CMD): MAV_CMD_DO_SET_MODE (176)
              confirmation (uint8_t): 1
              param1: Mode (MAV_MODE): Unknown (1)
              param2: Custom Mode (float): 5
              param3: Custom Submode (float): 0
              param4 (float): 0
              param5 (float): 0
              param6 (float): 0
              param7 (float): 0
          Message CRC: 0xdb93
      
      Frame 2: 138 bytes on wire (1104 bits), 138 bytes captured (1104 bits) o
      Null/Loopback
      Internet Protocol Version 4, Src: 127.0.0.1, Dst: 127.0.0.1
      Transmission Control Protocol, Src Port: 5760, Dst Port: 62025, Seq: 1, 
      MAVLink Protocol (82)
          Header
              Magic value / version: MAVLink 2.0 (0xfd)
              Payload length: 10
              Incompatibility flag: 0x00 (0)
              Compatibility flag: 0x00 (0)
              Packet sequence: 218
              System id: 1
              Component id: MAV_COMP_ID_AUTOPILOT1 (1)
              Message id: COMMAND_ACK (77)
          Payload: COMMAND_ACK (77)
              command (MAV_CMD): MAV_CMD_DO_SET_MODE (176)
              result (MAV_RESULT): MAV_RESULT_FAILED (4)
          Message CRC: 0x7692
      MAVLink Protocol (82)
          Header
              Magic value / version: MAVLink 2.0 (0xfd)
              Payload length: 48
              Incompatibility flag: 0x00 (0)
              Compatibility flag: 0x00 (0)
              Packet sequence: 219
              System id: 1
              Component id: MAV_COMP_ID_AUTOPILOT1 (1)
              Message id: STATUSTEXT (253)
          Payload: STATUSTEXT (253)
              severity (MAV_SEVERITY): MAV_SEVERITY_WARNING (4)
              text (char): Mode change to LOITER failed: requires position
          Message CRC: 0x647a
      
      Frame 3: 101 bytes on wire (808 bits), 101 bytes captured (808 bits) on 
      Null/Loopback
      Internet Protocol Version 4, Src: 127.0.0.1, Dst: 127.0.0.1
      Transmission Control Protocol, Src Port: 62025, Dst Port: 5760, Seq: 706
      MAVLink Protocol (45)
          Header
              Magic value / version: MAVLink 2.0 (0xfd)
              Payload length: 33
              Incompatibility flag: 0x00 (0)
              Compatibility flag: 0x00 (0)
              Packet sequence: 11
              System id: 250
              Component id: MAV_COMP_ID_SYSTEM_CONTROL (250)
              Message id: COMMAND_LONG (76)
          Payload: COMMAND_LONG (76)
              target_system (uint8_t): 1
              target_component (uint8_t): 1
              command (MAV_CMD): MAV_CMD_COMPONENT_ARM_DISARM (400)
              confirmation (uint8_t): 1
              param1: Arm (float): 0
              param2: Force (float): 0
              param3 (float): 0
              param4 (float): 0
              param5 (float): 0
              param6 (float): 0
              param7 (float): 0
          Message CRC: 0xf9df
      
      Frame 4: 144 bytes on wire (1152 bits), 144 bytes captured (1152 bits) o
      Null/Loopback
      Internet Protocol Version 4, Src: 127.0.0.1, Dst: 127.0.0.1
      Transmission Control Protocol, Src Port: 5760, Dst Port: 62025, Seq: 126
      MAVLink Protocol (88)
          Header
              Magic value / version: MAVLink 2.0 (0xfd)
              Payload length: 10
              Incompatibility flag: 0x00 (0)
              Compatibility flag: 0x00 (0)
              Packet sequence: 71
              System id: 1
              Component id: MAV_COMP_ID_AUTOPILOT1 (1)
              Message id: COMMAND_ACK (77)
          Payload: COMMAND_ACK (77)
              command (MAV_CMD): MAV_CMD_COMPONENT_ARM_DISARM (400)
              result (MAV_RESULT): MAV_RESULT_ACCEPTED (0)
          Message CRC: 0x1878
      MAVLink Protocol (88)
          Header
              Magic value / version: MAVLink 2.0 (0xfd)
              Payload length: 17
              Incompatibility flag: 0x00 (0)
              Compatibility flag: 0x00 (0)
              Packet sequence: 72
              System id: 1
              Component id: MAV_COMP_ID_AUTOPILOT1 (1)
              Message id: STATUSTEXT (253)
          Payload: STATUSTEXT (253)
              severity (MAV_SEVERITY): MAV_SEVERITY_INFO (6)
              text (char): Disarming motors
          Message CRC: 0x570a
      MAVLink Protocol (88)
          Header
              Magic value / version: MAVLink 2.0 (0xfd)
              Payload length: 25
              Incompatibility flag: 0x00 (0)
              Compatibility flag: 0x00 (0)
              Packet sequence: 73
              System id: 1
              Component id: MAV_COMP_ID_AUTOPILOT1 (1)
              Message id: PARAM_VALUE (22)
          Payload: PARAM_VALUE (22)
              param_id (char): MOT_THST_HOVER
              param_value (float): 0.39
              param_type (MAV_PARAM_TYPE): MAV_PARAM_TYPE_REAL32 (9)
              param_count (uint16_t): 1305
              param_index (uint16_t): 65535
          Message CRC: 0xf478
      
  
    ''',
  })
# ---
# name: test_wlua[minimal.xml-common.pcapng]
  dict({
    'returncode': 0,
    'stderr': '',
    'stdout': '''
      Frame 1: 101 bytes on wire (808 bits), 101 bytes captured (808 bits) on 
      Null/Loopback
      Internet Protocol Version 4, Src: 127.0.0.1, Dst: 127.0.0.1
      Transmission Control Protocol, Src Port: 62025, Dst Port: 5760, Seq: 1, 
      MAVLink Protocol (45)
          Header
              Magic value / version: MAVLink 2.0 (0xfd)
              Payload length: 33
              Incompatibility flag: 0x00 (0)
              Compatibility flag: 0x00 (0)
              Packet sequence: 246
              System id: 250
              Component id: MAV_COMP_ID_SYSTEM_CONTROL (250)
              Message id: Unknown (76)
          [Expert Info (Error/Malformed): Unknown message type]
              [Unknown message type]
              [Severity level: Error]
              [Group: Malformed]
          Unparsable payload: 0000803f0000a04000000000000000000000000000000000
          Message CRC: 0xdb93
      
      Frame 2: 138 bytes on wire (1104 bits), 138 bytes captured (1104 bits) o
      Null/Loopback
      Internet Protocol Version 4, Src: 127.0.0.1, Dst: 127.0.0.1
      Transmission Control Protocol, Src Port: 5760, Dst Port: 62025, Seq: 1, 
      MAVLink Protocol (82)
          Header
              Magic value / version: MAVLink 2.0 (0xfd)
              Payload length: 10
              Incompatibility flag: 0x00 (0)
              Compatibility flag: 0x00 (0)
              Packet sequence: 218
              System id: 1
              Component id: MAV_COMP_ID_AUTOPILOT1 (1)
              Message id: Unknown (77)
          [Expert Info (Error/Malformed): Unknown message type]
              [Unknown message type]
              [Severity level: Error]
              [Group: Malformed]
          Unparsable payload: b000040000000000fafa9276fd300000db0101fd0000044d
          Message CRC: 0x647a
      
      Frame 3: 101 bytes on wire (808 bits), 101 bytes captured (808 bits) on 
      Null/Loopback
      Internet Protocol Version 4, Src: 127.0.0.1, Dst: 127.0.0.1
      Transmission Control Protocol, Src Port: 62025, Dst Port: 5760, Seq: 706
      MAVLink Protocol (45)
          Header
              Magic value / version: MAVLink 2.0 (0xfd)
              Payload length: 33
              Incompatibility flag: 0x00 (0)
              Compatibility flag: 0x00 (0)
              Packet sequence: 11
              System id: 250
              Component id: MAV_COMP_ID_SYSTEM_CONTROL (250)
              Message id: Unknown (76)
          [Expert Info (Error/Malformed): Unknown message type]
              [Unknown message type]
              [Severity level: Error]
              [Group: Malformed]
          Unparsable payload: 000000000000000000000000000000000000000000000000
          Message CRC: 0xf9df
      
      Frame 4: 144 bytes on wire (1152 bits), 144 bytes captured (1152 bits) o
      Null/Loopback
      Internet Protocol Version 4, Src: 127.0.0.1, Dst: 127.0.0.1
      Transmission Control Protocol, Src Port: 5760, Dst Port: 62025, Seq: 126
      MAVLink Protocol (88)
          Header
              Magic value / version: MAVLink 2.0 (0xfd)
              Payload length: 10
              Incompatibility flag: 0x00 (0)
              Compatibility flag: 0x00 (0)
              Packet sequence: 71
              System id: 1
              Component id: MAV_COMP_ID_AUTOPILOT1 (1)
              Message id: Unknown (77)
          [Expert Info (Error/Malformed): Unknown message type]
              [Unknown message type]
              [Severity level: Error]
              [Group: Malformed]
          Unparsable payload: 9001000000000000fafa7818fd110000480101fd00000644
          Message CRC: 0xf478
      
  
    ''',
  })
# ---
# name: test_wlua[common.xml-autopilot_version.pcapng]
  dict({
    'returncode': 0,
    'stderr': '',
    'stdout': '''
      Frame 1: 131 bytes on wire (1048 bits), 131 bytes captured (1048 bits) o
      Ethernet II, Src: 00:00:00:00:00:00, Dst: 00:00:00:00:00:00
      Internet Protocol Version 4, Src: 127.0.0.1, Dst: 127.0.0.1
      User Datagram Protocol, Src Port: 34942, Dst Port: 18570
      MAVLink Protocol (89)
          Header
              Magic value / version: MAVLink 2.0 (0xfd)
              Payload length: 77
              Incompatibility flag: 0x00 (0)
              Compatibility flag: 0x00 (0)
              Packet sequence: 219
              System id: 1
              Component id: MAV_COMP_ID_AUTOPILOT1 (1)
              Message id: AUTOPILOT_VERSION (148)
          Payload: AUTOPILOT_VERSION (148)
              capabilities (MAV_PROTOCOL_CAPABILITY): 0x000000000000f36f (6231
                  .... .... .... .... ...1 = MAV_PROTOCOL_CAPABILITY_MISSION_F
                  .... .... .... .... ..1. = MAV_PROTOCOL_CAPABILITY_PARAM_FLO
                  .... .... .... .... .1.. = MAV_PROTOCOL_CAPABILITY_MISSION_I
                  .... .... .... .... 1... = MAV_PROTOCOL_CAPABILITY_COMMAND_I
                  .... .... .... ...0 .... = MAV_PROTOCOL_CAPABILITY_PARAM_ENC
                  .... .... .... ..1. .... = MAV_PROTOCOL_CAPABILITY_FTP: True
                  .... .... .... .1.. .... = MAV_PROTOCOL_CAPABILITY_SET_ATTIT
                  .... .... .... 0... .... = MAV_PROTOCOL_CAPABILITY_SET_POSIT
                  .... .... ...1 .... .... = MAV_PROTOCOL_CAPABILITY_SET_POSIT
                  .... .... ..1. .... .... = MAV_PROTOCOL_CAPABILITY_TERRAIN: 
                  .... .... .0.. .... .... = MAV_PROTOCOL_CAPABILITY_SET_ACTUA
                  .... .... 0... .... .... = MAV_PROTOCOL_CAPABILITY_FLIGHT_TE
                  .... ...1 .... .... .... = MAV_PROTOCOL_CAPABILITY_COMPASS_C
                  .... ..1. .... .... .... = MAV_PROTOCOL_CAPABILITY_MAVLINK2:
                  .... .1.. .... .... .... = MAV_PROTOCOL_CAPABILITY_MISSION_F
                  .... 1... .... .... .... = MAV_PROTOCOL_CAPABILITY_MISSION_R
                  ...0 .... .... .... .... = MAV_PROTOCOL_CAPABILITY_RESERVED2
                  ..0. .... .... .... .... = MAV_PROTOCOL_CAPABILITY_PARAM_ENC
              flight_sw_version (uint32_t): 67307007
              middleware_sw_version (uint32_t): 0
              os_sw_version (uint32_t): 0
              board_version (uint32_t): 0
              flight_custom_version[0] (uint8_t): 51
              flight_custom_version[1] (uint8_t): 98
              flight_custom_version[2] (uint8_t): 102
              flight_custom_version[3] (uint8_t): 54
              flight_custom_version[4] (uint8_t): 100
              flight_custom_version[5] (uint8_t): 55
              flight_custom_version[6] (uint8_t): 97
              flight_custom_version[7] (uint8_t): 99
              middleware_custom_version[0] (uint8_t): 0
              middleware_custom_version[1] (uint8_t): 0
              middleware_custom_version[2] (uint8_t): 0
              middleware_custom_version[3] (uint8_t): 0
              middleware_custom_version[4] (uint8_t): 0
              middleware_custom_version[5] (uint8_t): 0
              middleware_custom_version[6] (uint8_t): 0
              middleware_custom_version[7] (uint8_t): 0
              os_custom_version[0] (uint8_t): 0
              os_custom_version[1] (uint8_t): 0
              os_custom_version[2] (uint8_t): 0
              os_custom_version[3] (uint8_t): 0
              os_custom_version[4] (uint8_t): 0
              os_custom_version[5] (uint8_t): 0
              os_custom_version[6] (uint8_t): 0
              os_custom_version[7] (uint8_t): 0
              vendor_id (uint16_t): 0
              product_id (uint16_t): 0
              uid (uint64_t): 0
          Message CRC: 0xfcfc
      
  
    ''',
  })
# ---
# name: test_wlua[common.xml-gps_global_origin.pcapng]
  dict({
    'returncode': 0,
    'stderr': '',
    'stdout': '''
      Frame 1: 70 bytes on wire (560 bits), 70 bytes captured (560 bits) on in
      Ethernet II, Src: 00:00:00:00:00:00, Dst: 00:00:00:00:00:00
      Internet Protocol Version 4, Src: 127.0.0.1, Dst: 127.0.0.1
      User Datagram Protocol, Src Port: 57304, Dst Port: 14550
      MAVLink Protocol (28)
          Header
              Magic value / version: MAVLink 2.0 (0xfd)
              Payload length: 16
              Incompatibility flag: 0x00 (0)
              Compatibility flag: 0x00 (0)
              Packet sequence: 110
              System id: 1
              Component id: MAV_COMP_ID_AUTOPILOT1 (1)
              Message id: GPS_GLOBAL_ORIGIN (49)
          Payload: GPS_GLOBAL_ORIGIN (49)
              latitude (int32_t) [degE7]: 517015586 (51.7015586 deg)
              longitude (int32_t) [degE7]: -3332886 (-0.3332886 deg)
              altitude (int32_t) [mm]: 56990
          Message CRC: 0xffcc
      
  
    ''',
  })
# ---
# name: test_wlua[common.xml-mission_item_int.pcapng]
  dict({
    'returncode': 0,
    'stderr': '',
    'stdout': '''
      Frame 1: 115 bytes on wire (920 bits), 115 bytes captured (920 bits) on 
      Ethernet II, Src: 00:00:00:00:00:00, Dst: 00:00:00:00:00:00
      Internet Protocol Version 4, Src: 127.0.0.1, Dst: 127.0.0.1
      Transmission Control Protocol, Src Port: 54026, Dst Port: 5760, Seq: 1, 
      MAVLink Protocol (49)
          Header
              Magic value / version: MAVLink 2.0 (0xfd)
              Payload length: 37
              Incompatibility flag: 0x00 (0)
              Compatibility flag: 0x00 (0)
              Packet sequence: 153
              System id: 255
              Component id: Unknown (230)
              Message id: MISSION_ITEM_INT (73)
          Payload: MISSION_ITEM_INT (73)
              target_system (uint8_t): 1
              target_component (uint8_t): 1
              seq (uint16_t): 7
              frame (MAV_FRAME): MAV_FRAME_GLOBAL_RELATIVE_ALT (3)
              command (MAV_CMD): MAV_CMD_NAV_VTOL_LAND (85)
              current (uint8_t): 0
              autocontinue (uint8_t): 1
              param1: Land Options (NAV_VTOL_LAND_OPTIONS): NAV_VTOL_LAND_OPTI
              param2 (float): 0
              param3: Approach Altitude (float) m: 0
              param4: Yaw (float) deg: 0
              x: Latitude (int32_t): 514775152
              y: Longitude (int32_t): -25939161
              z: Ground Altitude (float) m: 0
          Message CRC: 0x4bdc
      
  
    ''',
  })
# ---
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             

   M<+    6 Intel(R) Core(TM) i5-3210M CPU @ 2.50GHz (with SSE4.2)    Linux 5.15.0-83-generic  R Dumpcap (Wireshark) 4.0.6 (Git v4.0.6 packaged as 4.0.6-1~exp1~ubuntu22.04.0~ppa1)            D           lo  	  	     Linux 5.15.0-83-generic     D             C,                   E  uG@ @    ~H atM    o                              3bf6d7ac                8283e071490343188       l          Counters provided by dumpcap   A   z  G                    l                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               

   M<+     Apple M1 * macOS 13.5, build 22G5027e (Darwin 22.6.0)   2 Dumpcap (Wireshark) 4.0.6 (v4.0.6-0-gac2f5a01286a)            X            lo0 	      * macOS 13.5, build 22G5027e (Darwin 22.6.0)      X              z<#e   e      E  a  @ @      Ix fU  
A"!  L    ?  @                                      <#         E    @ @      Ifx-=z  
"A
  M        v0    Mode change to LOITER failed: requires positionzd                a>#e   e      E  a  @ @      IzLU  
B@"!  L                                               b>#         E    @ @      ILz2  
"B@
  GM        x  H  Disarming motors
W  I  >MOT_THST_HOVER  	x                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           